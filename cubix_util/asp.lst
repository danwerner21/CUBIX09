                      (          asp.asm):00001         ;        TITLE   ASSEMBLY SOURCE PREPROCESSOR
                      (          asp.asm):00002         ;*
                      (          asp.asm):00003         ;* ASP: Assembly Source Preprocessor
                      (          asp.asm):00004         ;*
                      (          asp.asm):00005         ;* Copyright 1983-2005 Dave Dunfield
                      (          asp.asm):00006         ;* All rights reserved.
                      (          asp.asm):00007         ;*
     2000             (          asp.asm):00008         OSRAM           = $2000                           ; START OF OS OPERATING AREA
     DBFF             (          asp.asm):00009         OSEND           = $DBFF
     DBFF             (          asp.asm):00010         STACK           = OSEND                           ;SYSTEM STACK SPACE
     D9FF             (          asp.asm):00011         USP             = STACK-512                       ;USER STACK SPACE
     D7FF             (          asp.asm):00012         CTSP            = USP-512                         ;CONTROL STACK SPACE
                      (          asp.asm):00013         ;*
                      (          asp.asm):00014                 ORG     OSRAM                             ;PROGRAM EXECUTION SPACE
                      (          asp.asm):00015         ;* PROGRAM ENTRY
2000                  (          asp.asm):00016         ASP
2000 813F             (          asp.asm):00017                 CMPA    #'?'                              ;QUERY OPERAND?
2002 2636             (          asp.asm):00018                 BNE     QUAL                              ;NO, LOOK FOR QUALIFIER
2004 3F               (          asp.asm):00019                 SWI
2005 19               (          asp.asm):00020                 FCB     25
2006 5573653A20415350 (          asp.asm):00021                 FCN     'Use: ASP[/COMMENT/SOURCE/QUIET] <ASP source file>'
     5B2F434F4D4D454E
     542F534F55524345
     2F51554945545D20
     3C41535020736F75
     7263652066696C65
     3E00
2038 3F               (          asp.asm):00022                 SWI
2039 00               (          asp.asm):00023                 FCB     0
                      (          asp.asm):00024         ;*
                      (          asp.asm):00025         ;* PARSE        FOR QUALIFIERS
                      (          asp.asm):00026         ;*
203A                  (          asp.asm):00027         QUAL
203A A6A4             (          asp.asm):00028                 LDA     ,Y                                ;GET CHAR FROM COMMAND LINE
203C 812F             (          asp.asm):00029                 CMPA    #'/'                              ;IS IT A QUALIFIER?
203E 2644             (          asp.asm):00030                 BNE     MAIN                              ;NO, GET PARAMETERS
2040 308D0A4C         (          asp.asm):00031                 LEAX    QTABLE,PCR      POINT TO QUALIFIER TABLE
2044 3F               (          asp.asm):00032                 SWI
2045 12               (          asp.asm):00033                 FCB     18                                ;LOOK IT UP
2046 C103             (          asp.asm):00034                 CMPB    #QMAX                             ;IS IT IN RANGE
2048 2408             (          asp.asm):00035                 BHS     QERR                              ;IF SO, IT'S INVALID
204A 308D0A5B         (          asp.asm):00036                 LEAX    QFLAGS,PCR      POINT TO QUALIFIER FLAGS
204E 6F85             (          asp.asm):00037                 CLR     B,X                               ;SET THE FLAG
2050 20E8             (          asp.asm):00038                 BRA     QUAL                              ;LOOK FOR ANOTHER QUALIFIER
2052                  (          asp.asm):00039         QERR
2052 3F               (          asp.asm):00040                 SWI
2053 18               (          asp.asm):00041                 FCB     24                                ;DISPLAY MESSAGE
2054 496E76616C696420 (          asp.asm):00042                 FCN     'Invalid qualifier: '
     7175616C69666965
     723A2000
2068 A6A0             (          asp.asm):00043                 LDA     ,Y+                               ;GET CHARACTER
206A                  (          asp.asm):00044         DSQU1
206A 3F               (          asp.asm):00045                 SWI
206B 21               (          asp.asm):00046                 FCB     33                                ;DISPLAY
206C A6A0             (          asp.asm):00047                 LDA     ,Y+                               ;GET NEXT CHAR
206E 270C             (          asp.asm):00048                 BEQ     GOABO                             ;NULL IS DELIMITER
2070 812F             (          asp.asm):00049                 CMPA    #'/'                              ;START OF ANOTHER QUALIFIER?
2072 2708             (          asp.asm):00050                 BEQ     GOABO                             ;IF SO, QUIT
2074 8120             (          asp.asm):00051                 CMPA    #' '                              ;SPACE?
2076 2704             (          asp.asm):00052                 BEQ     GOABO                             ;IF SO, QUIT
2078 810D             (          asp.asm):00053                 CMPA    #$0D                              ;END OF LINE?
207A 26EE             (          asp.asm):00054                 BNE     DSQU1                             ;NO, KEEP DUMPING
207C                  (          asp.asm):00055         GOABO
207C 3F               (          asp.asm):00056                 SWI
207D 19               (          asp.asm):00057                 FCB     25                                ;DISPLAY MESSAGE
207E 2700             (          asp.asm):00058                 FCB     $27,0                             ;CHARACTERS TO DISPLAY
2080 8601             (          asp.asm):00059                 LDA     #1                                ;INVALID OPERAND RETURN CODE
2082                  (          asp.asm):00060         ABORT
2082 3F               (          asp.asm):00061                 SWI
2083 00               (          asp.asm):00062                 FCB     0                                 ;RETURN TO OS
                      (          asp.asm):00063         ;*
                      (          asp.asm):00064         ;* OPEN INPUT FILE
                      (          asp.asm):00065         ;*
2084                  (          asp.asm):00066         MAIN
2084 10CEDBFF         (          asp.asm):00067                 LDS     #STACK
2088 3F               (          asp.asm):00068                 SWI
2089 0B               (          asp.asm):00069                 FCB     11                                ;GET NAME
208A 1026FFF4         (          asp.asm):00070                 LBNE    ABORT                             ;ERROR
208E CC4153           (          asp.asm):00071                 LDD     #$4153                            ;'AS'
2091 ED84             (          asp.asm):00072                 STD     ,X                                ;SAVE
2093 8650             (          asp.asm):00073                 LDA     #'P'                              ;'P', CR
2095 A702             (          asp.asm):00074                 STA     2,X                               ;SAVE
2097 CE2B43           (          asp.asm):00075                 LDU     #INPFIL                           ;PT TO INPUT
209A 3F               (          asp.asm):00076                 SWI
209B 37               (          asp.asm):00077                 FCB     55                                ;OPEN FOR READ
209C 26E4             (          asp.asm):00078                 BNE     ABORT                             ;BAD, GIVE UP
209E 864D             (          asp.asm):00079                 LDA     #'M'                              ;'ASM'
20A0 A702             (          asp.asm):00080                 STA     2,X                               ;SET LAST CHAR
20A2 CE2D4D           (          asp.asm):00081                 LDU     #OUTFIL                           ;PT TO OUTPUT
20A5 3F               (          asp.asm):00082                 SWI
20A6 38               (          asp.asm):00083                 FCB     56                                ;OPEN FOR WRITE
20A7 1026FFD7         (          asp.asm):00084                 LBNE    ABORT                             ;INVALID
20AB CED9FF           (          asp.asm):00085                 LDU     #USP                              ;POINT TO USER STACK SPACE
20AE 8E2F57           (          asp.asm):00086                 LDX     #SYMTAB                           ;POINT TO SYMBOL TABLE
20B1 6F84             (          asp.asm):00087                 CLR     ,X                                ;START OFF WITH NO SYMBOLS
20B3 BF2AC1           (          asp.asm):00088                 STX     SYMEND                            ;SAVE POINTER
20B6 7D2AA9           (          asp.asm):00089                 TST     QUIET                             ;ARE WE BEING QUIET?
20B9 272D             (          asp.asm):00090                 BEQ     RDINP                             ;IF SO, DON'T MAKE ANY NOISE
20BB 3F               (          asp.asm):00091                 SWI
20BC 19               (          asp.asm):00092                 FCB     25                                ;DISPLAY MESSAGE
20BD 4153502076657273 (          asp.asm):00093                 FCC     'ASP version 1.0'
     696F6E20312E30
20CC 0A0D             (          asp.asm):00094                 FCB     $0A,$0D
20CE 50726F6365737369 (          asp.asm):00095                 FCN     'Processing source file...'
     6E6720736F757263
     652066696C652E2E
     2E00
                      (          asp.asm):00096         ;*
                      (          asp.asm):00097         ;* READ LINE OF INPUT
                      (          asp.asm):00098         ;*
20E8                  (          asp.asm):00099         RDINP
20E8 FC2AAC           (          asp.asm):00100                 LDD     LINE                              ;GET CURRENT LINE NUMBER
20EB C30001           (          asp.asm):00101                 ADDD    #1                                ;INCREMENT
20EE FD2AAC           (          asp.asm):00102                 STD     LINE                              ;RESAVE
20F1 8E2AC3           (          asp.asm):00103                 LDX     #INPLIN                           ;POINT TO INPUT LINE
20F4 1F12             (          asp.asm):00104                 TFR     X,Y                               ;COPY TO Y FOR LATER
20F6                  (          asp.asm):00105         RDIN1
20F6 1705E5           (          asp.asm):00106                 LBSR    RDINPF                            ;READ A CHAR
20F9 2679             (          asp.asm):00107                 BNE     CRVARS                            ;END OF FILE
20FB A780             (          asp.asm):00108                 STA     ,X+                               ;SAVE IT
20FD 810D             (          asp.asm):00109                 CMPA    #$0D                              ;END OF LINE?
20FF 26F5             (          asp.asm):00110                 BNE     RDIN1                             ;NO, KEEP READING
2101 3F               (          asp.asm):00111                 SWI
2102 04               (          asp.asm):00112                 FCB     4                                 ;LOOK FOR INPUT
2103 27E3             (          asp.asm):00113                 BEQ     RDINP                             ;NULL LINE, IGNORE
2105 812A             (          asp.asm):00114                 CMPA    #'*'                              ;COMMANT?
2107 275A             (          asp.asm):00115                 BEQ     PROCOM                            ;IF SO, SKIP IT
                      (          asp.asm):00116         ;* WE HAVE INPUT LINE
2109 3420             (          asp.asm):00117                 PSHS    Y                                 ;SAVE IT
210B B62AAB           (          asp.asm):00118                 LDA     SOURCE                            ;IS SOURCE COPY ENABLED?
210E 2611             (          asp.asm):00119                 BNE     NOSORC                            ;NO, SKIP IT
2110 1703BC           (          asp.asm):00120                 LBSR    STROUT                            ;WRITE STRING
2113 2A3E3E2000       (          asp.asm):00121                 FCN     '*>> '                            ;MESSAGE
2118                  (          asp.asm):00122         WRSRLI
2118 A6A0             (          asp.asm):00123                 LDA     ,Y+                               ;GET CHAR
211A 1703D7           (          asp.asm):00124                 LBSR    WROUT                             ;OUTPUT
211D 810D             (          asp.asm):00125                 CMPA    #$0D                              ;END OF LINE?
211F 26F7             (          asp.asm):00126                 BNE     WRSRLI                            ;CONTINUE
                      (          asp.asm):00127         ;* TEST FOR LABLE ON LINE
2121                  (          asp.asm):00128         NOSORC
2121 10AEE4           (          asp.asm):00129                 LDY     ,S                                ;GET POINTER BACK
2124 A6A4             (          asp.asm):00130                 LDA     ,Y                                ;GET CHAR
2126 8141             (          asp.asm):00131                 CMPA    #'A'                              ;<'A'
2128 2523             (          asp.asm):00132                 BLO     NOSR1                             ;NO LABLE
212A 815A             (          asp.asm):00133                 CMPA    #'Z'                              ;>'Z'?
212C 221F             (          asp.asm):00134                 BHI     NOSR1                             ;NO LABLE
212E                  (          asp.asm):00135         SRCLAB
212E A6A0             (          asp.asm):00136                 LDA     ,Y+                               ;GET CHAR
2130 1704A7           (          asp.asm):00137                 LBSR    VALSYM                            ;IS THIS IT?
2133 27F9             (          asp.asm):00138                 BEQ     SRCLAB                            ;KEEP GOING
2135 813A             (          asp.asm):00139                 CMPA    #':'                              ;LABLE?
2137 2614             (          asp.asm):00140                 BNE     NOSR1                             ;NOT A LABLE
2139 3520             (          asp.asm):00141                 PULS    Y                                 ;RESTORE Y
213B 170481           (          asp.asm):00142                 LBSR    CPVAR
213E 17038E           (          asp.asm):00143                 LBSR    STROUT
2141 09               (          asp.asm):00144                 FCB     $09
2142 455155           (          asp.asm):00145                 FCC     'EQU'
2145 092A0D00         (          asp.asm):00146                 FCB     $09,'*',$0D,0
2149 3121             (          asp.asm):00147                 LEAY    1,Y                               ;ADVANCE
214B 3420             (          asp.asm):00148                 PSHS    Y                                 ;RESAVE
214D                  (          asp.asm):00149         NOSR1
214D 3520             (          asp.asm):00150                 PULS    Y                                 ;RESTORE Y
214F 10FF2AB7         (          asp.asm):00151                 STS     SAVS                              ;SAVE SP
2153 FF2AB9           (          asp.asm):00152                 STU     SAVU                              ;SAVE U
2156 8E29F1           (          asp.asm):00153                 LDX     #RESWRD
2159 3F               (          asp.asm):00154                 SWI
215A 12               (          asp.asm):00155                 FCB     18                                ;LOOK UP WORD
215B 8E2A3E           (          asp.asm):00156                 LDX     #HNDLRS                           ;POINTS TO HANDLERS
215E 58               (          asp.asm):00157                 ASLB                                      ;     SHIFT FOR DOUBLE BYTE WORDS
215F AD95             (          asp.asm):00158                 JSR     [B,X]                             ;EXECUTE PROGRAM CODE
2161 2085             (          asp.asm):00159                 BRA     RDINP                             ;READ NEXT LINE
                      (          asp.asm):00160         ;* PROCESS COMMENT LINE
2163                  (          asp.asm):00161         PROCOM
2163 7D2AAA           (          asp.asm):00162                 TST     COMNT                             ;INCLUDE IN OUTPUT?
2166 2680             (          asp.asm):00163                 BNE     RDINP                             ;NO, SKIP IT
2168                  (          asp.asm):00164         WRCOMN
2168 A6A0             (          asp.asm):00165                 LDA     ,Y+                               ;GET CHAR
216A 170387           (          asp.asm):00166                 LBSR    WROUT                             ;WRITE IT
216D 810D             (          asp.asm):00167                 CMPA    #$0D                              ;END OF LINE?
216F 26F7             (          asp.asm):00168                 BNE     WRCOMN                            ;NO, CONTINUE
2171 16FF74           (          asp.asm):00169                 LBRA    RDINP                             ;NEXT LINE
                      (          asp.asm):00170         ;*
                      (          asp.asm):00171         ;* END OF COMPILE, CREATE VARIABLE STATEMENTS
                      (          asp.asm):00172         ;*
2174                  (          asp.asm):00173         CRVARS
2174 FC2AAE           (          asp.asm):00174                 LDD     DATADR                            ;GET DATA ADDRESS
2177 2713             (          asp.asm):00175                 BEQ     NODORG                            ;DON'T ORG DATA
2179 170353           (          asp.asm):00176                 LBSR    STROUT                            ;WRITE STRING
217C 09               (          asp.asm):00177                 FCB     9                                 ;TAB
217D 4F5247           (          asp.asm):00178                 FCC     'ORG'
2180 09               (          asp.asm):00179                 FCB     9                                 ;TAB,CR
2181 2400             (          asp.asm):00180                 FCN     '$'
2183 FC2AAE           (          asp.asm):00181                 LDD     DATADR                            ;GET DATA ADDRESS
2186 170350           (          asp.asm):00182                 LBSR    WRHEXW                            ;OUTPUT HEX WORD
2189 170070           (          asp.asm):00183                 LBSR    ENDCR                             ;WRITE A NEW LINE CHARACTER
218C                  (          asp.asm):00184         NODORG
218C 8E2F57           (          asp.asm):00185                 LDX     #SYMTAB                           ;POINT TO SYMBOL TABLE
218F                  (          asp.asm):00186         NODOR1
218F 6D84             (          asp.asm):00187                 TST     ,X                                ;AT END?
2191 2738             (          asp.asm):00188                 BEQ     ENDVAR                            ;IF SO, WE ARE AT THE END
2193 1F12             (          asp.asm):00189                 TFR     X,Y                               ;SAVE IT
2195                  (          asp.asm):00190         IDENTI
2195 A6A0             (          asp.asm):00191                 LDA     ,Y+                               ;GET CHAR
2197 2AFC             (          asp.asm):00192                 BPL     IDENTI                            ;LOOK FOR NEXT
2199 E6A4             (          asp.asm):00193                 LDB     ,Y                                ;GET TYPE
219B 2B2A             (          asp.asm):00194                 BMI     VARNXT                            ;CONSTANT, SKIP IT
219D                  (          asp.asm):00195         WRNAM
219D A684             (          asp.asm):00196                 LDA     ,X                                ;GET VAR
219F 847F             (          asp.asm):00197                 ANDA    #$7F                              ;CONVERT TO NORM
21A1 170350           (          asp.asm):00198                 LBSR    WROUT                             ;OUTPUT IT
21A4 A680             (          asp.asm):00199                 LDA     ,X+                               ;GET NEXT
21A6 2AF5             (          asp.asm):00200                 BPL     WRNAM                             ;OUTPUT
21A8 170324           (          asp.asm):00201                 LBSR    STROUT                            ;WRITE STRING
21AB 09               (          asp.asm):00202                 FCB     9                                 ;TAB
21AC 524D42           (          asp.asm):00203                 FCC     'RMB'
21AF 09               (          asp.asm):00204                 FCB     9
21B0 2400             (          asp.asm):00205                 FCN     '$'
21B2 C502             (          asp.asm):00206                 BITB    #2                                ;TEST FOR WORD
21B4 3401             (          asp.asm):00207                 PSHS    CC                                ;SAVE FLAGS
21B6 EC01             (          asp.asm):00208                 LDD     1,X                               ;GET LENGTH
21B8 2601             (          asp.asm):00209                 BNE     DEFA                              ;DEFAULT TO ONE
21BA 5C               (          asp.asm):00210                 INCB                                      ;     CONVERT TO ONE
21BB                  (          asp.asm):00211         DEFA
21BB 3501             (          asp.asm):00212                 PULS    CC                                ;RESTORE FLAGS
21BD 2702             (          asp.asm):00213                 BEQ     WRLEN                             ;OK
21BF 58               (          asp.asm):00214                 LSLB                                      ;     SHIFT B
21C0 49               (          asp.asm):00215                 ROLA                                      ;     TIMES TWO
21C1                  (          asp.asm):00216         WRLEN
21C1 170315           (          asp.asm):00217                 LBSR    WRHEXW                            ;WRITE IT
21C4 170035           (          asp.asm):00218                 LBSR    ENDCR                             ;NEW LINE
21C7                  (          asp.asm):00219         VARNXT
21C7 3023             (          asp.asm):00220                 LEAX    3,Y                               ;POINT TO NEXT
21C9 20C4             (          asp.asm):00221                 BRA     NODOR1
                      (          asp.asm):00222         ;* VARIALES ARE CREATED
21CB                  (          asp.asm):00223         ENDVAR
21CB CE2D4D           (          asp.asm):00224                 LDU     #OUTFIL                           ;PT TO OUTPUT
21CE 3F               (          asp.asm):00225                 SWI
21CF 39               (          asp.asm):00226                 FCB     57                                ;CLOSE OUTPUT FILE
21D0 FC2AB2           (          asp.asm):00227                 LDD     ERRCNT                            ;ANY ERRORS?
21D3 2718             (          asp.asm):00228                 BEQ     ENDOK                             ;END WAS OK
21D5 3F               (          asp.asm):00229                 SWI
21D6 1A               (          asp.asm):00230                 FCB     26                                ;DISPLAY NUMBER
21D7 3F               (          asp.asm):00231                 SWI
21D8 19               (          asp.asm):00232                 FCB     25
21D9 206572726F727320 (          asp.asm):00233                 FCN     ' errors reported.'
     7265706F72746564
     2E00
21EB 8664             (          asp.asm):00234                 LDA     #100
21ED                  (          asp.asm):00235         ENDOK
21ED 16FE92           (          asp.asm):00236                 LBRA    ABORT
                      (          asp.asm):00237         ;*
                      (          asp.asm):00238         ;* STATEMENT HANDLERS
                      (          asp.asm):00239         ;*
                      (          asp.asm):00240         ;* SET CODE ADDRESS
21F0                  (          asp.asm):00241         CODE
21F0 1702DC           (          asp.asm):00242                 LBSR    STROUT                            ;SET STRING TO OUTPUT FILE
21F3 09               (          asp.asm):00243                 FCB     $09                               ;TAB
21F4 4F5247           (          asp.asm):00244                 FCC     'ORG'                             ;ORIGIN
21F7 0900             (          asp.asm):00245                 FCB     $09,0                             ;TAB, END
21F9 170317           (          asp.asm):00246                 LBSR    CPELEM                            ;COPY NEXT ELEMENT
                      (          asp.asm):00247         ;* END LINE WITH        CARRIAGE RETURN
21FC                  (          asp.asm):00248         ENDCR
21FC 860D             (          asp.asm):00249                 LDA     #$0D                              ;GET CARRIAGE RETURN
21FE 1602F3           (          asp.asm):00250                 LBRA    WROUT                             ;END LINE
                      (          asp.asm):00251         ;* SET DATA ADDRESS
2201                  (          asp.asm):00252         DATA
2201 17038B           (          asp.asm):00253                 LBSR    GETNUM                            ;GET DATA VALUE
2204 B72AAE           (          asp.asm):00254                 STA     DATADR                            ;SAVE DATA ADDRESS
2207 39               (          asp.asm):00255                 RTS
                      (          asp.asm):00256         ;* VARIABLE DECLARATION
2208                  (          asp.asm):00257         VARIAB
2208 54               (          asp.asm):00258                 LSRB                                      ;     CONVERT BACK TO NORMAL VALUE
2209 F72ABF           (          asp.asm):00259                 STB     TEMP                              ;SAVE TYPE
220C 8E2A5C           (          asp.asm):00260                 LDX     #DTAB                             ;POINT TO DATA TABLE
220F 3F               (          asp.asm):00261                 SWI
2210 12               (          asp.asm):00262                 FCB     18                                ;LOOK FOR IT
2211 5D               (          asp.asm):00263                 TSTB                                      ;     IS IT CONSTANT?
2212 2649             (          asp.asm):00264                 BNE     NORVAR                            ;NO, NORMAL VARIABLE
                      (          asp.asm):00265         ;* SET A        CONSTANT VALUE
2214                  (          asp.asm):00266         CONSTA
2214 3F               (          asp.asm):00267                 SWI
2215 04               (          asp.asm):00268                 FCB     4                                 ;SKIP TO NEXT
2216 3420             (          asp.asm):00269                 PSHS    Y                                 ;SAVE IT
2218 1703D5           (          asp.asm):00270                 LBSR    CRSYM                             ;CREATE SYMBOL
221B B62ABF           (          asp.asm):00271                 LDA     TEMP                              ;GET DATA TYPE
221E 8A80             (          asp.asm):00272                 ORA     #$80                              ;SET CONSTANT BIT
2220 A784             (          asp.asm):00273                 STA     ,X                                ;SET SYMBOL TYPE
2222 3520             (          asp.asm):00274                 PULS    Y                                 ;RESTORE Y
2224 170398           (          asp.asm):00275                 LBSR    CPVAR                             ;COPY VARIABLE NAME
2227 170444           (          asp.asm):00276                 LBSR    SKIP                              ;GET NEXT
222A 813D             (          asp.asm):00277                 CMPA    #'='                              ;EQUALS?
222C 261A             (          asp.asm):00278                 BNE     SYNTAX                            ;INVALID CONSTANT
222E 17029E           (          asp.asm):00279                 LBSR    STROUT                            ;WRITE A STRING
2231 09               (          asp.asm):00280                 FCB     $09                               ;TAB
2232 455155           (          asp.asm):00281                 FCC     'EQU'
2235 0900             (          asp.asm):00282                 FCB     $09,0
2237 1702D9           (          asp.asm):00283                 LBSR    CPELEM                            ;SAVE IT
223A 8DC0             (          asp.asm):00284                 BSR     ENDCR                             ;WRITE CARRIAGE RETURN
223C 17042F           (          asp.asm):00285                 LBSR    SKIP                              ;GET NEXT
223F 812C             (          asp.asm):00286                 CMPA    #','                              ;MORE DATA?
2241 27D1             (          asp.asm):00287                 BEQ     CONSTA                            ;IF SO, GO FOR MORE
2243 810D             (          asp.asm):00288                 CMPA    #$0D                              ;END OF LINE?
2245 2601             (          asp.asm):00289                 BNE     SYNTAX                            ;INVALID
2247 39               (          asp.asm):00290                 RTS
                      (          asp.asm):00291         ;*
                      (          asp.asm):00292         ;* SYNTAX ERROR
                      (          asp.asm):00293         ;*
2248                  (          asp.asm):00294         SYNTAX
2248 170300           (          asp.asm):00295                 LBSR    ERROR                             ;DISPLAY ERROR MESSAGE
224B 496E636F72726563 (          asp.asm):00296                 FCN     'Incorrect Syntax'
     742053796E746178
     00
225C 39               (          asp.asm):00297                 RTS
                      (          asp.asm):00298         ;* NORMAL VARIABLE DECLARATION
225D                  (          asp.asm):00299         NORVAR
225D 3F               (          asp.asm):00300                 SWI
225E 04               (          asp.asm):00301                 FCB     4                                 ;POINT TO VARIABLE
225F 17038E           (          asp.asm):00302                 LBSR    CRSYM                             ;CREATE SYMBOL
2262 B62ABF           (          asp.asm):00303                 LDA     TEMP                              ;GET DATA TYPE
2265 A780             (          asp.asm):00304                 STA     ,X+                               ;SAVE IT
2267 170404           (          asp.asm):00305                 LBSR    SKIP                              ;GET NEXT
226A 8128             (          asp.asm):00306                 CMPA    #'('                              ;ARRAY?
226C 260F             (          asp.asm):00307                 BNE     NOALL                             ;DON'T ALLOCATE SPACE
226E 17031E           (          asp.asm):00308                 LBSR    GETNUM                            ;GET INPUT NUMBER
2271 ED84             (          asp.asm):00309                 STD     ,X                                ;SET ARRAYYSIZE
2273 1703F8           (          asp.asm):00310                 LBSR    SKIP                              ;GET NEXT
2276 8129             (          asp.asm):00311                 CMPA    #')'                              ;CLOSING VALUE?
2278 26CE             (          asp.asm):00312                 BNE     SYNTAX                            ;NO, ERROR
227A 1703F1           (          asp.asm):00313                 LBSR    SKIP                              ;GET NEXT
227D                  (          asp.asm):00314         NOALL
227D 812C             (          asp.asm):00315                 CMPA    #','                              ;DO ANOTHER?
227F 27DC             (          asp.asm):00316                 BEQ     NORVAR                            ;IF SO, GO IT AGAIN
2281 810D             (          asp.asm):00317                 CMPA    #$0D                              ;END OF LINE?
2283 26C3             (          asp.asm):00318                 BNE     SYNTAX                            ;NO, INVALIE
2285                  (          asp.asm):00319         WRSRTS
2285 39               (          asp.asm):00320                 RTS
                      (          asp.asm):00321         ;*
                      (          asp.asm):00322         ;* 'ASM' COMMAND
                      (          asp.asm):00323         ;*
2286                  (          asp.asm):00324         ASM
2286 8E2AC3           (          asp.asm):00325                 LDX     #INPLIN                           ;GET INPUT LINE
2289 1F12             (          asp.asm):00326                 TFR     X,Y                               ;COPY
228B                  (          asp.asm):00327         ASM1
228B 170450           (          asp.asm):00328                 LBSR    RDINPF                            ;GET DATA
228E 26F5             (          asp.asm):00329                 BNE     WRSRTS                            ;END
2290 A780             (          asp.asm):00330                 STA     ,X+                               ;SAVE IT
2292 810D             (          asp.asm):00331                 CMPA    #$0D                              ;END OF LINE
2294 26F5             (          asp.asm):00332                 BNE     ASM1                              ;CONTINUE
2296 8E2A11           (          asp.asm):00333                 LDX     #ENDWRD                           ;POINT TO 'END'
2299 3F               (          asp.asm):00334                 SWI
229A 12               (          asp.asm):00335                 FCB     18                                ;IS THIS IT
229B 5D               (          asp.asm):00336                 TSTB                                      ;     FOUND IT
229C 27E7             (          asp.asm):00337                 BEQ     WRSRTS                            ;IF SO, EXIT
229E 8E2AC3           (          asp.asm):00338                 LDX     #INPLIN                           ;POINT TO INPUT LINE
22A1                  (          asp.asm):00339         ASM2
22A1 A680             (          asp.asm):00340                 LDA     ,X+                               ;GET IT
22A3 17024E           (          asp.asm):00341                 LBSR    WROUT                             ;OUTPUT
22A6 810D             (          asp.asm):00342                 CMPA    #$0D                              ;END OF LINE?
22A8 26F7             (          asp.asm):00343                 BNE     ASM2                              ;NO, WAIT
22AA 20DA             (          asp.asm):00344                 BRA     ASM                               ;GET NEXT
                      (          asp.asm):00345         ;* 'SUBROUTINE' STATEMENT
22AC                  (          asp.asm):00346         SUBR
22AC 8682             (          asp.asm):00347                 LDA     #$82                              ;INDICATE SUBROUTINE
22AE 1601A3           (          asp.asm):00348                 LBRA    PUSHS                             ;SAVE IT
                      (          asp.asm):00349         ;* DO CONDITIONALS
22B1                  (          asp.asm):00350         DOCOND
22B1 86FF             (          asp.asm):00351                 LDA     #$FF
22B3 B72AB6           (          asp.asm):00352                 STA     BYTE
22B6 1704DB           (          asp.asm):00353                 LBSR    EXPR                              ;CALCULATE EXPRESION
22B9 B62AB6           (          asp.asm):00354                 LDA     BYTE                              ;GET VALUE
22BC 3402             (          asp.asm):00355                 PSHS    A                                 ;SAVE IT
22BE 17020E           (          asp.asm):00356                 LBSR    STROUT
22C1 09               (          asp.asm):00357                 FCB     $09
22C2 50534853         (          asp.asm):00358                 FCC     'PSHS'
22C6 0900             (          asp.asm):00359                 FCB     $09,0
22C8 6DE4             (          asp.asm):00360                 TST     ,S                                ;WAS IT BYTE
22CA 2706             (          asp.asm):00361                 BEQ     PSYBY                             ;PUSH BYTE
22CC 170200           (          asp.asm):00362                 LBSR    STROUT
22CF 412C00           (          asp.asm):00363                 FCN     'A,'                              ;ADD A
22D2                  (          asp.asm):00364         PSYBY
22D2 1701FA           (          asp.asm):00365                 LBSR    STROUT
22D5 420D00           (          asp.asm):00366                 FCB     'B',$0D,0
                      (          asp.asm):00367         ;* LOOK UP CONDITIONAL
22D8 170393           (          asp.asm):00368                 LBSR    SKIP                              ;ADVANCE
22DB 812C             (          asp.asm):00369                 CMPA    #','
22DD 266E             (          asp.asm):00370                 BNE     DOCSYN                            ;BAD
22DF 17038C           (          asp.asm):00371                 LBSR    SKIP
22E2 E6A0             (          asp.asm):00372                 LDB     ,Y+                               ;GET SECOND PART
22E4 8E2A64           (          asp.asm):00373                 LDX     #CONTAB-2   POINT TO TABLE
22E7                  (          asp.asm):00374         DOCON1
22E7 3002             (          asp.asm):00375                 LEAX    2,X                               ;ADVANCE
22E9 6D84             (          asp.asm):00376                 TST     ,X                                ;END?
22EB 2760             (          asp.asm):00377                 BEQ     DOCSYN                            ;BAD SYNTAX
22ED 10A381           (          asp.asm):00378                 CMPD    ,X++                              ;SAME?
22F0 26F5             (          asp.asm):00379                 BNE     DOCON1                            ;NO, KEEP LOOKING
22F2 170379           (          asp.asm):00380                 LBSR    SKIP                              ;ADVANCE
22F5 812C             (          asp.asm):00381                 CMPA    #','                              ;IS IT COMMA?
22F7 2654             (          asp.asm):00382                 BNE     DOCSYN                            ;SYNTAX
22F9 3410             (          asp.asm):00383                 PSHS    X                                 ;SAVE
22FB 170496           (          asp.asm):00384                 LBSR    EXPR                              ;EVALUATE NEXT EXPRESSION
22FE 7D2AB6           (          asp.asm):00385                 TST     BYTE                              ;IS IT BYTE
2301 260E             (          asp.asm):00386                 BNE     CWRDOK                            ;WORD IS OK
2303 6D62             (          asp.asm):00387                 TST     2,S                               ;WAS LAST BYTE
2305 270A             (          asp.asm):00388                 BEQ     CWRDOK                            ;NO PROB
2307 1701C5           (          asp.asm):00389                 LBSR    STROUT                            ;OUTPUT
230A 09               (          asp.asm):00390                 FCB     $09
230B 434C5241         (          asp.asm):00391                 FCC     'CLRA'
230F 0D00             (          asp.asm):00392                 FCB     $0D,0                             ;CLEAR ACCA
2311                  (          asp.asm):00393         CWRDOK
2311 A662             (          asp.asm):00394                 LDA     2,S
2313 B72AB6           (          asp.asm):00395                 STA     BYTE                              ;SAVE BYTE INDICATOR
2316 170195           (          asp.asm):00396                 LBSR    WRINS
2319 434D5000         (          asp.asm):00397                 FCN     'CMP'
231D 1701AF           (          asp.asm):00398                 LBSR    STROUT
2320 09               (          asp.asm):00399                 FCB     $09
2321 2C532B00         (          asp.asm):00400                 FCN     ',S+'
2325 A662             (          asp.asm):00401                 LDA     2,S                               ;GET BYTE INDICATOR
2327 2705             (          asp.asm):00402                 BEQ     CBYTOK                            ;BYTE IS OK
2329 862B             (          asp.asm):00403                 LDA     #'+'
232B 1701C6           (          asp.asm):00404                 LBSR    WROUT                             ;OUTPUT
232E                  (          asp.asm):00405         CBYTOK
232E 860D             (          asp.asm):00406                 LDA     #$0D
2330 1701C1           (          asp.asm):00407                 LBSR    WROUT
2333 170199           (          asp.asm):00408                 LBSR    STROUT
2336 094C4200         (          asp.asm):00409                 FCB     $9,'L','B',0
233A 3510             (          asp.asm):00410                 PULS    X
233C A680             (          asp.asm):00411                 LDA     ,X+
233E 1701B3           (          asp.asm):00412                 LBSR    WROUT
2341 A684             (          asp.asm):00413                 LDA     ,X
2343 1701AE           (          asp.asm):00414                 LBSR    WROUT
2346 3502             (          asp.asm):00415                 PULS    A                                 ;RESTORE STACK
2348 8609             (          asp.asm):00416                 LDA     #9
234A 1601A7           (          asp.asm):00417                 LBRA    WROUT                             ;OUTPUT
234D                  (          asp.asm):00418         DOCSYN
234D 3502             (          asp.asm):00419                 PULS    A
234F 1701F9           (          asp.asm):00420                 LBSR    ERROR
2352 496E636F72726563 (          asp.asm):00421                 FCN     'Incorrect Syntax.'
     742053796E746178
     2E00
2364 39               (          asp.asm):00422                 RTS
                      (          asp.asm):00423         ;* WHILE STATEMENT
2365                  (          asp.asm):00424         WHILE
2365 1700D9           (          asp.asm):00425                 LBSR    GETLAB                            ;GET A LABLE
2368 1700E0           (          asp.asm):00426                 LBSR    PUSHD                             ;SAVE ON STACK
236B 3406             (          asp.asm):00427                 PSHS    A,B                               ;SAVE IT
236D 1700D1           (          asp.asm):00428                 LBSR    GETLAB                            ;GET LABLE
2370 1700D8           (          asp.asm):00429                 LBSR    PUSHD                             ;SAVE IT
2373 170191           (          asp.asm):00430                 LBSR    WRLAB                             ;OUTPUT LABLE
2376 8681             (          asp.asm):00431                 LDA     #$81                              ;INDICATE WHILE
2378 1700D9           (          asp.asm):00432                 LBSR    PUSHS                             ;SAVE IT
237B 17FF33           (          asp.asm):00433                 LBSR    DOCOND                            ;EVALUATE CONDITIONALS
237E 3506             (          asp.asm):00434                 PULS    A,B                               ;RESTORE LABLE
2380 16017E           (          asp.asm):00435                 LBRA    WRLCR                             ;OUTPUT
                      (          asp.asm):00436         ;* IF STATEMENT
2383                  (          asp.asm):00437         CIF
2383 1700BB           (          asp.asm):00438                 LBSR    GETLAB                            ;GET NEXT LABLE
2386 1700C2           (          asp.asm):00439                 LBSR    PUSHD                             ;SAVE
2389 3406             (          asp.asm):00440                 PSHS    A,B                               ;SAVE
238B 8680             (          asp.asm):00441                 LDA     #$80                              ;INDICATE 'IF'
238D 1700C4           (          asp.asm):00442                 LBSR    PUSHS                             ;SAVE
2390 17FF1E           (          asp.asm):00443                 LBSR    DOCOND                            ;DO CONDITIONALS
2393 3506             (          asp.asm):00444                 PULS    A,B                               ;RESTORE
2395 160169           (          asp.asm):00445                 LBRA    WRLCR                             ;OUTPUT
                      (          asp.asm):00446         ;* END STATEMENT
2398                  (          asp.asm):00447         CEND
2398 1700C2           (          asp.asm):00448                 LBSR    POPS                              ;GET DATA
239B 8080             (          asp.asm):00449                 SUBA    #$80                              ;IS IT 'IF'?
239D 2713             (          asp.asm):00450                 BEQ     WREQP                             ;NO
                      (          asp.asm):00451         ;* END CORRESPONDS TO A 'WHILE' OR 'UNTIL' STATEMENT
239F                  (          asp.asm):00452         CEND1
239F 4A               (          asp.asm):00453                 DECA                                      ;     IS IT WHILE/UNTIL ?
23A0 2622             (          asp.asm):00454                 BNE     CEND2                             ;NO, TRY NEXT
23A2 17012A           (          asp.asm):00455                 LBSR    STROUT                            ;OUTPUT
23A5 09               (          asp.asm):00456                 FCB     $09
23A6 4C425241         (          asp.asm):00457                 FCC     'LBRA'
23AA 0900             (          asp.asm):00458                 FCB     $09,0
23AC 1700B7           (          asp.asm):00459                 LBSR    POPD                              ;GET LABLE
23AF 17014F           (          asp.asm):00460                 LBSR    WRLCR                             ;OUTPUT
                      (          asp.asm):00461         ;* END CORRESPONDS TO AN 'IF' STATEMENT
23B2                  (          asp.asm):00462         WREQP
23B2 1700B1           (          asp.asm):00463                 LBSR    POPD                              ;GET LABLE
23B5                  (          asp.asm):00464         WREQU
23B5 17014F           (          asp.asm):00465                 LBSR    WRLAB                             ;OUTPUT
23B8 170114           (          asp.asm):00466                 LBSR    STROUT
23BB 09               (          asp.asm):00467                 FCB     $09
23BC 455155           (          asp.asm):00468                 FCC     'EQU'
23BF 092A0D00         (          asp.asm):00469                 FCB     $09,'*',$0D,0
23C3 39               (          asp.asm):00470                 RTS
                      (          asp.asm):00471         ;* END CORRESPONDS TO A 'SUBROUTINE' STATEMENT
23C4                  (          asp.asm):00472         CEND2
23C4 4A               (          asp.asm):00473                 DECA                                      ;     IS THIS IT?
23C5 260A             (          asp.asm):00474                 BNE     CENDB                             ;NO
23C7 170105           (          asp.asm):00475                 LBSR    STROUT                            ;OUTPUT STRING
23CA 09               (          asp.asm):00476                 FCB     9
23CB 525453           (          asp.asm):00477                 FCC     'RTS'
23CE 0D00             (          asp.asm):00478                 FCB     $0D,0                             ;END
23D0 39               (          asp.asm):00479                 RTS
23D1                  (          asp.asm):00480         CENDB
23D1 170177           (          asp.asm):00481                 LBSR    ERROR
23D4 496D70726F706572 (          asp.asm):00482                 FCN     'Improper nesting.'
     206E657374696E67
     2E00
23E6 39               (          asp.asm):00483                 RTS
                      (          asp.asm):00484         ;* ELSE STATEMENT
23E7                  (          asp.asm):00485         ELSE
23E7 BE2AB4           (          asp.asm):00486                 LDX     CTLSTK
23EA A684             (          asp.asm):00487                 LDA     ,X
23EC 8180             (          asp.asm):00488                 CMPA    #$80
23EE 26E1             (          asp.asm):00489                 BNE     CENDB
23F0 1700DC           (          asp.asm):00490                 LBSR    STROUT
23F3 09               (          asp.asm):00491                 FCB     $9
23F4 4C425241         (          asp.asm):00492                 FCC     'LBRA'
23F8 0900             (          asp.asm):00493                 FCB     $9,0
23FA EC01             (          asp.asm):00494                 LDD     1,X
23FC 3406             (          asp.asm):00495                 PSHS    A,B
23FE 170040           (          asp.asm):00496                 LBSR    GETLAB                            ;GET A NEW LABLE
2401 ED01             (          asp.asm):00497                 STD     1,X
2403 1700FB           (          asp.asm):00498                 LBSR    WRLCR                             ;OUTPUT EQUATE INSTRUCTION
2406 3506             (          asp.asm):00499                 PULS    A,B
2408 20AB             (          asp.asm):00500                 BRA     WREQU                             ;GENERATE EQUATE
                      (          asp.asm):00501         ;* GOTO STATEMENT
240A                  (          asp.asm):00502         GOTO
240A 1700C2           (          asp.asm):00503                 LBSR    STROUT
240D 09               (          asp.asm):00504                 FCB     9
240E 4C425241         (          asp.asm):00505                 FCC     'LBRA'
2412 0900             (          asp.asm):00506                 FCB     9,0
2414                  (          asp.asm):00507         GOTO1
2414 1701A8           (          asp.asm):00508                 LBSR    CPVAR
2417 16FDE2           (          asp.asm):00509                 LBRA    ENDCR                             ;OUTPUT
                      (          asp.asm):00510         ;* CALL COMMAND
241A                  (          asp.asm):00511         CALL
241A 1700B2           (          asp.asm):00512                 LBSR    STROUT                            ;OUTPUT STRING
241D 09               (          asp.asm):00513                 FCB     9
241E 4C425352         (          asp.asm):00514                 FCC     'LBSR'
2422 0900             (          asp.asm):00515                 FCB     9,0
2424 20EE             (          asp.asm):00516                 BRA     GOTO1
                      (          asp.asm):00517         ;* EXIT COMMAND
2426                  (          asp.asm):00518         EXIT
2426 7F2AB6           (          asp.asm):00519                 CLR     BYTE                              ;INDICATE BYTE OPERATIONS
2429 170368           (          asp.asm):00520                 LBSR    EXPR                              ;GET RETURN CODE
242C 1700A0           (          asp.asm):00521                 LBSR    STROUT                            ;OUTPUT
242F 09               (          asp.asm):00522                 FCB     $09
2430 544652           (          asp.asm):00523                 FCC     'TFR'
2433 09               (          asp.asm):00524                 FCB     $09
2434 422C41           (          asp.asm):00525                 FCC     'B,A'
2437 0D09             (          asp.asm):00526                 FCB     $0D,9
2439 535352           (          asp.asm):00527                 FCC     'SSR'
243C 09300D00         (          asp.asm):00528                 FCB     9,'0',$0D,0
2440 39               (          asp.asm):00529                 RTS
                      (          asp.asm):00530         ;* SUBROUTINES
                      (          asp.asm):00531         ;*
                      (          asp.asm):00532         ;* GET LABLE VALUE
2441                  (          asp.asm):00533         GETLAB
2441 FC2AB0           (          asp.asm):00534                 LDD     NXTLAB
2444 C30001           (          asp.asm):00535                 ADDD    #1
2447 FD2AB0           (          asp.asm):00536                 STD     NXTLAB
244A 39               (          asp.asm):00537                 RTS
                      (          asp.asm):00538         ;* PUSH A DOUBLE BYTE ON CTRL STACK
244B                  (          asp.asm):00539         PUSHD
244B 3410             (          asp.asm):00540                 PSHS    X
244D BE2AB4           (          asp.asm):00541                 LDX     CTLSTK
2450 ED83             (          asp.asm):00542                 STD     ,--X
2452 2019             (          asp.asm):00543                 BRA     SAVUSP
2454                  (          asp.asm):00544         PUSHS
2454 3410             (          asp.asm):00545                 PSHS    X
2456 BE2AB4           (          asp.asm):00546                 LDX     CTLSTK
2459 A782             (          asp.asm):00547                 STA     ,-X
245B 2010             (          asp.asm):00548                 BRA     SAVUSP
245D                  (          asp.asm):00549         POPS
245D 3410             (          asp.asm):00550                 PSHS    X
245F BE2AB4           (          asp.asm):00551                 LDX     CTLSTK
2462 A680             (          asp.asm):00552                 LDA     ,X+
2464 2007             (          asp.asm):00553                 BRA     SAVUSP
2466                  (          asp.asm):00554         POPD
2466 3410             (          asp.asm):00555                 PSHS    X
2468 BE2AB4           (          asp.asm):00556                 LDX     CTLSTK
246B EC81             (          asp.asm):00557                 LDD     ,X++
246D                  (          asp.asm):00558         SAVUSP
246D BF2AB4           (          asp.asm):00559                 STX     CTLSTK
2470 3590             (          asp.asm):00560                 PULS    X,PC
                      (          asp.asm):00561         ;*
                      (          asp.asm):00562         ;* WRITE OPERAND TO INSTRUCTION
2472                  (          asp.asm):00563         WROPR
2472 170088           (          asp.asm):00564                 LBSR    WRTAB                             ;OUTPUT TAB
2475                  (          asp.asm):00565         WRONT
2475 A6C0             (          asp.asm):00566                 LDA     ,U+                               ;GET OPERAND TYPE
2477 8101             (          asp.asm):00567                 CMPA    #1                                ;CONSTANT?
2479 2616             (          asp.asm):00568                 BNE     NCNST                             ;NOT A CONSTANT
247B 8623             (          asp.asm):00569                 LDA     #'#'                              ;INDICATE IMMEDIATE MODE
247D 170074           (          asp.asm):00570                 LBSR    WROUT                             ;OUTPUT
2480 10AEC1           (          asp.asm):00571                 LDY     ,U++                              ;GET POINTER BACK
2483 A6A4             (          asp.asm):00572                 LDA     ,Y                                ;GET FIRST CHAR
2485 8123             (          asp.asm):00573                 CMPA    #'#'                              ;ONE OF THESE?
2487 2602             (          asp.asm):00574                 BNE     NCNT1
2489 3121             (          asp.asm):00575                 LEAY    1,Y
248B                  (          asp.asm):00576         NCNT1
248B 170123           (          asp.asm):00577                 LBSR    CPALL                             ;COPY INTO OUTPUT SOURCE
248E                  (          asp.asm):00578         WROK
248E 16FD6B           (          asp.asm):00579                 LBRA    ENDCR                             ;WRITE IT OUT
2491                  (          asp.asm):00580         NCNST
2491 10AEC1           (          asp.asm):00581                 LDY     ,U++                              ;GET POINTER
2494 17011A           (          asp.asm):00582                 LBSR    CPALL                             ;COPY IT ALL
2497 7D2AB6           (          asp.asm):00583                 TST     BYTE                              ;BYTE OPERATION?
249A 26F2             (          asp.asm):00584                 BNE     WROK                              ;NO, IT'S OK
249C 10AE5E           (          asp.asm):00585                 LDY     -2,U                              ;GET POINTER BACK
249F 17017E           (          asp.asm):00586                 LBSR    LOOKUP                            ;LOOK FOR IT
24A2 8502             (          asp.asm):00587                 BITA    #2                                ;WORD?
24A4 27E8             (          asp.asm):00588                 BEQ     WROK                              ;IT'S A BYTE VARIABLE
24A6 170026           (          asp.asm):00589                 LBSR    STROUT                            ;OUTPUT
24A9 2B3100           (          asp.asm):00590                 FCN     '+1'                              ;OK
24AC 20E0             (          asp.asm):00591                 BRA     WROK                              ;CONTINUE
                      (          asp.asm):00592         ;* WRITE OUT INSTRUCTION
24AE                  (          asp.asm):00593         WRINS
24AE 3413             (          asp.asm):00594                 PSHS    A,CC,X                            ;SAVE REGS
24B0 8D4B             (          asp.asm):00595                 BSR     WRTAB                             ;WRITE TAB
24B2 AE64             (          asp.asm):00596                 LDX     4,S                               ;GET PC
24B4 8D0F             (          asp.asm):00597                 BSR     WRSTX                             ;WRITE STRING(X)
24B6 AF64             (          asp.asm):00598                 STX     4,S                               ;RESAVE PC
24B8 8642             (          asp.asm):00599                 LDA     #'B'                              ;GET LOW BYTE
24BA 7D2AB6           (          asp.asm):00600                 TST     BYTE                              ;IS IT A BYTE OPERATION
24BD 2702             (          asp.asm):00601                 BEQ     WRLST                             ;NO, GO FOR IT
24BF 8644             (          asp.asm):00602                 LDA     #'D'                              ;CHANGE TO D
24C1                  (          asp.asm):00603         WRLST
24C1 8D31             (          asp.asm):00604                 BSR     WROUT                             ;OUTPUT
24C3 3593             (          asp.asm):00605                 PULS    A,CC,X,PC
                      (          asp.asm):00606         ;* WRITE STRING(X). TO OUTPUT FILE
24C5                  (          asp.asm):00607         WRSTX
24C5 A680             (          asp.asm):00608                 LDA     ,X+                               ;GET CHAR
24C7 1027FDBA         (          asp.asm):00609                 LBEQ    WRSRTS                            ;DONE
24CB 8D27             (          asp.asm):00610                 BSR     WROUT                             ;OUTPUT
24CD 20F6             (          asp.asm):00611                 BRA     WRSTX                             ;CONTINUE
                      (          asp.asm):00612         ;* WRITE        STRING TO OUTPUT FILE
24CF                  (          asp.asm):00613         STROUT
24CF 3412             (          asp.asm):00614                 PSHS    A,X                               ;SAVE X
24D1 AE63             (          asp.asm):00615                 LDX     3,S                               ;GET PC
24D3 8DF0             (          asp.asm):00616                 BSR     WRSTX                             ;OUTPUT STRING(X)
24D5                  (          asp.asm):00617         STR2
24D5 AF63             (          asp.asm):00618                 STX     3,S                               ;RESAVE
24D7 3592             (          asp.asm):00619                 PULS    A,X,PC                            ;GO HOME
                      (          asp.asm):00620         ;* WRITE        A HEX WORD
24D9                  (          asp.asm):00621         WRHEXW
24D9 4D               (          asp.asm):00622                 TSTA                                      ;     ZERO HIGH BYTE?
24DA 2702             (          asp.asm):00623                 BEQ     WRHEXZ                            ;NO LEADING ZERO
24DC 8D02             (          asp.asm):00624                 BSR     WRHEXB                            ;WRITE A BYTE
24DE                  (          asp.asm):00625         WRHEXZ
24DE 1F98             (          asp.asm):00626                 TFR     B,A                               ;COPY
                      (          asp.asm):00627         ;* WRITE        A HEX BYTE
24E0                  (          asp.asm):00628         WRHEXB
24E0 3402             (          asp.asm):00629                 PSHS    A                                 ;SAVE IT
24E2 44               (          asp.asm):00630                 LSRA                                      ;     SHIFT
24E3 44               (          asp.asm):00631                 LSRA                                      ;     HIGH
24E4 44               (          asp.asm):00632                 LSRA                                      ;     NIBBLE
24E5 44               (          asp.asm):00633                 LSRA                                      ;     INTO LOW
24E6 8D02             (          asp.asm):00634                 BSR     WRNIB                             ;OUTPUT NIBBLE
24E8 3502             (          asp.asm):00635                 PULS    A                                 ;RESTORE A
24EA                  (          asp.asm):00636         WRNIB
24EA 840F             (          asp.asm):00637                 ANDA    #$0F                              ;GET RID OF HIGH CRAP
24EC 8B30             (          asp.asm):00638                 ADDA    #$30                              ;CONVERT TO ASCII
24EE 8139             (          asp.asm):00639                 CMPA    #$39                              ;< '30-39
24F0 2302             (          asp.asm):00640                 BLS     WROUT
24F2 8B07             (          asp.asm):00641                 ADDA    #$07                              ;CONVERT TO 'A'-'F'
                      (          asp.asm):00642         ;* WRITE        CHARACTER TO OUTPUT FILE
24F4                  (          asp.asm):00643         WROUT
24F4 3440             (          asp.asm):00644                 PSHS    U                                 ;SAVE
24F6 CE2D4D           (          asp.asm):00645                 LDU     #OUTFIL                           ;SET UP PTR
24F9 3F               (          asp.asm):00646                 SWI
24FA 3D               (          asp.asm):00647                 FCB     61                                ;SEND TO OUTPUT FILE
24FB 35C0             (          asp.asm):00648                 PULS    U,PC
24FD                  (          asp.asm):00649         WRTAB
24FD 8609             (          asp.asm):00650                 LDA     #9
24FF 20F3             (          asp.asm):00651                 BRA     WROUT                             ;OUTPUT TAB
2501                  (          asp.asm):00652         WRLCR
2501 8D04             (          asp.asm):00653                 BSR     WRLAB                             ;OUTPUT LABLE
2503 860D             (          asp.asm):00654                 LDA     #$0D
2505 20ED             (          asp.asm):00655                 BRA     WROUT                             ;OUTPUT
                      (          asp.asm):00656         ;* WRITE LABLE VALUE
2507                  (          asp.asm):00657         WRLAB
2507 3406             (          asp.asm):00658                 PSHS    A,B
2509 865F             (          asp.asm):00659                 LDA     #'_'                              ;LEAD IN
250B 8DE7             (          asp.asm):00660                 BSR     WROUT                             ;OUTPUT
250D A6E4             (          asp.asm):00661                 LDA     ,S
250F 8DC8             (          asp.asm):00662                 BSR     WRHEXW                            ;LABLE VALUE
2511 3586             (          asp.asm):00663                 PULS    A,B,PC
                      (          asp.asm):00664         ;*
                      (          asp.asm):00665         ;* COPY THIS ELEMENT TO SOURCE
                      (          asp.asm):00666         ;*
2513                  (          asp.asm):00667         CPELEM
2513 3F               (          asp.asm):00668                 SWI
2514 04               (          asp.asm):00669                 FCB     4                                 ;SKIP
2515                  (          asp.asm):00670         CPEL1
2515 A6A0             (          asp.asm):00671                 LDA     ,Y+                               ;GET CHAR FROM SOURCE
2517 810D             (          asp.asm):00672                 CMPA    #$0D                              ;CR?
2519 271A             (          asp.asm):00673                 BEQ     CPE1                              ;IF SO, QUIT
251B 812C             (          asp.asm):00674                 CMPA    #','                              ;COMMA?
251D 2716             (          asp.asm):00675                 BEQ     CPE1                              ;IF SO, QUIT
251F 8DD3             (          asp.asm):00676                 BSR     WROUT                             ;OUTPUT TO TO OUTPUT FILE
2521 8127             (          asp.asm):00677                 CMPA    #$27                              ;QUOTE?
2523 26F0             (          asp.asm):00678                 BNE     CPEL1                             ;NO, CONTINUE
2525                  (          asp.asm):00679         CPE2
2525 A6A0             (          asp.asm):00680                 LDA     ,Y+                               ;GET NEXT
2527 810D             (          asp.asm):00681                 CMPA    #$0D                              ;CR?
2529 2708             (          asp.asm):00682                 BEQ     CPE3                              ;INVALID STRING
252B 8DC7             (          asp.asm):00683                 BSR     WROUT                             ;WRITE IT
252D 8127             (          asp.asm):00684                 CMPA    #$27                              ;CLOSING QUOTE?
252F 26F4             (          asp.asm):00685                 BNE     CPE2                              ;NO, KEEP COPYING
2531 20E2             (          asp.asm):00686                 BRA     CPEL1                             ;CONTINUE,
2533                  (          asp.asm):00687         CPE3
2533 8D03             (          asp.asm):00688                 BSR     BADSTR                            ;WRITE BAD STRING MESSAGE
2535                  (          asp.asm):00689         CPE1
2535 313F             (          asp.asm):00690                 LEAY    -1,Y                              ;BACKUP TO DELIMITER
2537 39               (          asp.asm):00691                 RTS
                      (          asp.asm):00692         ;*
                      (          asp.asm):00693         ;* STRING ON THIS LINE IS INVALID
                      (          asp.asm):00694         ;*
2538                  (          asp.asm):00695         BADSTR
2538 8D11             (          asp.asm):00696                 BSR     ERROR                             ;WRITE  ERROR MESSAGE
253A 496D70726F706572 (          asp.asm):00697                 FCN     'Improper string'
     20737472696E6700
254A 39               (          asp.asm):00698                 RTS
                      (          asp.asm):00699         ;*
                      (          asp.asm):00700         ;* WRITE        ERROR MESSAGE
                      (          asp.asm):00701         ;*
254B                  (          asp.asm):00702         ERROR
254B FC2AB2           (          asp.asm):00703                 LDD     ERRCNT
254E C30001           (          asp.asm):00704                 ADDD    #1
2551 FD2AB2           (          asp.asm):00705                 STD     ERRCNT
2554 3F               (          asp.asm):00706                 SWI
2555 18               (          asp.asm):00707                 FCB     24                                ;WRITE PRE MESSAGE
2556 4C696E653A2000   (          asp.asm):00708                 FCN     'Line: '
255D FC2AAC           (          asp.asm):00709                 LDD     LINE
2560 3F               (          asp.asm):00710                 SWI
2561 1A               (          asp.asm):00711                 FCB     26                                ;DISPLAY LINE NUMBER
2562 3F               (          asp.asm):00712                 SWI
2563 18               (          asp.asm):00713                 FCB     24
2564 203A2000         (          asp.asm):00714                 FCN     ' : '                             ;WRITE POST MESSAGE
2568 8E2AC3           (          asp.asm):00715                 LDX     #INPLIN                           ;POINT TO TEXT
256B                  (          asp.asm):00716         ERR3
256B A680             (          asp.asm):00717                 LDA     ,X+                               ;GET CHAR
256D 810D             (          asp.asm):00718                 CMPA    #$0D                              ;END OF LINE?
256F 2704             (          asp.asm):00719                 BEQ     ERR4                              ;IF SO, QUIT/
2571 3F               (          asp.asm):00720                 SWI
2572 21               (          asp.asm):00721                 FCB     33                                ;DISPLAY
2573 20F6             (          asp.asm):00722                 BRA     ERR3                              ;CONTINUE
2575                  (          asp.asm):00723         ERR4
2575 3F               (          asp.asm):00724                 SWI
2576 18               (          asp.asm):00725                 FCB     24
2577 203A2000         (          asp.asm):00726                 FCN     ' : '
257B 3410             (          asp.asm):00727                 PSHS    X                                 ;SAVE X
257D AE62             (          asp.asm):00728                 LDX     2,S                               ;GET OLD PC
257F 3F               (          asp.asm):00729                 SWI
2580 17               (          asp.asm):00730                 FCB     23                                ;DISPLAY
2581 AF62             (          asp.asm):00731                 STX     2,S                               ;RESAVE
2583 3F               (          asp.asm):00732                 SWI
2584 16               (          asp.asm):00733                 FCB     22                                ;NEW LINE
2585 10FE2AB7         (          asp.asm):00734                 LDS     SAVS
2589 FE2AB9           (          asp.asm):00735                 LDU     SAVU
258C 16FB59           (          asp.asm):00736                 LBRA    RDINP
                      (          asp.asm):00737         ;*
                      (          asp.asm):00738         ;* GET A        NUMBER FROM THE INPUT STREAM
                      (          asp.asm):00739         ;*
258F                  (          asp.asm):00740         GETNUM
258F 3410             (          asp.asm):00741                 PSHS    X                                 ;SAVE X
2591 3F               (          asp.asm):00742                 SWI
2592 08               (          asp.asm):00743                 FCB     8                                 ;GET NUMBER
2593 2718             (          asp.asm):00744                 BEQ     NUMOK                             ;NO BAD RETURN CODE
2595 8DB4             (          asp.asm):00745                 BSR     ERROR                             ;DISPLAY MESSAGE,
2597 496E76616C696420 (          asp.asm):00746                 FCN     'Invalid numeric value'
     6E756D6572696320
     76616C756500
25AD                  (          asp.asm):00747         NUMOK
25AD 1F10             (          asp.asm):00748                 TFR     X,D                               ;COPY IT OVER
25AF 3590             (          asp.asm):00749                 PULS    X,PC
                      (          asp.asm):00750         ;*
                      (          asp.asm):00751         ;* COPY VARIABLE/CONSTANT
                      (          asp.asm):00752         ;*
25B1                  (          asp.asm):00753         CPALL
25B1 1700BA           (          asp.asm):00754                 LBSR    SKIP                              ;LOOK FOR DATA
25B4 8124             (          asp.asm):00755                 CMPA    #'$'                              ;OK?
25B6 2716             (          asp.asm):00756                 BEQ     CPV1                              ;IF SO, OK
25B8 8D20             (          asp.asm):00757                 BSR     VALSYM                            ;VALID
25BA 2712             (          asp.asm):00758                 BEQ     CPV1                              ;OK TO COPY
25BC 16FC89           (          asp.asm):00759                 LBRA    SYNTAX                            ;INVALID
                      (          asp.asm):00760         ;*
                      (          asp.asm):00761         ;* COPY A VARIABLE NAME TO THE OUTPUT FILE
                      (          asp.asm):00762         ;*
25BF                  (          asp.asm):00763         CPVAR
25BF 1700AC           (          asp.asm):00764                 LBSR    SKIP                              ;GET NEXT
25C2 8141             (          asp.asm):00765                 CMPA    #'A'                              ;VALID VARIABLE?
25C4 1025FC80         (          asp.asm):00766                 LBLO    SYNTAX                            ;NO, IT'S BAD
25C8 815A             (          asp.asm):00767                 CMPA    #'Z'                              ;VALID?
25CA 1022FC7A         (          asp.asm):00768                 LBHI    SYNTAX                            ;NO, IT'S BAD
25CE                  (          asp.asm):00769         CPV1
25CE 17FF23           (          asp.asm):00770                 LBSR    WROUT                             ;WRITE IT
25D1 A6A0             (          asp.asm):00771                 LDA     ,Y+                               ;GET NEXT
25D3 8D05             (          asp.asm):00772                 BSR     VALSYM                            ;VALID SYMBOL?
25D5 27F7             (          asp.asm):00773                 BEQ     CPV1                              ;YES, CONTINUE
25D7                  (          asp.asm):00774         CPV2
25D7 313F             (          asp.asm):00775                 LEAY    -1,Y                              ;BACKUP
25D9 39               (          asp.asm):00776                 RTS
                      (          asp.asm):00777         ;*
                      (          asp.asm):00778         ;* DETERMINE IF CHAR IN A IS A VALID SYMBOL CHARACTER. (0-9, A-Z)
                      (          asp.asm):00779         ;*
25DA                  (          asp.asm):00780         VALSYM
25DA 8130             (          asp.asm):00781                 CMPA    #'0'                              ;< '0'?
25DC 250F             (          asp.asm):00782                 BLO     BADS                              ;IF SO, IT'S BAD
25DE 815A             (          asp.asm):00783                 CMPA    #'Z'                              ;> 'Z'?
25E0 220B             (          asp.asm):00784                 BHI     BADS                              ;IF SO, IT'S BAD
25E2 8141             (          asp.asm):00785                 CMPA    #'A'                              ;> 'A'?
25E4 2404             (          asp.asm):00786                 BHS     SYMOK                             ;IT'S OK
25E6 8139             (          asp.asm):00787                 CMPA    #'9'                              ;> '9'
25E8 2203             (          asp.asm):00788                 BHI     BADS                              ;IT'S BAD
25EA                  (          asp.asm):00789         SYMOK
25EA 1A04             (          asp.asm):00790                 ORCC    #$04                              ;SET Z
25EC 39               (          asp.asm):00791                 RTS
25ED                  (          asp.asm):00792         BADS
25ED 1CFB             (          asp.asm):00793                 ANDCC   #$FB                              ;CLEAR Z
25EF 39               (          asp.asm):00794                 RTS
                      (          asp.asm):00795         ;*
                      (          asp.asm):00796         ;* CREATE A SYMBOL
                      (          asp.asm):00797         ;*
25F0                  (          asp.asm):00798         CRSYM
25F0 BE2AC1           (          asp.asm):00799                 LDX     SYMEND                            ;POINT TO END OF SYMBOL TABLE
25F3 170078           (          asp.asm):00800                 LBSR    SKIP                              ;GET NEXT
25F6 8141             (          asp.asm):00801                 CMPA    #'A'                              ;<'A'
25F8 1025FC4C         (          asp.asm):00802                 LBLO    SYNTAX                            ;IT'S INVALID
25FC 815A             (          asp.asm):00803                 CMPA    #'Z'                              ;>'Z'
25FE 1022FC46         (          asp.asm):00804                 LBHI    SYNTAX                            ;INVALID
2602                  (          asp.asm):00805         CRS1
2602 A780             (          asp.asm):00806                 STA     ,X+                               ;SAVE IN RAM
2604 A6A0             (          asp.asm):00807                 LDA     ,Y+                               ;GET NEXT CHAR
2606 8DD2             (          asp.asm):00808                 BSR     VALSYM                            ;VALID?
2608 27F8             (          asp.asm):00809                 BEQ     CRS1                              ;IT'S OK
260A A61F             (          asp.asm):00810                 LDA     -1,X                              ;GET LAST CHAR
260C 8A80             (          asp.asm):00811                 ORA     #$80                              ;SET HIGH BIT
260E A71F             (          asp.asm):00812                 STA     -1,X                              ;RESAVE
2610 313F             (          asp.asm):00813                 LEAY    -1,Y                              ;BACKUP TO THIS CHAR
2612 6F80             (          asp.asm):00814                 CLR     ,X+                               ;INDICATE NO BITS SET
2614 6F80             (          asp.asm):00815                 CLR     ,X+                               ;INDICATE NO BITS SET
2616 6F80             (          asp.asm):00816                 CLR     ,X+                               ;INDICATE NO BITS SET
2618 BF2AC1           (          asp.asm):00817                 STX     SYMEND                            ;RESAVE
261B 6F84             (          asp.asm):00818                 CLR     ,X                                ;INDICATE END OF TABLE
261D 301D             (          asp.asm):00819                 LEAX    -3,X                              ;BACKUP
261F 39               (          asp.asm):00820                 RTS
                      (          asp.asm):00821         ;*
                      (          asp.asm):00822         ;* LOOKUP SYMBOL        POINTED TO BY Y
                      (          asp.asm):00823         ;*
2620                  (          asp.asm):00824         LOOKUP
2620 3F               (          asp.asm):00825                 SWI
2621 04               (          asp.asm):00826                 FCB     4                                 ;ADVANCE TO SYMBOL
2622 8E2F57           (          asp.asm):00827                 LDX     #SYMTAB                           ;LOOK AT SYMBOL TABLE
2625                  (          asp.asm):00828         LOK1
2625 A684             (          asp.asm):00829                 LDA     ,X                                ;GET CHAR FROM TABLE
2627 271C             (          asp.asm):00830                 BEQ     NOTFND                            ;SYMBOL WAS NOT FOUND
2629 3420             (          asp.asm):00831                 PSHS    Y                                 ;SAVE IT
262B                  (          asp.asm):00832         LOK2
262B A6A0             (          asp.asm):00833                 LDA     ,Y+                               ;GET CHAR FROM Y
262D 8DAB             (          asp.asm):00834                 BSR     VALSYM                            ;IS IT VALID?
262F 260A             (          asp.asm):00835                 BNE     LOK3                              ;END OF SYMBOL, DID NOT FIND
2631 A180             (          asp.asm):00836                 CMPA    ,X+                               ;DOES IT MATCH TABLE ENTRY?
2633 27F6             (          asp.asm):00837                 BEQ     LOK2                              ;YES, WE HAVE IT
2635 8A80             (          asp.asm):00838                 ORA     #$80                              ;SET HIGH BIT
2637 A182             (          asp.asm):00839                 CMPA    ,-X                               ;IS THIS IT?
2639 270D             (          asp.asm):00840                 BEQ     LOK4                              ;THIS MIGHT BE IT
                      (          asp.asm):00841         ;* SYMBOL IN TABLE DID NOT MATCH
263B                  (          asp.asm):00842         LOK3
263B A680             (          asp.asm):00843                 LDA     ,X+                               ;GET CHAR FROM TABLE
263D 2AFC             (          asp.asm):00844                 BPL     LOK3                              ;FIND DELIMITER
263F 3003             (          asp.asm):00845                 LEAX    3,X                               ;SKIP TO NEXT
2641 3520             (          asp.asm):00846                 PULS    Y                                 ;RESTORE Y POINTER
2643 20E0             (          asp.asm):00847                 BRA     LOK1                              ;AND KEEP LOOKING
2645                  (          asp.asm):00848         NOTFND
2645 1CFB             (          asp.asm):00849                 ANDCC   #$FB                              ;CLEAR ZERO
2647 39               (          asp.asm):00850                 RTS
                      (          asp.asm):00851         ;* THIS MIGHT BE        IT
2648                  (          asp.asm):00852         LOK4
2648 A6A4             (          asp.asm):00853                 LDA     ,Y                                ;GET CHAR FROM SYMBOL
264A 8D8E             (          asp.asm):00854                 BSR     VALSYM                            ;IS IT A VALID SYMBOL?
264C 27ED             (          asp.asm):00855                 BEQ     LOK3                              ;WASN'T IT, TRY AGAIN
264E 3001             (          asp.asm):00856                 LEAX    1,X                               ;ADVANCE TO TABLE ENTRY
2650 3262             (          asp.asm):00857                 LEAS    2,S                               ;RESTORE STACK
2652 A684             (          asp.asm):00858                 LDA     ,X                                ;GET TYPE
2654 1A04             (          asp.asm):00859                 ORCC    #$04                              ;SET Z FLAG
2656 39               (          asp.asm):00860                 RTS
                      (          asp.asm):00861         ;*
                      (          asp.asm):00862         ;* LOOK FOR SYMBOL, AND DISPLAY MESSAGE IF NOT FOUND
                      (          asp.asm):00863         ;*
2657                  (          asp.asm):00864         LOOKNF
2657 8DC7             (          asp.asm):00865                 BSR     LOOKUP                            ;LOOK FOR IT
2659 2712             (          asp.asm):00866                 BEQ     SYMF                              ;IF WAS FOUND
265B 17FEED           (          asp.asm):00867                 LBSR    ERROR                             ;DISPLAY ERROR
265E 556E6B6E6F776E20 (          asp.asm):00868                 FCN     'Unknown symbol'
     73796D626F6C00
266D                  (          asp.asm):00869         SYMF
266D 39               (          asp.asm):00870                 RTS
                      (          asp.asm):00871         ;*
                      (          asp.asm):00872         ;* SKIP TO NEXT NON BLANK
                      (          asp.asm):00873         ;*
266E                  (          asp.asm):00874         SKIP
266E A6A0             (          asp.asm):00875                 LDA     ,Y+                               ;GET CHAR
2670 8120             (          asp.asm):00876                 CMPA    #' '                              ;BLANK?
2672 27FA             (          asp.asm):00877                 BEQ     SKIP                              ;CONTINUE
2674 810D             (          asp.asm):00878                 CMPA    #$0D                              ;CR?
2676 39               (          asp.asm):00879                 RTS
                      (          asp.asm):00880         ;*
                      (          asp.asm):00881         ;* DETERMINE TYPE OF TOKEN POINTED TO BY        Y
                      (          asp.asm):00882         ;*
2677                  (          asp.asm):00883         TOKEN
2677 A6A4             (          asp.asm):00884                 LDA     ,Y                                ;GET CHAR
2679 8124             (          asp.asm):00885                 CMPA    #'$'                              ;NUMBER?
267B 270C             (          asp.asm):00886                 BEQ     TCON                              ;IF SO, IT'S A CONSTANT
267D 8123             (          asp.asm):00887                 CMPA    #'#'                              ;ADDRESS?
267F 2708             (          asp.asm):00888                 BEQ     TCON                              ;IF SO, IT'S ALSO A CONSTANT
2681 8130             (          asp.asm):00889                 CMPA    #'0'                              ;> 0?
2683 2515             (          asp.asm):00890                 BLO     TADDR                             ;NOT A CONSTANT
2685 8139             (          asp.asm):00891                 CMPA    #'9'                              ;< '9'?
2687 2211             (          asp.asm):00892                 BHI     TADDR                             ;TRY ADDRESS
                      (          asp.asm):00893         ;* TEST FOR CONSTANT VALUE
2689                  (          asp.asm):00894         TCON
2689 3121             (          asp.asm):00895                 LEAY    1,Y                               ;ADVANCE
268B                  (          asp.asm):00896         TCON1
268B 8601             (          asp.asm):00897                 LDA     #$01                              ;CONSTANT VALUE
268D                  (          asp.asm):00898         TNXT
268D 3402             (          asp.asm):00899                 PSHS    A                                 ;SAVE VALUE
268F                  (          asp.asm):00900         TNXT1
268F A6A0             (          asp.asm):00901                 LDA     ,Y+                               ;GET CHAR
2691 17FF46           (          asp.asm):00902                 LBSR    VALSYM                            ;VALID SYMBOL?
2694 27F9             (          asp.asm):00903                 BEQ     TNXT1                             ;CONTINUE
2696 313F             (          asp.asm):00904                 LEAY    -1,Y                              ;BACKUP TO IT
2698 3582             (          asp.asm):00905                 PULS    A,PC                              ;GO HOME
                      (          asp.asm):00906         ;* TEST FOR VARIABLE VALUE
269A                  (          asp.asm):00907         TADDR
269A 17FF3D           (          asp.asm):00908                 LBSR    VALSYM                            ;VALID SYMBOL 'A-Z'?
269D 2614             (          asp.asm):00909                 BNE     TOPR                              ;NO, IT'S AN OPERATOR
269F 17FFB5           (          asp.asm):00910                 LBSR    LOOKNF                            ;WHAT IS IT'S VALUE
26A2 3401             (          asp.asm):00911                 PSHS    CC                                ;IT'S A CONSTANT
26A4 8502             (          asp.asm):00912                 BITA    #2                                ;IS IT A WORD?
26A6 2603             (          asp.asm):00913                 BNE     TOKVAR                            ;IT'S A BYTE VARIABLE
26A8 7F2AB6           (          asp.asm):00914                 CLR     BYTE                              ;INDICATE WORD
26AB                  (          asp.asm):00915         TOKVAR
26AB 8602             (          asp.asm):00916                 LDA     #2                                ;INDICATE VARIABLE
26AD 3501             (          asp.asm):00917                 PULS    CC                                ;RESTORE COND CODES
26AF 2BDA             (          asp.asm):00918                 BMI     TCON1                             ;CONSTANT
26B1 20DA             (          asp.asm):00919                 BRA     TNXT                              ;GO AGAIN
                      (          asp.asm):00920         ;* IT'S AN OPERATOR VALUE
26B3                  (          asp.asm):00921         TOPR
26B3 8E29BE           (          asp.asm):00922                 LDX     #OPRTAB                           ;POINT TO OPERATOR TABLE
26B6                  (          asp.asm):00923         TOP1
26B6 A684             (          asp.asm):00924                 LDA     ,X                                ;GET BYTE FROM TABLE
26B8 271D             (          asp.asm):00925                 BEQ     NTOP                              ;NOT AN OPERATOR
26BA 3420             (          asp.asm):00926                 PSHS    Y                                 ;SAVE Y
26BC                  (          asp.asm):00927         TOP2
26BC A6A0             (          asp.asm):00928                 LDA     ,Y+                               ;GET CHAR FROM TABLE
26BE A180             (          asp.asm):00929                 CMPA    ,X+                               ;DOES IT MATCH?
26C0 27FA             (          asp.asm):00930                 BEQ     TOP2                              ;CONTINUE
26C2 8A80             (          asp.asm):00931                 ORA     #$80                              ;SET HIGH BIT
26C4 A182             (          asp.asm):00932                 CMPA    ,-X                               ;MATCH?
26C6 270A             (          asp.asm):00933                 BEQ     TOP3                              ;WE FOUND IT
26C8                  (          asp.asm):00934         TOP4
26C8 A680             (          asp.asm):00935                 LDA     ,X+                               ;GET VAL
26CA 2AFC             (          asp.asm):00936                 BPL     TOP4                              ;CONTINUE
26CC 3001             (          asp.asm):00937                 LEAX    1,X                               ;ADVANCE TO NEXT
26CE 3520             (          asp.asm):00938                 PULS    Y                                 ;RESTORE
26D0 20E4             (          asp.asm):00939                 BRA     TOP1                              ;CONTINUE
26D2                  (          asp.asm):00940         TOP3
26D2 3262             (          asp.asm):00941                 LEAS    2,S                               ;SKIP SAVED Y
26D4 A601             (          asp.asm):00942                 LDA     1,X                               ;GET TOKEN VALUE
26D6 39               (          asp.asm):00943                 RTS
26D7                  (          asp.asm):00944         NTOP
26D7 17FB6E           (          asp.asm):00945                 LBSR    SYNTAX                            ;INDICATE ERROR
26DA 3262             (          asp.asm):00946                 LEAS    2,S
26DC 4F               (          asp.asm):00947                 CLRA
26DD 39               (          asp.asm):00948                 RTS
                      (          asp.asm):00949         ;*
                      (          asp.asm):00950         ;* READ CHARACTER FROM INPUT FILE
                      (          asp.asm):00951         ;*
26DE                  (          asp.asm):00952         RDINPF
26DE 3440             (          asp.asm):00953                 PSHS    U                                 ;SAVE REGS
26E0 CE2B43           (          asp.asm):00954                 LDU     #INPFIL                           ;PT TO INPUT FILE
26E3 3F               (          asp.asm):00955                 SWI
26E4 3B               (          asp.asm):00956                 FCB     59                                ;READ CHAR
26E5 35C0             (          asp.asm):00957                 PULS    U,PC
                      (          asp.asm):00958         ;*
                      (          asp.asm):00959         ;* ASSIGNMENT STATEMENT
                      (          asp.asm):00960         ;*
26E7                  (          asp.asm):00961         ASSIGN
26E7 3420             (          asp.asm):00962                 PSHS    Y                                 ;SAVE IT
26E9 86FF             (          asp.asm):00963                 LDA     #$FF
26EB B72AB6           (          asp.asm):00964                 STA     BYTE                              ;SET WORD FLAG
26EE 17FF2F           (          asp.asm):00965                 LBSR    LOOKUP                            ;DOES IT EXIST?
26F1 2609             (          asp.asm):00966                 BNE     ASI1                              ;NO, GO IT THE HARD WAY
26F3 8502             (          asp.asm):00967                 BITA    #2                                ;IS IT A BYTE?
26F5 260E             (          asp.asm):00968                 BNE     ASI2                              ;NO, IT'S A WORD
26F7 7F2AB6           (          asp.asm):00969                 CLR     BYTE                              ;INDICATE BYTE OPERATION
26FA 2009             (          asp.asm):00970                 BRA     ASI2
26FC                  (          asp.asm):00971         ASI1
26FC A6A0             (          asp.asm):00972                 LDA     ,Y+                               ;GET CHAR
26FE 17FED9           (          asp.asm):00973                 LBSR    VALSYM                            ;VALID AS A SYMBOL?
2701 27F9             (          asp.asm):00974                 BEQ     ASI1                              ;CONTINUE
2703 313F             (          asp.asm):00975                 LEAY    -1,Y                              ;BACKUP TO IT
2705                  (          asp.asm):00976         ASI2
2705 17FF66           (          asp.asm):00977                 LBSR    SKIP                              ;ADVANCE PAST ANY BLANKS
2708 813D             (          asp.asm):00978                 CMPA    #'='                              ;DOES IT MATCH?
270A 1026FB3A         (          asp.asm):00979                 LBNE    SYNTAX                            ;NO, IT'S A SYNTAX ERROR
270E 170083           (          asp.asm):00980                 LBSR    EXPR                              ;GENERATE CODE
2711 10AEE4           (          asp.asm):00981                 LDY     ,S                                ;POINT AT LABLE
2714 17FF09           (          asp.asm):00982                 LBSR    LOOKUP                            ;DOES IT EXIST?
2717 2721             (          asp.asm):00983                 BEQ     SYEXI                             ;SYMBOL EXISTS
2719 17FED4           (          asp.asm):00984                 LBSR    CRSYM                             ;CREATE IT
271C 8601             (          asp.asm):00985                 LDA     #1                                ;SET TYPE TO BYTE
271E 7D2AB6           (          asp.asm):00986                 TST     BYTE                              ;BYTE OPERATION?
2721 2702             (          asp.asm):00987                 BEQ     TYOK                              ;TYPE IS OK
2723 8602             (          asp.asm):00988                 LDA     #2                                ;CHANGE TO VARIABLE
2725                  (          asp.asm):00989         TYOK
2725 A784             (          asp.asm):00990                 STA     ,X                                ;SET TYPE
2727                  (          asp.asm):00991         SAVSYM
2727 17FD84           (          asp.asm):00992                 LBSR    WRINS                             ;OUTPUT INSTRUCTION
272A 535400           (          asp.asm):00993                 FCN     'ST'                              ;OUTPUT
272D 8609             (          asp.asm):00994                 LDA     #9                                ;GET TAB
272F 17FDC2           (          asp.asm):00995                 LBSR    WROUT                             ;OUTPUT
2732 3520             (          asp.asm):00996                 PULS    Y                                 ;RESTORE VARIABLE POINTER
2734 17FE88           (          asp.asm):00997                 LBSR    CPVAR                             ;COPY IN VARIABLE NAME
2737 16FAC2           (          asp.asm):00998                 LBRA    ENDCR                             ;END
273A                  (          asp.asm):00999         SYEXI
273A A684             (          asp.asm):01000                 LDA     ,X                                ;GET TYPE
273C 8502             (          asp.asm):01001                 BITA    #2                                ;WORD?
273E 2714             (          asp.asm):01002                 BEQ     ASSBYT                            ;IT'S A BYTE
2740 7D2AB6           (          asp.asm):01003                 TST     BYTE                              ;BYTE RESULT?
2743 26E2             (          asp.asm):01004                 BNE     SAVSYM                            ;TYPE IS OK
2745 17FD87           (          asp.asm):01005                 LBSR    STROUT                            ;OUTPUT STRING
2748 09               (          asp.asm):01006                 FCB     9
2749 434C5241         (          asp.asm):01007                 FCC     'CLRA'
274D 0D00             (          asp.asm):01008                 FCB     $0D,0
274F 7A2AB6           (          asp.asm):01009                 DEC     BYTE                              ;CONVERT TO WORD STORE
2752 20D3             (          asp.asm):01010                 BRA     SAVSYM                            ;OUTPUT
2754                  (          asp.asm):01011         ASSBYT
2754 7F2AB6           (          asp.asm):01012                 CLR     BYTE                              ;INSURE BYTE STORE
2757 20CE             (          asp.asm):01013                 BRA     SAVSYM                            ;GO FOR IT
                      (          asp.asm):01014         ;*
                      (          asp.asm):01015         ;* PARSE        INFIX OPERANDS INTO REVERSE RPN STACK
                      (          asp.asm):01016         ;*
2759                  (          asp.asm):01017         NEST
2759 3121             (          asp.asm):01018                 LEAY    1,Y                               ;SKIP
275B                  (          asp.asm):01019         DOPARS
275B 17FF10           (          asp.asm):01020                 LBSR    SKIP                              ;ADVANCE TO NEXT TOKEN
275E 272A             (          asp.asm):01021                 BEQ     TOK                               ;END OF LINE, QUIT
2760 8129             (          asp.asm):01022                 CMPA    #')'                              ;END OF SECTION?
2762 2726             (          asp.asm):01023                 BEQ     TOK                               ;IF SO, QUIT
2764 812C             (          asp.asm):01024                 CMPA    #','                              ;CLOSING COMMA?
2766 2722             (          asp.asm):01025                 BEQ     TOK                               ;IF SO, QUIT
2768 313F             (          asp.asm):01026                 LEAY    -1,Y                              ;BACKUP TO IT
276A 8D02             (          asp.asm):01027                 BSR     GETOK                             ;EVALUATE THIS TOKEN
276C 20ED             (          asp.asm):01028                 BRA     DOPARS                            ;DO IT AGAIN FOR NEXT
                      (          asp.asm):01029         ;* GET NEXT TOKEN SET
276E                  (          asp.asm):01030         GETOK
276E 3F               (          asp.asm):01031                 SWI
276F 04               (          asp.asm):01032                 FCB     4                                 ;SKIP TO NEXT TOKEN
2770 2718             (          asp.asm):01033                 BEQ     TOK                               ;END OF LINE, QUIT
2772 8128             (          asp.asm):01034                 CMPA    #'('                              ;STARTING BRACE?
2774 27E3             (          asp.asm):01035                 BEQ     NEST                              ;IF SO, NEST IT
2776 10BF2ABF         (          asp.asm):01036                 STY     TEMP                              ;SAVE POINTER TO TOKEN
277A 17FEFA           (          asp.asm):01037                 LBSR    TOKEN                             ;DETERMINE IT'S CLASS
277D 8102             (          asp.asm):01038                 CMPA    #2                                ;IS IT A CONSTANT OR VARIABLE?
277F 230A             (          asp.asm):01039                 BLS     TOK1                              ;IF SO, IT'S OK
2781 3402             (          asp.asm):01040                 PSHS    A                                 ;SAVE CLASS
2783 17FFE8           (          asp.asm):01041                 LBSR    GETOK                             ;GET NEXT TOKEN
2786                  (          asp.asm):01042         TOK2
2786 3502             (          asp.asm):01043                 PULS    A                                 ;RESTORE CLASS
2788 3602             (          asp.asm):01044                 PSHU    A                                 ;SAVE ON RPN STACK
278A                  (          asp.asm):01045         TOK
278A 39               (          asp.asm):01046                 RTS
                      (          asp.asm):01047         ;* VARIABLE OR CONSTANT
278B                  (          asp.asm):01048         TOK1
278B 3402             (          asp.asm):01049                 PSHS    A                                 ;SAVE CLASS
278D FC2ABF           (          asp.asm):01050                 LDD     TEMP                              ;GET POINTER TO TOKEN
2790 3606             (          asp.asm):01051                 PSHU    A,B                               ;SAVE
2792 20F2             (          asp.asm):01052                 BRA     TOK2                              ;SAVE CLASS
                      (          asp.asm):01053         ;*
                      (          asp.asm):01054         ;* PARSE        LINE, AND GENERATE CODE FOR AN EXPRESSION
                      (          asp.asm):01055         ;*
2794                  (          asp.asm):01056         EXPR
2794 FF2ABB           (          asp.asm):01057                 STU     SAVUS                             ;SAVE USP FOR DETERMINATION OF TOP
2797 8DC2             (          asp.asm):01058                 BSR     DOPARS                            ;PARSE LINE INTO RPN STACK
                      (          asp.asm):01059         ;* GENERATE CODE        FROM REVERSE RPN STACK
2799 1F31             (          asp.asm):01060                 TFR     U,X                               ;POINT TO STACK SPACE
279B BF2ABD           (          asp.asm):01061                 STX     USRSTK                            ;POINT TO IT
279E 8D04             (          asp.asm):01062                 BSR     GENCOD                            ;PERFORM CODE GENERATION
27A0 FE2ABB           (          asp.asm):01063                 LDU     SAVUS                             ;RESTORE U
27A3 39               (          asp.asm):01064                 RTS
                      (          asp.asm):01065         ;* GENERATE CODE        FOR EXPRESSION
27A4                  (          asp.asm):01066         GENCOD
27A4 3416             (          asp.asm):01067                 PSHS    A,B,X                             ;SAVE REGISTERS
27A6 11B32ABB         (          asp.asm):01068                 CMPU    SAVUS                             ;ARE WE AT END?
27AA 2433             (          asp.asm):01069                 BHS     PAR4                              ;IF SO, QUIT
27AC A6C0             (          asp.asm):01070                 LDA     ,U+                               ;GET OPERATOR
27AE 1F89             (          asp.asm):01071                 TFR     A,B                               ;COPY TO B
27B0 8107             (          asp.asm):01072                 CMPA    #SNGL                             ;SINGLE OPERATOR?
27B2 2246             (          asp.asm):01073                 BHI     DUBOP                             ;IF SO, WE HAVE IT
27B4 8102             (          asp.asm):01074                 CMPA    #2                                ;IS IT A CONSTANT OF VARIABLE?
27B6 220D             (          asp.asm):01075                 BHI     SNGOP                             ;SINGLE OPERATOR
27B8 A7C2             (          asp.asm):01076                 STA     ,-U                               ;RESTACK
27BA 17FCF1           (          asp.asm):01077                 LBSR    WRINS                             ;WRITE INSTRUCTION
27BD 4C4400           (          asp.asm):01078                 FCN     'LD'
27C0 17FCAF           (          asp.asm):01079                 LBSR    WROPR                             ;OUTPUT OPERAND
27C3 3596             (          asp.asm):01080                 PULS    A,B,X,PC
                      (          asp.asm):01081         ;* SINGLE OPERAND INSTRUCTION
27C5                  (          asp.asm):01082         SNGOP
27C5 A6C4             (          asp.asm):01083                 LDA     ,U                                ;GET OPERAND
27C7 8102             (          asp.asm):01084                 CMPA    #2                                ;CONSTANT?
27C9 2305             (          asp.asm):01085                 BLS     SNG2                              ;IF SO, IT'S OK
27CB 17FFD6           (          asp.asm):01086                 LBSR    GENCOD                            ;GENERATE CODE FOR IT
27CE 2009             (          asp.asm):01087                 BRA     SNG1                              ;AND FINISH
27D0                  (          asp.asm):01088         SNG2
27D0 17FCDB           (          asp.asm):01089                 LBSR    WRINS                             ;OUTPUT STRING
27D3 4C4400           (          asp.asm):01090                 FCN     'LD'                              ;OUTPUT A LOAD INSTRUCTION
27D6 17FC99           (          asp.asm):01091                 LBSR    WROPR                             ;AND INCLUDE OPERAND
27D9                  (          asp.asm):01092         SNG1
27D9 8E29D7           (          asp.asm):01093                 LDX     #GENTAB                           ;POINT TO TABLE
27DC 58               (          asp.asm):01094                 ASLB                                      ;     SHIFT IT
27DD AD95             (          asp.asm):01095                 JSR     [B,X]                             ;PERFORM IT
                      (          asp.asm):01096         ;* TERMINATE
27DF                  (          asp.asm):01097         PAR4
27DF 3596             (          asp.asm):01098                 PULS    A,B,X,PC        RESTORE REGISTERS
                      (          asp.asm):01099         ;* STACKS ENTIRE OPERAND STRING ON VIRTUAL (X) STACK
27E1                  (          asp.asm):01100         STKOP
27E1 A6C0             (          asp.asm):01101                 LDA     ,U+                               ;GET OPERAND FROM USER STACK
27E3 A782             (          asp.asm):01102                 STA     ,-X                               ;SAVE ON X STACK
27E5 8102             (          asp.asm):01103                 CMPA    #2                                ;CONSTANT OR VARIABLE?
27E7 2308             (          asp.asm):01104                 BLS     STKO1                             ;IF SO, IT'T OK
27E9 8107             (          asp.asm):01105                 CMPA    #SNGL                             ;IS IT A SINGLE OPERTOR?
27EB 2302             (          asp.asm):01106                 BLS     STKO2                             ;YES, ONLY ONE OPERATOR TO STAC
27ED 8DF2             (          asp.asm):01107                 BSR     STKOP                             ;STACK ANOTHER OPERATOR
27EF                  (          asp.asm):01108         STKO2
27EF 20F0             (          asp.asm):01109                 BRA     STKOP                             ;STACK ANOTHER
27F1                  (          asp.asm):01110         STKO1
27F1 A6C0             (          asp.asm):01111                 LDA     ,U+                               ;GET ADDRESS
27F3 A782             (          asp.asm):01112                 STA     ,-X                               ;STACK
27F5 A6C0             (          asp.asm):01113                 LDA     ,U+                               ;GET LOW ADDRESS
27F7 A782             (          asp.asm):01114                 STA     ,-X                               ;STACK
27F9 39               (          asp.asm):01115                 RTS
                      (          asp.asm):01116         ;* DOUBLE OPERATOR INSTRUCTIONS
27FA                  (          asp.asm):01117         DUBOP
27FA BE2ABD           (          asp.asm):01118                 LDX     USRSTK                            ;POINT TO VIRTUAL STACK
27FD 3410             (          asp.asm):01119                 PSHS    X                                 ;SAVE IT
27FF 8DE0             (          asp.asm):01120                 BSR     STKOP                             ;STACK OPERAND
2801 BF2ABD           (          asp.asm):01121                 STX     USRSTK                            ;SAVE IT
2804 A6C4             (          asp.asm):01122                 LDA     ,U                                ;GET OPERAND
2806 8102             (          asp.asm):01123                 CMPA    #2                                ;CONSTANT OF VARIABLE?
2808 2305             (          asp.asm):01124                 BLS     DUB1                              ;YES, IT'S OK
280A 17FF97           (          asp.asm):01125                 LBSR    GENCOD                            ;GENERATE CODE
280D 2009             (          asp.asm):01126                 BRA     DUB2                              ;AND CONTINUE
280F                  (          asp.asm):01127         DUB1
280F 17FC9C           (          asp.asm):01128                 LBSR    WRINS                             ;OUTPUT INSTRUCTION
2812 4C4400           (          asp.asm):01129                 FCN     'LD'                              ;DO AN 'LD' INSTRUCTION
2815 17FC5A           (          asp.asm):01130                 LBSR    WROPR                             ;OUTPUT OPERAND
2818                  (          asp.asm):01131         DUB2
2818 BE2ABD           (          asp.asm):01132                 LDX     USRSTK                            ;POINT TO FAKE STACK
281B                  (          asp.asm):01133         DUB3
281B ACE4             (          asp.asm):01134                 CMPX    ,S                                ;ARE WE IN RANGE?
281D 2406             (          asp.asm):01135                 BHS     DUB4                              ;OK
281F A680             (          asp.asm):01136                 LDA     ,X+                               ;GET BYTE FROM FAKE STACK
2821 A7C2             (          asp.asm):01137                 STA     ,-U                               ;SAVE ON USER STACK
2823 20F6             (          asp.asm):01138                 BRA     DUB3                              ;CONTINUE
2825                  (          asp.asm):01139         DUB4
2825 3510             (          asp.asm):01140                 PULS    X                                 ;SAVE IT
2827 BF2ABD           (          asp.asm):01141                 STX     USRSTK                            ;RESAVE
                      (          asp.asm):01142         ;* LOOK FOR SIMPLE SECOND OPERATOR
282A A6C4             (          asp.asm):01143                 LDA     ,U                                ;GET BYTE FROM OPERAND
282C 8102             (          asp.asm):01144                 CMPA    #2                                ;SIMPLE CONSTANT OF VARIABLE?
282E 2319             (          asp.asm):01145                 BLS     DUB5                              ;YES, IT'S QUITE SIMPLE
2830 17FC7B           (          asp.asm):01146                 LBSR    WRINS                             ;OUTPUT INSTRUCTION
2833 50534853         (          asp.asm):01147                 FCC     'PSHS'                            ;PUSH INST
2837 0900             (          asp.asm):01148                 FCB     9,0                               ;TAB AND END
2839 17F9C0           (          asp.asm):01149                 LBSR    ENDCR                             ;CLOSE IT
283C 17FF65           (          asp.asm):01150                 LBSR    GENCOD                            ;GENERATE CODE FOR SECOND ARG
283F 8E29D7           (          asp.asm):01151                 LDX     #GENTAB                           ;POINT TO TABLE
2842 58               (          asp.asm):01152                 ASLB                                      ;     SHIFT
2843 1A01             (          asp.asm):01153                 ORCC    #$01                              ;SET CARRY, INDICATE STACK OPERATION
2845 AD95             (          asp.asm):01154                 JSR     [B,X]                             ;DO IT
2847 3596             (          asp.asm):01155                 PULS    A,B,X,PC        GO HOME
2849                  (          asp.asm):01156         DUB5
2849 8E29D7           (          asp.asm):01157                 LDX     #GENTAB                           ;POINT TO IT
284C 58               (          asp.asm):01158                 ASLB                                      ;     TIMES TWO
284D AD95             (          asp.asm):01159                 JSR     [B,X]                             ;DO IT
284F 3596             (          asp.asm):01160                 PULS    A,B,X,PC        GO HOME
                      (          asp.asm):01161         ;* SHIFT RIGHT
2851                  (          asp.asm):01162         CSHR
2851 7D2AB6           (          asp.asm):01163                 TST     BYTE
2854 2712             (          asp.asm):01164                 BEQ     BSHR
2856 17FC76           (          asp.asm):01165                 LBSR    STROUT
2859 09               (          asp.asm):01166                 FCB     9
285A 4C535241         (          asp.asm):01167                 FCC     'LSRA'
285E 0D09             (          asp.asm):01168                 FCB     $0D,9
2860 524F5242         (          asp.asm):01169                 FCC     'RORB'
2864 0D00             (          asp.asm):01170                 FCB     $0D,0
2866 200A             (          asp.asm):01171                 BRA     ESHR
2868                  (          asp.asm):01172         BSHR
2868 17FC64           (          asp.asm):01173                 LBSR    STROUT
286B 09               (          asp.asm):01174                 FCB     9
286C 4C535242         (          asp.asm):01175                 FCC     'LSRB'
2870 0D00             (          asp.asm):01176                 FCB     $0D,0
2872                  (          asp.asm):01177         ESHR
2872 39               (          asp.asm):01178                 RTS
                      (          asp.asm):01179         ;* SHIFT LEFT
2873                  (          asp.asm):01180         CSHL
2873 7D2AB6           (          asp.asm):01181                 TST     BYTE
2876 2712             (          asp.asm):01182                 BEQ     BSHL
2878 17FC54           (          asp.asm):01183                 LBSR    STROUT
287B 09               (          asp.asm):01184                 FCB     $09
287C 4C534C42         (          asp.asm):01185                 FCC     'LSLB'
2880 0D09             (          asp.asm):01186                 FCB     $0D,$09
2882 524F4C41         (          asp.asm):01187                 FCC     'ROLA'
2886 0D00             (          asp.asm):01188                 FCB     $0D,0
2888 200A             (          asp.asm):01189                 BRA     ESHL
288A                  (          asp.asm):01190         BSHL
288A 17FC42           (          asp.asm):01191                 LBSR    STROUT
288D 09               (          asp.asm):01192                 FCB     $09
288E 4C534C42         (          asp.asm):01193                 FCC     'LSLB'
2892 0D00             (          asp.asm):01194                 FCB     $0D,0
2894                  (          asp.asm):01195         ESHL
2894 39               (          asp.asm):01196                 RTS
                      (          asp.asm):01197         ;* COMPLEMENT
2895                  (          asp.asm):01198         CCOM
2895 7D2AB6           (          asp.asm):01199                 TST     BYTE
2898 2712             (          asp.asm):01200                 BEQ     BCOM
289A 17FC32           (          asp.asm):01201                 LBSR    STROUT
289D 09               (          asp.asm):01202                 FCB     $09
289E 434F4D41         (          asp.asm):01203                 FCC     'COMA'
28A2 0D09             (          asp.asm):01204                 FCB     $0D,$09
28A4 434F4D42         (          asp.asm):01205                 FCC     'COMB'
28A8 0D00             (          asp.asm):01206                 FCB     $0D,0
28AA 200A             (          asp.asm):01207                 BRA     ECOM
28AC                  (          asp.asm):01208         BCOM
28AC 17FC20           (          asp.asm):01209                 LBSR    STROUT
28AF 09               (          asp.asm):01210                 FCB     $09
28B0 434F4D42         (          asp.asm):01211                 FCC     'COMB'
28B4 0D00             (          asp.asm):01212                 FCB     $0D,0
28B6                  (          asp.asm):01213         ECOM
28B6 39               (          asp.asm):01214                 RTS
                      (          asp.asm):01215         ;* INCREMENT
28B7                  (          asp.asm):01216         CINC
28B7 7D2AB6           (          asp.asm):01217                 TST     BYTE
28BA 270F             (          asp.asm):01218                 BEQ     BINC
28BC 17FC10           (          asp.asm):01219                 LBSR    STROUT
28BF 09               (          asp.asm):01220                 FCB     $09
28C0 41444444         (          asp.asm):01221                 FCC     'ADDD'
28C4 09               (          asp.asm):01222                 FCB     $09
28C5 2331             (          asp.asm):01223                 FCC     '#1'
28C7 0D00             (          asp.asm):01224                 FCB     $0D,0
28C9 200A             (          asp.asm):01225                 BRA     EINC
28CB                  (          asp.asm):01226         BINC
28CB 17FC01           (          asp.asm):01227                 LBSR    STROUT
28CE 09               (          asp.asm):01228                 FCB     $09
28CF 494E4342         (          asp.asm):01229                 FCC     'INCB'
28D3 0D00             (          asp.asm):01230                 FCB     $0D,0
28D5                  (          asp.asm):01231         EINC
28D5 39               (          asp.asm):01232                 RTS
                      (          asp.asm):01233         ;* DECREMENT
28D6                  (          asp.asm):01234         CDEC
28D6 7D2AB6           (          asp.asm):01235                 TST     BYTE
28D9 270F             (          asp.asm):01236                 BEQ     BDEC
28DB 17FBF1           (          asp.asm):01237                 LBSR    STROUT
28DE 09               (          asp.asm):01238                 FCB     $09
28DF 53554244         (          asp.asm):01239                 FCC     'SUBD'
28E3 09               (          asp.asm):01240                 FCB     $09
28E4 2331             (          asp.asm):01241                 FCC     '#1'
28E6 0D00             (          asp.asm):01242                 FCB     $0D,0
28E8 200A             (          asp.asm):01243                 BRA     EDEC
28EA                  (          asp.asm):01244         BDEC
28EA 17FBE2           (          asp.asm):01245                 LBSR    STROUT
28ED 09               (          asp.asm):01246                 FCB     $09
28EE 44454342         (          asp.asm):01247                 FCC     'DECB'
28F2 0D00             (          asp.asm):01248                 FCB     $0D,0
28F4                  (          asp.asm):01249         EDEC
28F4 39               (          asp.asm):01250                 RTS
                      (          asp.asm):01251         ;*
                      (          asp.asm):01252         ;* DOUBLE OPERAND INSTRUCTIONS
                      (          asp.asm):01253         ;*
                      (          asp.asm):01254         ;* SUBTRACTION
28F5                  (          asp.asm):01255         CSUB
28F5 17FBB6           (          asp.asm):01256                 LBSR    WRINS                             ;OUTPUT INST
28F8 53554200         (          asp.asm):01257                 FCN     'SUB'                             ;SUBTRACT
28FC 1024FB72         (          asp.asm):01258                 LBCC    WROPR                             ;IF NOTHING, IT'S OK
2900 8D11             (          asp.asm):01259                 BSR     DSSTK1                            ;PERFORM SUBTRACTION
2902 17FF90           (          asp.asm):01260                 LBSR    CCOM                              ;COMPLEMENT IT
2905 16FFAF           (          asp.asm):01261                 LBRA    CINC                              ;INCREMENT IT
                      (          asp.asm):01262         ;* ADDITION
2908                  (          asp.asm):01263         CADD
2908 17FBA3           (          asp.asm):01264                 LBSR    WRINS                             ;OUTPUT INSTRUCTION
290B 41444400         (          asp.asm):01265                 FCN     'ADD'                             ;ADD
290F                  (          asp.asm):01266         DCIF1
290F 1024FB5F         (          asp.asm):01267                 LBCC    WROPR                             ;IF NO STACK, DO IT RIGHT
2913                  (          asp.asm):01268         DSSTK1
2913 17FBB9           (          asp.asm):01269                 LBSR    STROUT                            ;OUTPUT STRING
2916 09               (          asp.asm):01270                 FCB     $09                               ;TAB
2917 2C532B00         (          asp.asm):01271                 FCN     ',S+'                             ;ONE OPERATION
291B 7D2AB6           (          asp.asm):01272                 TST     BYTE                              ;BYTE OPERATIONS
291E 2705             (          asp.asm):01273                 BEQ     ENDX                              ;OK
2920 862B             (          asp.asm):01274                 LDA     #'+'                              ;EXTRA PLUS
2922 17FBCF           (          asp.asm):01275                 LBSR    WROUT                             ;OUTPUT
2925                  (          asp.asm):01276         ENDX
2925 16F8D4           (          asp.asm):01277                 LBRA    ENDCR
                      (          asp.asm):01278         ;* LOGICAL OR
2928                  (          asp.asm):01279         COR
2928 8D12             (          asp.asm):01280                 BSR     WRACO                             ;WRITE ACCUMULATOR OPERATION
292A 4F5200           (          asp.asm):01281                 FCN     'OR'                              ;DO AN OR
292D 39               (          asp.asm):01282                 RTS
                      (          asp.asm):01283         ;* LOGICAL AND
292E                  (          asp.asm):01284         CAND
292E 8D0C             (          asp.asm):01285                 BSR     WRACO
2930 414E4400         (          asp.asm):01286                 FCN     'AND'
2934 39               (          asp.asm):01287                 RTS
                      (          asp.asm):01288         ;* EXCLUSIVE OR
2935                  (          asp.asm):01289         CXOR
2935 8D05             (          asp.asm):01290                 BSR     WRACO
2937 454F5200         (          asp.asm):01291                 FCN     'EOR'
293B 39               (          asp.asm):01292                 RTS
                      (          asp.asm):01293         ;*
                      (          asp.asm):01294         ;* WRITE AN ACCUMUALTOR OPERATION
                      (          asp.asm):01295         ;*
293C                  (          asp.asm):01296         WRACO
293C 2554             (          asp.asm):01297                 BCS     WRASTK                            ;ON STACK
293E 7D2AB6           (          asp.asm):01298                 TST     BYTE                              ;BYTE OPERATION?
2941 2721             (          asp.asm):01299                 BEQ     WRABYT                            ;YES
2943 17FBB7           (          asp.asm):01300                 LBSR    WRTAB                             ;OUTPUT TAB
2946 AEE4             (          asp.asm):01301                 LDX     ,S                                ;GET PC
2948 17FB7A           (          asp.asm):01302                 LBSR    WRSTX                             ;OUTPUT INSTRUCTION
294B 17FB81           (          asp.asm):01303                 LBSR    STROUT                            ;OUTPUT STRING
294E 410900           (          asp.asm):01304                 FCB     'A',9,0                           ;OUTPUT STRING
2951 3440             (          asp.asm):01305                 PSHS    U                                 ;SAVE U
2953 A6C0             (          asp.asm):01306                 LDA     ,U+                               ;GET OPERAND TYPE
2955 8101             (          asp.asm):01307                 CMPA    #1                                ;CONSTANT?
2957 2606             (          asp.asm):01308                 BNE     WRANV                             ;NOT A CONSTANT
2959 17FB73           (          asp.asm):01309                 LBSR    STROUT
295C 233D00           (          asp.asm):01310                 FCB     '#','=',0
295F                  (          asp.asm):01311         WRANV
295F 17FB2F           (          asp.asm):01312                 LBSR    NCNST                             ;TOP BYTE IS OK
2962 3540             (          asp.asm):01313                 PULS    U                                 ;RESTORE
2964                  (          asp.asm):01314         WRABYT
2964 17FB96           (          asp.asm):01315                 LBSR    WRTAB                             ;OUTPUT TAB
2967 AEE4             (          asp.asm):01316                 LDX     ,S                                ;GET POINTER
2969 17FB59           (          asp.asm):01317                 LBSR    WRSTX                             ;CONTINUE
296C AFE4             (          asp.asm):01318                 STX     ,S                                ;RESAVE
296E 17FB5E           (          asp.asm):01319                 LBSR    STROUT                            ;OUTPUT
2971 420900           (          asp.asm):01320                 FCB     'B',9,0                           ;CONTINUE
2974 7D2AB6           (          asp.asm):01321                 TST     BYTE                              ;BYTE OPERATION?
2977 2716             (          asp.asm):01322                 BEQ     WRANV1                            ;IF SO, NO SPECIAL CRAP
2979 A6C4             (          asp.asm):01323                 LDA     ,U                                ;GET TYPE
297B 8102             (          asp.asm):01324                 CMPA    #2                                ;VARIABLE?
297D 2610             (          asp.asm):01325                 BNE     WRANV1                            ;NO, SKIP IT
297F 10AE41           (          asp.asm):01326                 LDY     1,U                               ;GET ADDRESS
2982 17FC9B           (          asp.asm):01327                 LBSR    LOOKUP                            ;LOOK FOR IT
2985 8502             (          asp.asm):01328                 BITA    #2                                ;WORD?
2987 2706             (          asp.asm):01329                 BEQ     WRANV1                            ;NO
2989 17FB43           (          asp.asm):01330                 LBSR    STROUT
298C 312B00           (          asp.asm):01331                 FCN     '1+'
298F                  (          asp.asm):01332         WRANV1
298F 16FAE3           (          asp.asm):01333                 LBRA    WRONT                             ;OUTPUT OPERAND
                      (          asp.asm):01334         ;* OPERAND IS ON STACK
2992                  (          asp.asm):01335         WRASTK
2992 7D2AB6           (          asp.asm):01336                 TST     BYTE                              ;OK?
2995 2712             (          asp.asm):01337                 BEQ     WRASTB                            ;BYTE OPERATION
2997 17FB63           (          asp.asm):01338                 LBSR    WRTAB                             ;OUTPUT
299A AEE4             (          asp.asm):01339                 LDX     ,S                                ;GET POINTER
299C 17FB26           (          asp.asm):01340                 LBSR    WRSTX                             ;OUTPUT
299F 17FB2D           (          asp.asm):01341                 LBSR    STROUT                            ;OUTPUT STRING
29A2 4109             (          asp.asm):01342                 FCB     'A',9                             ;OUTPUT STRING
29A4 2C532B           (          asp.asm):01343                 FCC     ',S+'
29A7 0D00             (          asp.asm):01344                 FCB     $0D,0                             ;END OF LINE
29A9                  (          asp.asm):01345         WRASTB
29A9 17FB51           (          asp.asm):01346                 LBSR    WRTAB                             ;OUTPUT TAB
29AC AEE4             (          asp.asm):01347                 LDX     ,S                                ;GET POINTER TO INST
29AE 17FB14           (          asp.asm):01348                 LBSR    WRSTX                             ;OUTPUT
29B1 AFE4             (          asp.asm):01349                 STX     ,S                                ;SAVE
29B3 17FB19           (          asp.asm):01350                 LBSR    STROUT                            ;OUTPUT STRING
29B6 4209             (          asp.asm):01351                 FCB     'B',9                             ;OUTPUT STRING
29B8 2C532B           (          asp.asm):01352                 FCC     ',S+'
29BB 0D00             (          asp.asm):01353                 FCB     $0D,0                             ;END OF LINE
29BD 39               (          asp.asm):01354                 RTS
                      (          asp.asm):01355         ;*
                      (          asp.asm):01356         ;* OPERATOR TABLE
                      (          asp.asm):01357         ;*
29BE                  (          asp.asm):01358         OPRTAB
29BE 2BAB05           (          asp.asm):01359                 FCB     '+','+'+$80,5
29C1 2DAD06           (          asp.asm):01360                 FCB     '-','-'+$80,6
29C4 2DBA07           (          asp.asm):01361                 FCB     '-',':'+$80,7
29C7 21A10C           (          asp.asm):01362                 FCB     '!','!'+$80,12
29CA BC03             (          asp.asm):01363                 FCB     '<'+$80,3
29CC BE04             (          asp.asm):01364                 FCB     '>'+$80,4
29CE AB08             (          asp.asm):01365                 FCB     '+'+$80,8
29D0 AD09             (          asp.asm):01366                 FCB     '-'+$80,9
29D2 A60A             (          asp.asm):01367                 FCB     '&'+$80,10
29D4 A10B             (          asp.asm):01368                 FCB     '!'+$80,11
29D6 00               (          asp.asm):01369                 FCB     0
     0007             (          asp.asm):01370         SNGL            = 7                               ;HIGEST SINGLE OPERAND OPERATOR
                      (          asp.asm):01371         ;* TABLE OF GENERATION CODE
29D7                  (          asp.asm):01372         GENTAB
29D7 2248             (          asp.asm):01373                 FDB     SYNTAX                            ;0
29D9 2248             (          asp.asm):01374                 FDB     SYNTAX                            ;1
29DB 2248             (          asp.asm):01375                 FDB     SYNTAX                            ;2
29DD 2873             (          asp.asm):01376                 FDB     CSHL                              ;3
29DF 2851             (          asp.asm):01377                 FDB     CSHR                              ;4
29E1 28B7             (          asp.asm):01378                 FDB     CINC                              ;5
29E3 28D6             (          asp.asm):01379                 FDB     CDEC                              ;6
29E5 2895             (          asp.asm):01380                 FDB     CCOM                              ;7
29E7 2908             (          asp.asm):01381                 FDB     CADD                              ;8
29E9 28F5             (          asp.asm):01382                 FDB     CSUB                              ;9
29EB 292E             (          asp.asm):01383                 FDB     CAND                              ;10
29ED 2928             (          asp.asm):01384                 FDB     COR                               ;11
29EF 2935             (          asp.asm):01385                 FDB     CXOR                              ;12
                      (          asp.asm):01386         ;* RESERVED WORD        TABLE
29F1                  (          asp.asm):01387         RESWRD
29F1 84               (          asp.asm):01388                 FCB     $84
29F2 43484152         (          asp.asm):01389                 FCC     'CHAR'
29F6 84               (          asp.asm):01390                 FCB     $84
29F7 42595445         (          asp.asm):01391                 FCC     'BYTE'
29FB 87               (          asp.asm):01392                 FCB     $87
29FC 494E5445474552   (          asp.asm):01393                 FCC     'INTEGER'
2A03 84               (          asp.asm):01394                 FCB     $84
2A04 434F4445         (          asp.asm):01395                 FCC     'CODE'
2A08 84               (          asp.asm):01396                 FCB     $84
2A09 44415441         (          asp.asm):01397                 FCC     'DATA'
2A0D 83               (          asp.asm):01398                 FCB     $83
2A0E 41534D           (          asp.asm):01399                 FCC     'ASM'
2A11                  (          asp.asm):01400         ENDWRD
2A11 83               (          asp.asm):01401                 FCB     $83
2A12 454E44           (          asp.asm):01402                 FCC     'END'
2A15 82               (          asp.asm):01403                 FCB     $82
2A16 4946             (          asp.asm):01404                 FCC     'IF'
2A18 84               (          asp.asm):01405                 FCB     $84
2A19 454C5345         (          asp.asm):01406                 FCC     'ELSE'
2A1D 85               (          asp.asm):01407                 FCB     $85
2A1E 5748494C45       (          asp.asm):01408                 FCC     'WHILE'
2A23 84               (          asp.asm):01409                 FCB     $84
2A24 474F544F         (          asp.asm):01410                 FCC     'GOTO'
2A28 84               (          asp.asm):01411                 FCB     $84
2A29 43414C4C         (          asp.asm):01412                 FCC     'CALL'
2A2D 84               (          asp.asm):01413                 FCB     $84
2A2E 45584954         (          asp.asm):01414                 FCC     'EXIT'
2A32 84               (          asp.asm):01415                 FCB     $84
2A33 535542524F555449 (          asp.asm):01416                 FCC     'SUBROUTINE'
     4E45
2A3D 80               (          asp.asm):01417                 FCB     $80
                      (          asp.asm):01418         ;*
                      (          asp.asm):01419         ;* HANDLER DATA TABLE
                      (          asp.asm):01420         ;*
2A3E                  (          asp.asm):01421         HNDLRS
2A3E 2208             (          asp.asm):01422                 FDB     VARIAB                            ;'CHAR'
2A40 2208             (          asp.asm):01423                 FDB     VARIAB                            ;'BYTE'
2A42 2208             (          asp.asm):01424                 FDB     VARIAB                            ;'INTEGER'
2A44 21F0             (          asp.asm):01425                 FDB     CODE                              ;'CODE'
2A46 2201             (          asp.asm):01426                 FDB     DATA                              ;'DATA'
2A48 2286             (          asp.asm):01427                 FDB     ASM                               ;'ASM' COMMAND
2A4A 2398             (          asp.asm):01428                 FDB     CEND                              ;'END' STATEMENT
2A4C 2383             (          asp.asm):01429                 FDB     CIF                               ;'IF' STATEMENT
2A4E 23E7             (          asp.asm):01430                 FDB     ELSE                              ;'ELSE' STATEMENT
2A50 2365             (          asp.asm):01431                 FDB     WHILE                             ;'WHILE' STATEMENT
2A52 240A             (          asp.asm):01432                 FDB     GOTO                              ;'GOTO' STATEMENT
2A54 241A             (          asp.asm):01433                 FDB     CALL                              ;'CALL' STATEMENT
2A56 2426             (          asp.asm):01434                 FDB     EXIT                              ;'EXIT' STATEMENT
2A58 22AC             (          asp.asm):01435                 FDB     SUBR                              ;'SUBROUTINE' STATEMENT
2A5A 26E7             (          asp.asm):01436                 FDB     ASSIGN                            ;DEFAULT / UNRECOGNIZED
                      (          asp.asm):01437         ;*
                      (          asp.asm):01438         ;* DATA TYPE TABLE
                      (          asp.asm):01439         ;*
2A5C                  (          asp.asm):01440         DTAB
2A5C 88               (          asp.asm):01441                 FCB     $88
2A5D 434F4E5354414E54 (          asp.asm):01442                 FCC     'CONSTANT'
2A65 80               (          asp.asm):01443                 FCB     $80
                      (          asp.asm):01444         ;*
                      (          asp.asm):01445         ;* CONDITIONAL DATA TABLE
                      (          asp.asm):01446         ;*
2A66                  (          asp.asm):01447         CONTAB
2A66 45514E45         (          asp.asm):01448                 FCC     'EQNE'
2A6A 4E454551         (          asp.asm):01449                 FCC     'NEEQ'
2A6E 4C544C45         (          asp.asm):01450                 FCC     'LTLE'
2A72 47544745         (          asp.asm):01451                 FCC     'GTGE'
2A76 4C454C54         (          asp.asm):01452                 FCC     'LELT'
2A7A 47454754         (          asp.asm):01453                 FCC     'GEGT'
2A7E 4C534C4F         (          asp.asm):01454                 FCC     'LSLO'
2A82 4C4F4C53         (          asp.asm):01455                 FCC     'LOLS'
2A86 48494853         (          asp.asm):01456                 FCC     'HIHS'
2A8A 48534849         (          asp.asm):01457                 FCC     'HSHI'
2A8E 0000             (          asp.asm):01458                 FCB     0,0
                      (          asp.asm):01459         ;*
                      (          asp.asm):01460         ;* QUALIFIER TABLE
                      (          asp.asm):01461         ;*
2A90                  (          asp.asm):01462         QTABLE
2A90 82               (          asp.asm):01463                 FCB     $82
2A91 2F5155494554     (          asp.asm):01464                 FCC     '/QUIET'
2A97 82               (          asp.asm):01465                 FCB     $82
2A98 2F434F4D4D454E54 (          asp.asm):01466                 FCC     '/COMMENT'
2AA0 82               (          asp.asm):01467                 FCB     $82
2AA1 2F534F55524345   (          asp.asm):01468                 FCC     '/SOURCE'
2AA8 80               (          asp.asm):01469                 FCB     $80
     0003             (          asp.asm):01470         QMAX            = 3
                      (          asp.asm):01471         ;*
     2AA9             (          asp.asm):01472         QFLAGS          = *
2AA9                  (          asp.asm):01473         QUIET
2AA9 FF               (          asp.asm):01474                 FCB     $FF
2AAA                  (          asp.asm):01475         COMNT
2AAA FF               (          asp.asm):01476                 FCB     $FF
2AAB                  (          asp.asm):01477         SOURCE
2AAB FF               (          asp.asm):01478                 FCB     $FF
                      (          asp.asm):01479         ;*
                      (          asp.asm):01480         ;* LOCAL        VARIABLE DATA SPACE
                      (          asp.asm):01481         ;*
2AAC                  (          asp.asm):01482         LINE
2AAC 0000             (          asp.asm):01483                 FDB     0                                 ;CURRENT LINE NUMBER
2AAE                  (          asp.asm):01484         DATADR
2AAE 0000             (          asp.asm):01485                 FDB     0                                 ;DEFAULT DATA ADDRESS
2AB0                  (          asp.asm):01486         NXTLAB
2AB0 0000             (          asp.asm):01487                 FDB     0                                 ;LABLE VALUES
2AB2                  (          asp.asm):01488         ERRCNT
2AB2 0000             (          asp.asm):01489                 FDB     0                                 ;ERROR COUNTER
2AB4                  (          asp.asm):01490         CTLSTK
2AB4 D7FF             (          asp.asm):01491                 FDB     CTSP                              ;CONTROL STACK POINTER
                      (          asp.asm):01492         ;*
                      (          asp.asm):01493         ;* RESERVED MEMORY
                      (          asp.asm):01494         ;*
2AB6                  (          asp.asm):01495         BYTE
2AB6                  (          asp.asm):01496                 RMB     1                                 ;INDICATES BYTE/WORD OPERATIONS
2AB7                  (          asp.asm):01497         SAVS
2AB7                  (          asp.asm):01498                 RMB     2                                 ;SAVED SP
2AB9                  (          asp.asm):01499         SAVU
2AB9                  (          asp.asm):01500                 RMB     2                                 ;SAVED UP
2ABB                  (          asp.asm):01501         SAVUS
2ABB                  (          asp.asm):01502                 RMB     2                                 ;SAVED U STACK POINTER
2ABD                  (          asp.asm):01503         USRSTK
2ABD                  (          asp.asm):01504                 RMB     2                                 ;SAVED X STACK POINTER
2ABF                  (          asp.asm):01505         TEMP
2ABF                  (          asp.asm):01506                 RMB     2                                 ;TEMPORARY STORAGE
2AC1                  (          asp.asm):01507         SYMEND
2AC1                  (          asp.asm):01508                 RMB     2                                 ;SYMBOL TABLE ENDING ADDRESS
2AC3                  (          asp.asm):01509         INPLIN
2AC3                  (          asp.asm):01510                 RMB     128                               ;INPUT LINE BUFFER
2B43                  (          asp.asm):01511         INPFIL
2B43                  (          asp.asm):01512                 RMB     522                               ;INPUT FILE BUFFER
2D4D                  (          asp.asm):01513         OUTFIL
2D4D                  (          asp.asm):01514                 RMB     522                               ;OUTPUT FILE BUFFER
     2F57             (          asp.asm):01515         SYMTAB          = *                               ;SYMBOL TABLE

Symbol Table:
[ G] ABORT                            2082
[ G] ASI1                             26FC
[ G] ASI2                             2705
[ G] ASM                              2286
[ G] ASM1                             228B
[ G] ASM2                             22A1
[ G] ASP                              2000
[ G] ASSBYT                           2754
[ G] ASSIGN                           26E7
[ G] BADS                             25ED
[ G] BADSTR                           2538
[ G] BCOM                             28AC
[ G] BDEC                             28EA
[ G] BINC                             28CB
[ G] BSHL                             288A
[ G] BSHR                             2868
[ G] BYTE                             2AB6
[ G] CADD                             2908
[ G] CALL                             241A
[ G] CAND                             292E
[ G] CBYTOK                           232E
[ G] CCOM                             2895
[ G] CDEC                             28D6
[ G] CEND                             2398
[ G] CEND1                            239F
[ G] CEND2                            23C4
[ G] CENDB                            23D1
[ G] CIF                              2383
[ G] CINC                             28B7
[ G] CODE                             21F0
[ G] COMNT                            2AAA
[ G] CONSTA                           2214
[ G] CONTAB                           2A66
[ G] COR                              2928
[ G] CPALL                            25B1
[ G] CPE1                             2535
[ G] CPE2                             2525
[ G] CPE3                             2533
[ G] CPEL1                            2515
[ G] CPELEM                           2513
[ G] CPV1                             25CE
[ G] CPV2                             25D7
[ G] CPVAR                            25BF
[ G] CRS1                             2602
[ G] CRSYM                            25F0
[ G] CRVARS                           2174
[ G] CSHL                             2873
[ G] CSHR                             2851
[ G] CSUB                             28F5
[ G] CTLSTK                           2AB4
[ G] CTSP                             D7FF
[ G] CWRDOK                           2311
[ G] CXOR                             2935
[ G] DATA                             2201
[ G] DATADR                           2AAE
[ G] DCIF1                            290F
[ G] DEFA                             21BB
[ G] DOCON1                           22E7
[ G] DOCOND                           22B1
[ G] DOCSYN                           234D
[ G] DOPARS                           275B
[ G] DSQU1                            206A
[ G] DSSTK1                           2913
[ G] DTAB                             2A5C
[ G] DUB1                             280F
[ G] DUB2                             2818
[ G] DUB3                             281B
[ G] DUB4                             2825
[ G] DUB5                             2849
[ G] DUBOP                            27FA
[ G] ECOM                             28B6
[ G] EDEC                             28F4
[ G] EINC                             28D5
[ G] ELSE                             23E7
[ G] ENDCR                            21FC
[ G] ENDOK                            21ED
[ G] ENDVAR                           21CB
[ G] ENDWRD                           2A11
[ G] ENDX                             2925
[ G] ERR3                             256B
[ G] ERR4                             2575
[ G] ERRCNT                           2AB2
[ G] ERROR                            254B
[ G] ESHL                             2894
[ G] ESHR                             2872
[ G] EXIT                             2426
[ G] EXPR                             2794
[ G] GENCOD                           27A4
[ G] GENTAB                           29D7
[ G] GETLAB                           2441
[ G] GETNUM                           258F
[ G] GETOK                            276E
[ G] GOABO                            207C
[ G] GOTO                             240A
[ G] GOTO1                            2414
[ G] HNDLRS                           2A3E
[ G] IDENTI                           2195
[ G] INPFIL                           2B43
[ G] INPLIN                           2AC3
[ G] LINE                             2AAC
[ G] LOK1                             2625
[ G] LOK2                             262B
[ G] LOK3                             263B
[ G] LOK4                             2648
[ G] LOOKNF                           2657
[ G] LOOKUP                           2620
[ G] MAIN                             2084
[ G] NCNST                            2491
[ G] NCNT1                            248B
[ G] NEST                             2759
[ G] NOALL                            227D
[ G] NODOR1                           218F
[ G] NODORG                           218C
[ G] NORVAR                           225D
[ G] NOSORC                           2121
[ G] NOSR1                            214D
[ G] NOTFND                           2645
[ G] NTOP                             26D7
[ G] NUMOK                            25AD
[ G] NXTLAB                           2AB0
[ G] OPRTAB                           29BE
[ G] OSEND                            DBFF
[ G] OSRAM                            2000
[ G] OUTFIL                           2D4D
[ G] PAR4                             27DF
[ G] POPD                             2466
[ G] POPS                             245D
[ G] PROCOM                           2163
[ G] PSYBY                            22D2
[ G] PUSHD                            244B
[ G] PUSHS                            2454
[ G] QERR                             2052
[ G] QFLAGS                           2AA9
[ G] QMAX                             0003
[ G] QTABLE                           2A90
[ G] QUAL                             203A
[ G] QUIET                            2AA9
[ G] RDIN1                            20F6
[ G] RDINP                            20E8
[ G] RDINPF                           26DE
[ G] RESWRD                           29F1
[ G] SAVS                             2AB7
[ G] SAVSYM                           2727
[ G] SAVU                             2AB9
[ G] SAVUS                            2ABB
[ G] SAVUSP                           246D
[ G] SKIP                             266E
[ G] SNG1                             27D9
[ G] SNG2                             27D0
[ G] SNGL                             0007
[ G] SNGOP                            27C5
[ G] SOURCE                           2AAB
[ G] SRCLAB                           212E
[ G] STACK                            DBFF
[ G] STKO1                            27F1
[ G] STKO2                            27EF
[ G] STKOP                            27E1
[ G] STR2                             24D5
[ G] STROUT                           24CF
[ G] SUBR                             22AC
[ G] SYEXI                            273A
[ G] SYMEND                           2AC1
[ G] SYMF                             266D
[ G] SYMOK                            25EA
[ G] SYMTAB                           2F57
[ G] SYNTAX                           2248
[ G] TADDR                            269A
[ G] TCON                             2689
[ G] TCON1                            268B
[ G] TEMP                             2ABF
[ G] TNXT                             268D
[ G] TNXT1                            268F
[ G] TOK                              278A
[ G] TOK1                             278B
[ G] TOK2                             2786
[ G] TOKEN                            2677
[ G] TOKVAR                           26AB
[ G] TOP1                             26B6
[ G] TOP2                             26BC
[ G] TOP3                             26D2
[ G] TOP4                             26C8
[ G] TOPR                             26B3
[ G] TYOK                             2725
[ G] USP                              D9FF
[ G] USRSTK                           2ABD
[ G] VALSYM                           25DA
[ G] VARIAB                           2208
[ G] VARNXT                           21C7
[ G] WHILE                            2365
[ G] WRABYT                           2964
[ G] WRACO                            293C
[ G] WRANV                            295F
[ G] WRANV1                           298F
[ G] WRASTB                           29A9
[ G] WRASTK                           2992
[ G] WRCOMN                           2168
[ G] WREQP                            23B2
[ G] WREQU                            23B5
[ G] WRHEXB                           24E0
[ G] WRHEXW                           24D9
[ G] WRHEXZ                           24DE
[ G] WRINS                            24AE
[ G] WRLAB                            2507
[ G] WRLCR                            2501
[ G] WRLEN                            21C1
[ G] WRLST                            24C1
[ G] WRNAM                            219D
[ G] WRNIB                            24EA
[ G] WROK                             248E
[ G] WRONT                            2475
[ G] WROPR                            2472
[ G] WROUT                            24F4
[ G] WRSRLI                           2118
[ G] WRSRTS                           2285
[ G] WRSTX                            24C5
[ G] WRTAB                            24FD
