                      (          edt.asm):00001         ;       title   EDT SCREEN EDITOR
                      (          edt.asm):00002         ;*
                      (          edt.asm):00003         ;* EDT: A terminal independant screen editor
                      (          edt.asm):00004         ;*
                      (          edt.asm):00005         ;* Copyright 1983-2005 Dave Dunfield
                      (          edt.asm):00006         ;* All rights reserved.
                      (          edt.asm):00007         ;*
                      (          edt.asm):00008         ;* SCREEN HANDLING CHARACTERS
     2000             (          edt.asm):00009         OSRAM           = $2000                           ; APPLICATION RAM AREA
     DBFF             (          edt.asm):00010         OSEND           = $DBFF                           ; END OF GENERAL RAM
     D000             (          edt.asm):00011         OSUTIL          = $D000                           ; UTILITY ADDRESS SPACE
     0080             (          edt.asm):00012         CL              = $80                             ;CLEAR SCREEN
     0081             (          edt.asm):00013         CE              = $81                             ;CLEAR TO END OF LINE
     0082             (          edt.asm):00014         CD              = $82                             ;CLEAR TO END OF SCREEN
     0083             (          edt.asm):00015         SO              = $83                             ;SPECIAL EFFECTS ON
     0084             (          edt.asm):00016         SE              = $84                             ;SPECIAL EFFECTS OFF
     0085             (          edt.asm):00017         SF              = $85                             ;SCROLL FORWARD
                      (          edt.asm):00018         ;* KEYBOARD INPUT CHARACTERS
     0080             (          edt.asm):00019         KUP             = $80                             ;UP KEY
     0081             (          edt.asm):00020         KDO             = $81                             ;DOWN KEY
     008B             (          edt.asm):00021         KDP             = $8B                             ;DELETE PREVIOUS
     008D             (          edt.asm):00022         KCM             = $8D                             ;COMMAND MODE
                      (          edt.asm):00023         ;* STANDARD TEXT INPUT CHARACTERS
     000D             (          edt.asm):00024         NL              = $0D                             ;NEW LINE (CARRIAGE RETURN)
     0009             (          edt.asm):00025         TAB             = $09                             ;TAB CHARACTER
                      (          edt.asm):00026         ;* MISC CONSTANTS
     0018             (          edt.asm):00027         LINES           = 24                              ;# LINES ON THE SCREEN
     0050             (          edt.asm):00028         COLS            = 80                              ;COLUMNS
     3000             (          edt.asm):00029         DATA_BEGINS     = $3000                           ;Must be page aligned and after the last byte of code !
     0030             (          edt.asm):00030         DATA_BEGINS_P   = $30                             ;Page number for data_begins
                      (          edt.asm):00031         ;*
                      (          edt.asm):00032                 ORG     OSRAM
                      (          edt.asm):00033         ;*
                      (          edt.asm):00034         ;* TERMINAL INITIALIZATION.
                      (          edt.asm):00035         ;*
2000                  (          edt.asm):00036         ENTRY
2000 BE2E2E           (          edt.asm):00037                 LDX     ISTPTR                            ;GET INPUT STRING POINTER
2003 3F               (          edt.asm):00038                 SWI
2004 17               (          edt.asm):00039                 FCB     23                                ;OUTPUT TO TERMINAL
2005 3F               (          edt.asm):00040                 SWI
2006 04               (          edt.asm):00041                 FCB     4                                 ;GET OPERANDS
2007 813F             (          edt.asm):00042                 CMPA    #'?'                              ;QUERY OPERATION?
2009 2614             (          edt.asm):00043                 BNE     EDT1                              ;NO, KEEP GOING
200B 3F               (          edt.asm):00044                 SWI
200C 19               (          edt.asm):00045                 FCB     25                                ;ISSUE MESSAGE
200D 5573653A20454454 (          edt.asm):00046                 FCN     'Use: EDT <file>'
     203C66696C653E00
201D                  (          edt.asm):00047         ABORT
201D 3F               (          edt.asm):00048                 SWI
201E 00               (          edt.asm):00049                 FCB     0                                 ;EXIT
201F                  (          edt.asm):00050         EDT1
201F 8630             (          edt.asm):00051                 LDA     #DATA_BEGINS_P                    ;GET HIGH ADDRSS OF DATA
2021 1F8B             (          edt.asm):00052                 TFR     A,DP                              ;SET UP DP
     30               (          edt.asm):00053                 SETDP   DATA_BEGINS_P                     ;INFORM ASSEMBLER
                      (          edt.asm):00054         ;* INIT LOCAL VARIABLES & SAME FILENAME
2023 8E3021           (          edt.asm):00055                 LDX     #NAMBUF                           ;POINT TO NAME BUFFER
2026 A69F2E30         (          edt.asm):00056                 LDA     [GXYPTR]        GOTOXY DEFINED?
202A 2603             (          edt.asm):00057                 BNE     EDT2                              ;YES, ITS OK
202C 7F3005           (          edt.asm):00058                 CLR     WINDOW                            ;SWITCH TO LINE MODE
202F                  (          edt.asm):00059         EDT2
202F A6A0             (          edt.asm):00060                 LDA     ,Y+                               ;GET CHAR
2031 A780             (          edt.asm):00061                 STA     ,X+                               ;SAVE IN BUFFER
2033 810D             (          edt.asm):00062                 CMPA    #$0D                              ;END OF LINE?
2035 26F8             (          edt.asm):00063                 BNE     EDT2                              ;NO, KEEP GOING
2037 6F1F             (          edt.asm):00064                 CLR     -1,X                              ;ZERO THE BUFFER
2039 108E3021         (          edt.asm):00065                 LDY     #NAMBUF                           ;POINT TO NAME
203D 3F               (          edt.asm):00066                 SWI
203E 0A               (          edt.asm):00067                 FCB     10                                ;GET FILENAME
203F 26DC             (          edt.asm):00068                 BNE     ABORT                             ;INVALID, EXIT
                      (          edt.asm):00069         ;* LOAD FILE
2041 3F               (          edt.asm):00070                 SWI
2042 44               (          edt.asm):00071                 FCB     68                                ;DOES IT EXIST
2043 270B             (          edt.asm):00072                 BEQ     EDT3                              ;YES IT DOES
2045 CC2DA9           (          edt.asm):00073                 LDD     #NEWMSG                           ;POINT TO NEW MESSAGE
2048 FD301B           (          edt.asm):00074                 STD     ERRMSG                            ;SAVE IT OUT
204B 8E3298           (          edt.asm):00075                 LDX     #T_BUFF                           ;POINT TO BUFFER
204E 2005             (          edt.asm):00076                 BRA     EDT3A                             ;AND PROCEED
2050                  (          edt.asm):00077         EDT3
2050 8E3298           (          edt.asm):00078                 LDX     #T_BUFF                           ;POINT TO TEXT BUFFER
2053 3F               (          edt.asm):00079                 SWI
2054 35               (          edt.asm):00080                 FCB     53                                ;LOAD FILE
2055                  (          edt.asm):00081         EDT3A
2055 86FF             (          edt.asm):00082                 LDA     #$FF                              ;END OF FILE
2057 A784             (          edt.asm):00083                 STA     ,X                                ;MARK POSITION
                      (          edt.asm):00084         ;* MOVE TO HOME POSITION
2059                  (          edt.asm):00085         EDT4
2059 4F               (          edt.asm):00086                 CLRA                                      ;     ZERO HIGH
205A 5F               (          edt.asm):00087                 CLRB                                      ;     ZERO LOW
205B FD3000           (          edt.asm):00088                 STD     CX                                ;ZERO 'X' AND 'Y'
205E FD3019           (          edt.asm):00089                 STD     NEWPOS                            ;NO RE-POSITION
2061 CC3298           (          edt.asm):00090                 LDD     #T_BUFF                           ;POINT TO TEXT BUFFER
2064 FD300D           (          edt.asm):00091                 STD     SCRTOP                            ;SET START OF SCREEN
2067 FD300F           (          edt.asm):00092                 STD     TXTPOS                            ;SET START OF LINE
206A 7A3004           (          edt.asm):00093                 DEC     REFLAG                            ;SET REFRESH FLAG
                      (          edt.asm):00094         ;* PROMPT FOR AND EXECUTE SCREEN MODE COMMANDS
206D                  (          edt.asm):00095         SCR
206D B63005           (          edt.asm):00096                 LDA     WINDOW                            ;IN WINDOW MODE?
2070 102A0130         (          edt.asm):00097                 LBPL    LINE                              ;LINE MODE COMMAND
2074 FE3019           (          edt.asm):00098                 LDU     NEWPOS                            ;HAS POSITION CHANGED
2077 2708             (          edt.asm):00099                 BEQ     SCR1                              ;NO, ITS OK
2079 BD2B57           (          edt.asm):00100                 JSR     REPOS                             ;REPOSITION TO IT
207C 4F               (          edt.asm):00101                 CLRA                                      ;     ZERO HIGH
207D 5F               (          edt.asm):00102                 CLRB                                      ;     ZERO LOW
207E FD3019           (          edt.asm):00103                 STD     NEWPOS                            ;INSURE NO FURTHER POSITION
2081                  (          edt.asm):00104         SCR1
2081 BD2B0E           (          edt.asm):00105                 JSR     POSITC                            ;POSITION THE CURSOR
2084 F7301D           (          edt.asm):00106                 STB     TEMP                              ;SAVE 'X' FOR LATER
2087 3440             (          edt.asm):00107                 PSHS    U                                 ;SAVE REGS
                      (          edt.asm):00108         ;* UPDATE SCREEN IF R=IRED
2089 B63004           (          edt.asm):00109                 LDA     REFLAG                            ;REFRESH R=IRED?
208C 2703             (          edt.asm):00110                 BEQ     SCR2                              ;NO, ITS OK
208E BD2BAD           (          edt.asm):00111                 JSR     REFALL                            ;REFRESH SCREEN
                      (          edt.asm):00112         ;* WRITE ANY PENDING ERROR MESSAGES
2091                  (          edt.asm):00113         SCR2
2091 BE301B           (          edt.asm):00114                 LDX     ERRMSG                            ;ANY ERROR MESSAGES?
2094 2713             (          edt.asm):00115                 BEQ     SCR3                              ;NO, ITS OK
2096 BD2CB2           (          edt.asm):00116                 JSR     GOTOLST                           ;MOVE TO IT
2099 BD2C9A           (          edt.asm):00117                 JSR     WSO                               ;ENABLE SPECIAL EFFECTS
209C 3F               (          edt.asm):00118                 SWI
209D 17               (          edt.asm):00119                 FCB     23                                ;OUTPUT MESSAGE
209E BD2C9E           (          edt.asm):00120                 JSR     WSE                               ;DISABLE SPECIAL EFFECTS
20A1 BD2C92           (          edt.asm):00121                 JSR     WCD                               ;CLEAR END OF DISPLAY
20A4 4F               (          edt.asm):00122                 CLRA                                      ;     ZERO HIGH
20A5 5F               (          edt.asm):00123                 CLRB                                      ;     ZERO LOW
20A6 FD301B           (          edt.asm):00124                 STD     ERRMSG                            ;RESET ERROR MESSAGE FLAG
20A9                  (          edt.asm):00125         SCR3
20A9 BD2CB7           (          edt.asm):00126                 JSR     GOTOXX                            ;MOVE TO POSITION
20AC 3540             (          edt.asm):00127                 PULS    U                                 ;RESTORE 'U'
                      (          edt.asm):00128         ;* GET A KEY & EXECUTE COMMANDS
20AE                  (          edt.asm):00129         KEY
20AE 10CE3298         (          edt.asm):00130                 LDS     #STACK                            ;FIX STACK
20B2 BD2CE8           (          edt.asm):00131                 JSR     GETKEY                            ;GET A KEY COMMAND
20B5 8181             (          edt.asm):00132                 CMPA    #KDO                              ;DOWN KEY?
20B7 270A             (          edt.asm):00133                 BEQ     KEY1                              ;DON'T RESET
20B9 8180             (          edt.asm):00134                 CMPA    #KUP                              ;UP KEY?
20BB 2706             (          edt.asm):00135                 BEQ     KEY1                              ;DON'T RESET
20BD F6301D           (          edt.asm):00136                 LDB     TEMP                              ;GET 'X' POSITION
20C0 F73000           (          edt.asm):00137                 STB     CX                                ;SAVE ACTUAL 'X'
20C3                  (          edt.asm):00138         KEY1
20C3 3402             (          edt.asm):00139                 PSHS    A                                 ;SAVE CHAR
20C5 F63000           (          edt.asm):00140                 LDB     CX                                ;GET 'X' POSITION
20C8 4F               (          edt.asm):00141                 CLRA                                      ;     ZERO HIGH
20C9 31CB             (          edt.asm):00142                 LEAY    D,U                               ;'Y' = PTR TO CHAR
20CB A6E0             (          edt.asm):00143                 LDA     ,S+                               ;SPECIAL CHAR?
20CD 2A08             (          edt.asm):00144                 BPL     EDTKEY                            ;EDIT KEY (TEXT) CHANGE
20CF 48               (          edt.asm):00145                 LSLA                                      ;     X2 FOR TWO BYTE ENTRIES
20D0 8E2DEC           (          edt.asm):00146                 LDX     #CMDTAB                           ;POINT TO TABLE
20D3 AD96             (          edt.asm):00147                 JSR     [A,X]                             ;EXECUTE COMMAND
20D5 2096             (          edt.asm):00148                 BRA     SCR                               ;GET NEXT COMMAND
                      (          edt.asm):00149         ;* STANDARD INPUT KEY ENTERED, INSERT IT INTO THE TEXT
20D7                  (          edt.asm):00150         EDTKEY
20D7 BD2A90           (          edt.asm):00151                 JSR     EDIT                              ;BEGIN EDIT, Y = PTR TO CHAR
                      (          edt.asm):00152         ;* IF INSERT MODE OR END OF LINE, INSERT
20DA E6A4             (          edt.asm):00153                 LDB     ,Y                                ;GET CHAR
20DC 2B0D             (          edt.asm):00154                 BMI     EDTK1                             ;EOF, DO INSERT
20DE C10D             (          edt.asm):00155                 CMPB    #NL                               ;END OF LINE?
20E0 2709             (          edt.asm):00156                 BEQ     EDTK1                             ;DO INSERT
20E2 810D             (          edt.asm):00157                 CMPA    #NL                               ;NEW LINE?
20E4 2705             (          edt.asm):00158                 BEQ     EDTK1                             ;YES, INSERT
20E6 7D3007           (          edt.asm):00159                 TST     INSFLAG                           ;INSERTING?
20E9 2711             (          edt.asm):00160                 BEQ     EDTK4                             ;DON'T INSERT
                      (          edt.asm):00161         ;* INSERT 1 CHARACTER INTO THE LINE
20EB                  (          edt.asm):00162         EDTK1
20EB 3422             (          edt.asm):00163                 PSHS    A,Y                               ;SAVE IT
20ED                  (          edt.asm):00164         EDTK2
20ED 1F98             (          edt.asm):00165                 TFR     B,A                               ;SAVE CHAR
20EF 3121             (          edt.asm):00166                 LEAY    1,Y                               ;ADVANCE TO NEXT
20F1 E6A4             (          edt.asm):00167                 LDB     ,Y                                ;GET CHAR
20F3 A7A4             (          edt.asm):00168                 STA     ,Y                                ;AND
20F5 2AF6             (          edt.asm):00169                 BPL     EDTK2                             ;DO THEM ALL
20F7 7C300B           (          edt.asm):00170                 INC     EDTLEN                            ;ADVANCE LENGTH
20FA 3522             (          edt.asm):00171                 PULS    A,Y                               ;RESTORE 'Y'
                      (          edt.asm):00172         ;* WRITE THE ENTERED CHARACTER OUT
20FC                  (          edt.asm):00173         EDTK4
20FC A7A4             (          edt.asm):00174                 STA     ,Y                                ;WRITE IN CHAR
20FE 7C3000           (          edt.asm):00175                 INC     CX                                ;ADVANCE 'X' POSITION
2101 810D             (          edt.asm):00176                 CMPA    #NL                               ;NEW LINE ENTERED?
2103 260E             (          edt.asm):00177                 BNE     EDTK5                             ;NO, ITS OK
2105 BD2AD1           (          edt.asm):00178                 JSR     UPDATE                            ;UPDATE THE CHANGES
2108 BD27D3           (          edt.asm):00179                 JSR     REFBOT                            ;REFRESH BOTTOM OF SCREEN
210B 7F3000           (          edt.asm):00180                 CLR     CX                                ;ZERO 'X'
210E BD28A2           (          edt.asm):00181                 JSR     FWDLIN                            ;ADVANCE A LINE
2111 2005             (          edt.asm):00182                 BRA     EDTK6                             ;AND PROCEED
2113                  (          edt.asm):00183         EDTK5
2113 1F23             (          edt.asm):00184                 TFR     Y,U                               ;PTR TO CHAR
2115 BD2BE7           (          edt.asm):00185                 JSR     REFLIN                            ;UPDATE THE LINE
2118                  (          edt.asm):00186         EDTK6
2118 7E206D           (          edt.asm):00187                 JMP     SCR                               ;AND GET NEXT COMMAND
                      (          edt.asm):00188         ;*
                      (          edt.asm):00189         ;* PROMPT FOR & EXECUTE LINE MODE COMMAND
                      (          edt.asm):00190         ;*
211B                  (          edt.asm):00191         ECMD
211B BD2CB2           (          edt.asm):00192                 JSR     GOTOLST                           ;MOVE THERE
211E 3F               (          edt.asm):00193                 SWI
211F 18               (          edt.asm):00194                 FCB     24                                ;OUTPUT TEXT
2120 436F6D6D616E643A (          edt.asm):00195                 FCN     'Command: '
     2000
212A BD2C92           (          edt.asm):00196                 JSR     WCD                               ;CLEAR DISPLAY
212D 8E303A           (          edt.asm):00197                 LDX     #COMMAND        POINT TO COMMAND BUFFER
2130 8D30             (          edt.asm):00198                 BSR     GETLIN                            ;GET INPUT LINE
2132                  (          edt.asm):00199         RCMD
2132 BD2CB2           (          edt.asm):00200                 JSR     GOTOLST                           ;MOVE THERE
2135 BD2C9A           (          edt.asm):00201                 JSR     WSO                               ;ENABLE SPECIAL EFFECTS
2138 7A3006           (          edt.asm):00202                 DEC     VIDEO                             ;SET VIDEO FLAG
213B 8E303A           (          edt.asm):00203                 LDX     #COMMAND        POINT TO COMMAND
213E                  (          edt.asm):00204         RCMD1
213E A680             (          edt.asm):00205                 LDA     ,X+                               ;GET CHAR
2140 2B05             (          edt.asm):00206                 BMI     RCMD2                             ;END OF THE ROAD
2142 BD2C6C           (          edt.asm):00207                 JSR     WRCHR                             ;DISPLAY IT
2145 20F7             (          edt.asm):00208                 BRA     RCMD1                             ;AND PROCEED
2147                  (          edt.asm):00209         RCMD2
2147 BD2C9E           (          edt.asm):00210                 JSR     WSE                               ;END SPECIALS
214A 7F3006           (          edt.asm):00211                 CLR     VIDEO                             ;RESET VIDEO FLAG
214D BD2C92           (          edt.asm):00212                 JSR     WCD                               ;CLEAR IT
2150 BD2AD1           (          edt.asm):00213                 JSR     UPDATE                            ;UPDATE CHANGES
2153 BD2235           (          edt.asm):00214                 JSR     EXEC                              ;EXECUTE COMMAND
2156 FC301B           (          edt.asm):00215                 LDD     ERRMSG                            ;ANY ERRORS
2159 2606             (          edt.asm):00216                 BNE     RCMD3                             ;YES, DON'T OVERWRITE
215B CC2DA8           (          edt.asm):00217                 LDD     #NULLMSG        POINT TO NULL MESSAGE
215E FD301B           (          edt.asm):00218                 STD     ERRMSG                            ;SAVE IT
2161                  (          edt.asm):00219         RCMD3
2161 39               (          edt.asm):00220                 RTS
                      (          edt.asm):00221         ;*
                      (          edt.asm):00222         ;* GET A LINE OF INPUT
                      (          edt.asm):00223         ;*
2162                  (          edt.asm):00224         GETLIN
2162 5F               (          edt.asm):00225                 CLRB                                      ;     ZERO COUNT
2163                  (          edt.asm):00226         GETL1
2163 B63005           (          edt.asm):00227                 LDA     WINDOW                            ;WINDOW MODE
2166 2A27             (          edt.asm):00228                 BPL     GETL4                             ;NO, LINE BY LINE
2168 BD2CE8           (          edt.asm):00229                 JSR     GETKEY                            ;GET A KEY
216B 818B             (          edt.asm):00230                 CMPA    #KDP                              ;DELETE PREVIOUS
216D 260B             (          edt.asm):00231                 BNE     GETL2                             ;NO, ITS OK
216F                  (          edt.asm):00232         GETL1A
216F 5A               (          edt.asm):00233                 DECB                                      ;     REDUCE COUNT
2170 2BF0             (          edt.asm):00234                 BMI     GETLIN                            ;INVALID, STOP
2172 3F               (          edt.asm):00235                 SWI
2173 18               (          edt.asm):00236                 FCB     24                                ;OUTPUT STRING
2174 08200800         (          edt.asm):00237                 FCB     8,' ',8,0       ERASE CHAR
2178 20E9             (          edt.asm):00238                 BRA     GETL1                             ;AND GET NEXT
217A                  (          edt.asm):00239         GETL2
217A 818D             (          edt.asm):00240                 CMPA    #KCM                              ;COMMAND KEY
217C 270C             (          edt.asm):00241                 BEQ     GETL3                             ;AND SAVE IT
217E A785             (          edt.asm):00242                 STA     B,X                               ;WRITE CHAR
2180 2BE1             (          edt.asm):00243                 BMI     GETL1                             ;IGNORE IF SPECIAL
2182 5C               (          edt.asm):00244                 INCB                                      ;     ADVANCE B
2183 BD2C6C           (          edt.asm):00245                 JSR     WRCHR                             ;DISPLAY IT
2186 20DB             (          edt.asm):00246                 BRA     GETL1                             ;AND PROCEED
2188                  (          edt.asm):00247         GETL2A
2188 3F               (          edt.asm):00248                 SWI
2189 16               (          edt.asm):00249                 FCB     22                                ;NEW LINE
218A                  (          edt.asm):00250         GETL3
218A 86FF             (          edt.asm):00251                 LDA     #-1                               ;GET EOL MARKER
218C A785             (          edt.asm):00252                 STA     B,X                               ;WRITE EOL MARKER
218E 39               (          edt.asm):00253                 RTS
                      (          edt.asm):00254         ;* LINE BY LINE INPUT
218F                  (          edt.asm):00255         GETL4
218F 3F               (          edt.asm):00256                 SWI
2190 22               (          edt.asm):00257                 FCB     34                                ;READ A CHAR
2191 8108             (          edt.asm):00258                 CMPA    #8                                ;BACKSPACE?
2193 27DA             (          edt.asm):00259                 BEQ     GETL1A                            ;YES, HANDLE IT
2195 817F             (          edt.asm):00260                 CMPA    #$7F                              ;DELETE
2197 27D6             (          edt.asm):00261                 BEQ     GETL1A                            ;YES, HANDLE IT
2199 810D             (          edt.asm):00262                 CMPA    #$0D                              ;NEW LINE
219B 27EB             (          edt.asm):00263                 BEQ     GETL2A                            ;SPECIAL CASE
219D A785             (          edt.asm):00264                 STA     B,X                               ;WRITE IT OUT
219F 5C               (          edt.asm):00265                 INCB                                      ;     ADVANCE COUNT
21A0 3F               (          edt.asm):00266                 SWI
21A1 21               (          edt.asm):00267                 FCB     33                                ;DISPLAY IT
21A2 20EB             (          edt.asm):00268                 BRA     GETL4                             ;AND PROCEED
                      (          edt.asm):00269         ;*
                      (          edt.asm):00270         ;* EXECUTE LINE MODE COMMANDS
                      (          edt.asm):00271         ;*
21A4                  (          edt.asm):00272         LINE
21A4 BE301B           (          edt.asm):00273                 LDX     ERRMSG                            ;GET ERROR MESSAGE
21A7 2709             (          edt.asm):00274                 BEQ     LINE1                             ;NONE
21A9 3F               (          edt.asm):00275                 SWI
21AA 17               (          edt.asm):00276                 FCB     23                                ;DISPLAY IT
21AB 3F               (          edt.asm):00277                 SWI
21AC 16               (          edt.asm):00278                 FCB     22                                ;NEW LINE
21AD 4F               (          edt.asm):00279                 CLRA                                      ;     ZERO HIGH
21AE 5F               (          edt.asm):00280                 CLRB                                      ;     ZERO LOW
21AF FD301B           (          edt.asm):00281                 STD     ERRMSG                            ;RE-WRITE IT
21B2                  (          edt.asm):00282         LINE1
21B2 FE3019           (          edt.asm):00283                 LDU     NEWPOS                            ;HAS POSITION CHANGED
21B5 270A             (          edt.asm):00284                 BEQ     LINE2                             ;NO, ITS OK
21B7 BD2B57           (          edt.asm):00285                 JSR     REPOS                             ;REPOSITION TO IT
21BA 4F               (          edt.asm):00286                 CLRA                                      ;     ZERO HIGH
21BB 5F               (          edt.asm):00287                 CLRB                                      ;     ZERO LOW
21BC FD3019           (          edt.asm):00288                 STD     NEWPOS                            ;INSURE NO FURTHER POSITION
21BF 2005             (          edt.asm):00289                 BRA     LINE3                             ;AND PROCEED
21C1                  (          edt.asm):00290         LINE2
21C1 B63004           (          edt.asm):00291                 LDA     REFLAG                            ;DO WE REFRESH
21C4 271C             (          edt.asm):00292                 BEQ     LINE7                             ;NO, ITS OK
21C6                  (          edt.asm):00293         LINE3
21C6 FE300F           (          edt.asm):00294                 LDU     TXTPOS                            ;GET TEXT POSITION
21C9                  (          edt.asm):00295         LINE4
21C9 A6C0             (          edt.asm):00296                 LDA     ,U+                               ;GET CHAR
21CB 2B08             (          edt.asm):00297                 BMI     LINE5                             ;END OF FILE
21CD 810D             (          edt.asm):00298                 CMPA    #NL                               ;NEW LINE
21CF 270C             (          edt.asm):00299                 BEQ     LINE6                             ;YES, EXIT
21D1 3F               (          edt.asm):00300                 SWI
21D2 21               (          edt.asm):00301                 FCB     33                                ;DISPLAY
21D3 20F4             (          edt.asm):00302                 BRA     LINE4                             ;AND PROCEED
21D5                  (          edt.asm):00303         LINE5
21D5 3F               (          edt.asm):00304                 SWI
21D6 18               (          edt.asm):00305                 FCB     24                                ;DISPLAY MESSAGE
21D7 2A454F462A00     (          edt.asm):00306                 FCN     '*EOF*'                           ;INDICATE END OF FILE
21DD                  (          edt.asm):00307         LINE6
21DD 3F               (          edt.asm):00308                 SWI
21DE 16               (          edt.asm):00309                 FCB     22                                ;NEW LINE
21DF 7F3004           (          edt.asm):00310                 CLR     REFLAG                            ;ZERO IT
21E2                  (          edt.asm):00311         LINE7
21E2 3F               (          edt.asm):00312                 SWI
21E3 18               (          edt.asm):00313                 FCB     24                                ;PROMPT
21E4 3B2A2000         (          edt.asm):00314                 FCN     ';* '
21E8 8E303A           (          edt.asm):00315                 LDX     #COMMAND        POINT TO COMMAND BUFFER
21EB BD2162           (          edt.asm):00316                 JSR     GETLIN                            ;GET INPUT LINE
21EE 8D45             (          edt.asm):00317                 BSR     EXEC                              ;EXECUTE COMMAND
21F0 7E206D           (          edt.asm):00318                 JMP     SCR                               ;AND PROCEED
                      (          edt.asm):00319         ;*
                      (          edt.asm):00320         ;* TEST FOR NUMERIC DIGIT
                      (          edt.asm):00321         ;*
21F3                  (          edt.asm):00322         ISDIGIT
21F3 8130             (          edt.asm):00323                 CMPA    #'0'                              ;IS IT DIGIT?
21F5 2506             (          edt.asm):00324                 BLO     ISDIG1                            ;NO, ITS NOT
21F7 8139             (          edt.asm):00325                 CMPA    #'9'                              ;TEST AGAIN
21F9 2202             (          edt.asm):00326                 BHI     ISDIG1                            ;ITS NOT
21FB 1A04             (          edt.asm):00327                 ORCC    #%00000100      SET 'Z', INDICATE FOUND
21FD                  (          edt.asm):00328         ISDIG1
21FD 39               (          edt.asm):00329                 RTS
                      (          edt.asm):00330         ;*
                      (          edt.asm):00331         ;* GET NUMBER FROMLINE(Y)
                      (          edt.asm):00332         ;*
21FE                  (          edt.asm):00333         GETNUM
21FE BD222C           (          edt.asm):00334                 JSR     SKIP                              ;ADVANCE TO NON-BLANK
2201 8E0000           (          edt.asm):00335                 LDX     #0                                ;BEGIN WITH ZERO
2204                  (          edt.asm):00336         GETN1
2204 A6A4             (          edt.asm):00337                 LDA     ,Y                                ;GET NEXT
2206 8DEB             (          edt.asm):00338                 BSR     ISDIGIT                           ;IS IT A DIGIT?
2208 2622             (          edt.asm):00339                 BNE     SKIP                              ;NO, EXIT
220A CC000A           (          edt.asm):00340                 LDD     #10                               ;X 10
220D 3F               (          edt.asm):00341                 SWI
220E 6B               (          edt.asm):00342                 FCB     107                               ;DO MUTIPLY
220F 1F01             (          edt.asm):00343                 TFR     D,X                               ;SWAP BACK
2211 E6A0             (          edt.asm):00344                 LDB     ,Y+                               ;RESTORE VALUE
2213 C030             (          edt.asm):00345                 SUBB    #'0'                              ;CONVERT
2215 3A               (          edt.asm):00346                 ABX                                       ;     INCLUDE
2216 20EC             (          edt.asm):00347                 BRA     GETN1                             ;AND PROCEED
                      (          edt.asm):00348         ;*
                      (          edt.asm):00349         ;* LOOKUP THE LINE BY NUMBER(X)
                      (          edt.asm):00350         ;*
2218                  (          edt.asm):00351         FINDLIN
2218 CE3298           (          edt.asm):00352                 LDU     #T_BUFF                           ;POINT TO TEXT BUFFER
221B                  (          edt.asm):00353         FINDL1
221B 301F             (          edt.asm):00354                 LEAX    -1,X                              ;REDUCE COUNT
221D 270C             (          edt.asm):00355                 BEQ     FINDL4                            ;WE HAVE IT
221F                  (          edt.asm):00356         FINDL2
221F A6C0             (          edt.asm):00357                 LDA     ,U+                               ;GET CHAR
2221 2B06             (          edt.asm):00358                 BMI     FINDL3                            ;END, EXIT
2223 810D             (          edt.asm):00359                 CMPA    #NL                               ;NEW-LINE
2225 26F8             (          edt.asm):00360                 BNE     FINDL2                            ;WAIT FOR IT
2227 20F2             (          edt.asm):00361                 BRA     FINDL1                            ;AND PROCEED
2229                  (          edt.asm):00362         FINDL3
2229 335F             (          edt.asm):00363                 LEAU    -1,U                              ;BACKUP
222B                  (          edt.asm):00364         FINDL4
222B 39               (          edt.asm):00365                 RTS
                      (          edt.asm):00366         ;*
                      (          edt.asm):00367         ;* SKIP AHEAD TO NON-BLANK
                      (          edt.asm):00368         ;*
222C                  (          edt.asm):00369         SKIP
222C A6A0             (          edt.asm):00370                 LDA     ,Y+                               ;GET CHAR
222E 8120             (          edt.asm):00371                 CMPA    #' '                              ;BLANK?
2230 27FA             (          edt.asm):00372                 BEQ     SKIP                              ;KEEP LOOKING
2232 A6A2             (          edt.asm):00373                 LDA     ,-Y                               ;SET FLAGS AGAIN
2234 39               (          edt.asm):00374                 RTS
                      (          edt.asm):00375         ;*
                      (          edt.asm):00376         ;* EXECUTE A LINE MODE COMMAND(Y)
                      (          edt.asm):00377         ;*
2235                  (          edt.asm):00378         EXEC
2235 108E303A         (          edt.asm):00379                 LDY     #COMMAND        POINT TO COMMAND BUFFER
2239 7F3015           (          edt.asm):00380                 CLR     START                             ;ZERO FIRST PARM FLAG
223C 7F301F           (          edt.asm):00381                 CLR     TEMP+2                            ;ZERO RANGE GIVEN FLAG
223F 7F3020           (          edt.asm):00382                 CLR     TEMP+3                            ;ZERO TAGGS USED FLAG
2242                  (          edt.asm):00383         GETRNG
2242 8DE8             (          edt.asm):00384                 BSR     SKIP                              ;ADVANCE POSITIN
                      (          edt.asm):00385         ;* NUMBER, LOOKUP LINE
2244 8DAD             (          edt.asm):00386                 BSR     ISDIGIT                           ;IS IT A NUMBER
2246 2606             (          edt.asm):00387                 BNE     GETRN1                            ;NOT A NUMBER
2248 8DB4             (          edt.asm):00388                 BSR     GETNUM                            ;GET LINE NUMBER
224A 8DCC             (          edt.asm):00389                 BSR     FINDLIN                           ;LOCATE LINE POSITION
224C 2038             (          edt.asm):00390                 BRA     GETRN5                            ;AND PROCEED
                      (          edt.asm):00391         ;* '=' TAGGED LINES
224E                  (          edt.asm):00392         GETRN1
224E 3121             (          edt.asm):00393                 LEAY    1,Y                               ;ADVANCE
2250 813D             (          edt.asm):00394                 CMPA    #'='                              ;TAGGED LINES?
2252 2614             (          edt.asm):00395                 BNE     GETRN2                            ;NO, TRY NEXT
2254 7A3020           (          edt.asm):00396                 DEC     TEMP+3                            ;INDICATE TAGGS USED
2257 FE3011           (          edt.asm):00397                 LDU     TAG                               ;GET FIRST TAG
225A 2705             (          edt.asm):00398                 BEQ     GETRN1A                           ;NO TAGGS DEFINED
225C BE3013           (          edt.asm):00399                 LDX     TAG1                              ;'X' = EOT
225F 2027             (          edt.asm):00400                 BRA     GETRN5A                           ;AND PROCEED
2261                  (          edt.asm):00401         GETRN1A
2261 CC2D71           (          edt.asm):00402                 LDD     #NOTAGG                           ;POINT TO MESSAGE
2264 FD301B           (          edt.asm):00403                 STD     ERRMSG                            ;SET IT UP
2267 39               (          edt.asm):00404                 RTS                                       ;     EXIT
                      (          edt.asm):00405         ;* '/' WHOLE FILE
2268                  (          edt.asm):00406         GETRN2
2268 812F             (          edt.asm):00407                 CMPA    #'/'                              ;ENTIRE FILE?
226A 260A             (          edt.asm):00408                 BNE     GETRN3                            ;NO, TRY NEXT
226C BD29AC           (          edt.asm):00409                 JSR     FINDEOF                           ;LOCATE END OF FILE
226F 1F31             (          edt.asm):00410                 TFR     U,X                               ;'X' = EOT
2271 CE3298           (          edt.asm):00411                 LDU     #T_BUFF                           ;GET START OF BUFFER
2274 2012             (          edt.asm):00412                 BRA     GETRN5A                           ;AND PROCEED
                      (          edt.asm):00413         ;* ';*', CURRENT LINE
2276                  (          edt.asm):00414         GETRN3
2276 FE300F           (          edt.asm):00415                 LDU     TXTPOS                            ;GET TEXT POSITION
2279 812A             (          edt.asm):00416                 CMPA    #'*'                              ;CURRENT LINE
227B 2706             (          edt.asm):00417                 BEQ     GETRN4                            ;YES, HANDLE IT
227D 1F31             (          edt.asm):00418                 TFR     U,X                               ;'X' = VALUE ALSO
227F 313F             (          edt.asm):00419                 LEAY    -1,Y                              ;BACKUP TO IT
2281 2008             (          edt.asm):00420                 BRA     GETRN5B                           ;AND PROCEED
2283                  (          edt.asm):00421         GETRN4
2283 FE300F           (          edt.asm):00422                 LDU     TXTPOS                            ;GET POSITION
2286                  (          edt.asm):00423         GETRN5
2286 1F31             (          edt.asm):00424                 TFR     U,X                               ;'X' = POSITION
2288                  (          edt.asm):00425         GETRN5A
2288 7A301F           (          edt.asm):00426                 DEC     TEMP+2                            ;INDICATE OPERAND RECEIVED
228B                  (          edt.asm):00427         GETRN5B
228B BD222C           (          edt.asm):00428                 JSR     SKIP                              ;SKIP BLANKS
228E A6A0             (          edt.asm):00429                 LDA     ,Y+                               ;GET NEXT CHAR
                      (          edt.asm):00430         ;* TEST FOR ADD OF SUBTRACT FROM RANGE
2290 812B             (          edt.asm):00431                 CMPA    #'+'                              ;ADDITION?
2292 2613             (          edt.asm):00432                 BNE     GETRN7                            ;NO, ITS OK
2294 BD21FE           (          edt.asm):00433                 JSR     GETNUM                            ;GET NUMBER
2297                  (          edt.asm):00434         GETRN6
2297 A6C4             (          edt.asm):00435                 LDA     ,U                                ;GET CHAR
2299 2B27             (          edt.asm):00436                 BMI     GETRN9                            ;EOF, EXIT
229B 3341             (          edt.asm):00437                 LEAU    1,U                               ;ADVANCE
229D 810D             (          edt.asm):00438                 CMPA    #NL                               ;NEWLINE
229F 26F6             (          edt.asm):00439                 BNE     GETRN6                            ;NOT IT
22A1 301F             (          edt.asm):00440                 LEAX    -1,X                              ;REDUCE COUNT
22A3 26F2             (          edt.asm):00441                 BNE     GETRN6                            ;KEEP TRYING
22A5 201B             (          edt.asm):00442                 BRA     GETRN9                            ;CONTINUE
                      (          edt.asm):00443         ;* TEST FOR SUBTRACT FROM RANGE
22A7                  (          edt.asm):00444         GETRN7
22A7 812D             (          edt.asm):00445                 CMPA    #'-'                              ;SUBTRACTION?
22A9 261E             (          edt.asm):00446                 BNE     GETRN10                           ;NO, ITS OK
22AB BD21FE           (          edt.asm):00447                 JSR     GETNUM                            ;GET NUMBER
22AE 3001             (          edt.asm):00448                 LEAX    1,X                               ;ADVANCE FOR LATER
22B0                  (          edt.asm):00449         GETRN8
22B0 11833298         (          edt.asm):00450                 CMPU    #T_BUFF                           ;ARE WE UNDER?
22B4 230C             (          edt.asm):00451                 BLS     GETRN9                            ;YES, EXIT
22B6 A6C2             (          edt.asm):00452                 LDA     ,-U                               ;GET CHAR
22B8 810D             (          edt.asm):00453                 CMPA    #NL                               ;NEW LINE?
22BA 26F4             (          edt.asm):00454                 BNE     GETRN8                            ;KEEP LOOKING
22BC 301F             (          edt.asm):00455                 LEAX    -1,X                              ;BACKUP COUNT
22BE 26F0             (          edt.asm):00456                 BNE     GETRN8                            ;KEEP GOING
22C0 3341             (          edt.asm):00457                 LEAU    1,U                               ;BACKUP TO IT
22C2                  (          edt.asm):00458         GETRN9
22C2 1F31             (          edt.asm):00459                 TFR     U,X                               ;SET NEW END OF RANGE
22C4 7A301F           (          edt.asm):00460                 DEC     TEMP+2                            ;INDICATE OPERAND RECEIVED
22C7 A6A0             (          edt.asm):00461                 LDA     ,Y+                               ;GET NEXT COMMAND
22C9                  (          edt.asm):00462         GETRN10
22C9 F63015           (          edt.asm):00463                 LDB     START                             ;BEGINNING RANGE ALREADY GIVEN
22CC 2605             (          edt.asm):00464                 BNE     GETRN11                           ;DON'T SAVE
22CE FF3015           (          edt.asm):00465                 STU     START                             ;SET STARTING RANGE
22D1 1F13             (          edt.asm):00466                 TFR     X,U                               ;'U' = END ADDRESS
22D3                  (          edt.asm):00467         GETRN11
22D3 FF3017           (          edt.asm):00468                 STU     END                               ;SET ENDING RANGE
22D6 812C             (          edt.asm):00469                 CMPA    #','                              ;RANGE SEPERATOR?
22D8 1027FF66         (          edt.asm):00470                 LBEQ    GETRNG                            ;NO, KEEP GOING
22DC FE3015           (          edt.asm):00471                 LDU     START                             ;GET FIRST IN RANGE
22DF BE3017           (          edt.asm):00472                 LDX     END                               ;GET LAST IN RANGE
22E2 11B33017         (          edt.asm):00473                 CMPU    END                               ;ARE WE OVER?
22E6 2305             (          edt.asm):00474                 BLS     GETRN12                           ;NO, ITS OK
22E8 1E31             (          edt.asm):00475                 EXG     U,X                               ;SWAP
22EA FF3015           (          edt.asm):00476                 STU     START                             ;RESAVE
22ED                  (          edt.asm):00477         GETRN12
22ED E684             (          edt.asm):00478                 LDB     ,X                                ;GET CHAR
22EF 2B06             (          edt.asm):00479                 BMI     GETRN13                           ;EOF, EXIT
22F1 3001             (          edt.asm):00480                 LEAX    1,X                               ;ADVANCE
22F3 C10D             (          edt.asm):00481                 CMPB    #NL                               ;NEW LINE
22F5 26F6             (          edt.asm):00482                 BNE     GETRN12                           ;KEP GOING
22F7                  (          edt.asm):00483         GETRN13
22F7 BF3017           (          edt.asm):00484                 STX     END                               ;AND PROCEED
                      (          edt.asm):00485         ;* WE HAVE COMMAND CHARACTER, PROCEED
22FA                  (          edt.asm):00486         DOCMD
22FA 8D17             (          edt.asm):00487                 BSR     TOUPPER                           ;INSURE UPPERCASE
22FC 4D               (          edt.asm):00488                 TSTA                                      ;     NULL COMMAND
22FD 2A1F             (          edt.asm):00489                 BPL     DOCM1                             ;NO, TRY NEXT
22FF FF3019           (          edt.asm):00490                 STU     NEWPOS                            ;REPOSITION
                      (          edt.asm):00491         ;* EXIT BACK TO CALLER
2302                  (          edt.asm):00492         DOQUIT
2302 B63020           (          edt.asm):00493                 LDA     TEMP+3                            ;TAGGS USED?
2305 270B             (          edt.asm):00494                 BEQ     DOQUI1                            ;NO, ITS OK
2307 4F               (          edt.asm):00495                 CLRA                                      ;     ZERO HIGH
2308 5F               (          edt.asm):00496                 CLRB                                      ;     ZERO LOW
2309 FD3011           (          edt.asm):00497                 STD     TAG                               ;ZERO TAG START
230C FD3013           (          edt.asm):00498                 STD     TAG1                              ;ZERO TAG END
230F 7A3004           (          edt.asm):00499                 DEC     REFLAG                            ;INSURE REFRESH
2312                  (          edt.asm):00500         DOQUI1
2312 39               (          edt.asm):00501                 RTS
                      (          edt.asm):00502         ;* CONVERT CHAR IN A TO UPPERCASE
2313                  (          edt.asm):00503         TOUPPER
2313 8161             (          edt.asm):00504                 CMPA    #'a'                              ;LOWER?
2315 25FB             (          edt.asm):00505                 BLO     DOQUI1                            ;NO, ITS OK
2317 817A             (          edt.asm):00506                 CMPA    #'z'                              ;LOWER?
2319 22F7             (          edt.asm):00507                 BHI     DOQUI1                            ;NO, ITS OK
231B 845F             (          edt.asm):00508                 ANDA    #$5F                              ;CONVERT
231D 39               (          edt.asm):00509                 RTS
                      (          edt.asm):00510         ;* 'Q' QUIT COMMAND
231E                  (          edt.asm):00511         DOCM1
231E 8151             (          edt.asm):00512                 CMPA    #'Q'                              ;IS IT QUIT?
2320 2623             (          edt.asm):00513                 BNE     DOCM2                             ;NO, ITS NOT
2322 A6A4             (          edt.asm):00514                 LDA     ,Y                                ;GET NEXT CHAR
2324 8DED             (          edt.asm):00515                 BSR     TOUPPER                           ;INSURE UPPERCASE
2326 8151             (          edt.asm):00516                 CMPA    #'Q'                              ;FORCE QUIT?
2328 2710             (          edt.asm):00517                 BEQ     DOCM1A                            ;IF SO, NO TEST
232A B6300A           (          edt.asm):00518                 LDA     FCHANGE                           ;HAS FILE CHANGED
232D 270B             (          edt.asm):00519                 BEQ     DOCM1A                            ;NO PROBLEM
232F CC2DC3           (          edt.asm):00520                 LDD     #FCHMSG                           ;INDICATE FILE CHANGED
2332 FD301B           (          edt.asm):00521                 STD     ERRMSG                            ;SAVE IT
2335 39               (          edt.asm):00522                 RTS
                      (          edt.asm):00523         ;* GET HERE FROM E'X'IT COMMAND, CLOSE FILE & TERMINATE
2336                  (          edt.asm):00524         DOEXIT
2336 3F               (          edt.asm):00525                 SWI
2337 39               (          edt.asm):00526                 FCB     57                                ;CLOSE FILE
2338 3F               (          edt.asm):00527                 SWI
2339 56               (          edt.asm):00528                 FCB     86                                ;FLUSH DISK
                      (          edt.asm):00529         ;* PERFORM VIDEO CLEANUP AND EXIT
233A                  (          edt.asm):00530         DOCM1A
233A B63005           (          edt.asm):00531                 LDA     WINDOW                            ;WINDOW MODE
233D 2A03             (          edt.asm):00532                 BPL     DOCM1B                            ;NO, DON'T CLEAR
233F BD2C8E           (          edt.asm):00533                 JSR     WCL                               ;CLEAR SCREEN
2342                  (          edt.asm):00534         DOCM1B
2342 4F               (          edt.asm):00535                 CLRA                                      ;     ZERO RETURN CODE
2343 3F               (          edt.asm):00536                 SWI
2344 00               (          edt.asm):00537                 FCB     0                                 ;GO HOME
                      (          edt.asm):00538         ;* '?' LOCATE COMMAND
2345                  (          edt.asm):00539         DOCM2
2345 813F             (          edt.asm):00540                 CMPA    #'?'                              ;FIND COMMAND?
2347 2645             (          edt.asm):00541                 BNE     DOCM3                             ;NO, TRY NEXT
2349 1F21             (          edt.asm):00542                 TFR     Y,X                               ;'X' = PTR TO SEARCH STRING
234B B6301F           (          edt.asm):00543                 LDA     TEMP+2                            ;DEFAULT?
234E 260F             (          edt.asm):00544                 BNE     DOCM2A                            ;NO, ITS OK
2350 BD29AC           (          edt.asm):00545                 JSR     FINDEOF                           ;LOCATE END OF FILE
2353 FF3017           (          edt.asm):00546                 STU     END                               ;RESET END
2356 FE3015           (          edt.asm):00547                 LDU     START                             ;GET START BACK
2359 F63000           (          edt.asm):00548                 LDB     CX                                ;GET 'X'
235C 5C               (          edt.asm):00549                 INCB                                      ;     ADVANCE
235D 33CB             (          edt.asm):00550                 LEAU    D,U                               ;OFFSET TO IT
                      (          edt.asm):00551         ;* LOOK FOR THE DATA
235F                  (          edt.asm):00552         DOCM2A
235F 11B33017         (          edt.asm):00553                 CMPU    END                               ;ARE WE OVER?
2363 2413             (          edt.asm):00554                 BHS     DOCM2E                            ;YES, ERROR
2365 8D18             (          edt.asm):00555                 BSR     PMATCH                            ;DO WE HAVE A PARTIAL MATCH
2367 2606             (          edt.asm):00556                 BNE     DOCM2C                            ;DIDN'T FIND
2369 FF3019           (          edt.asm):00557                 STU     NEWPOS                            ;MOVE TO IT
236C                  (          edt.asm):00558         DOCM2B
236C 7E2302           (          edt.asm):00559                 JMP     DOQUIT                            ;EXIT
236F                  (          edt.asm):00560         DOCM2C
236F 3341             (          edt.asm):00561                 LEAU    1,U                               ;SKIP TO NEXT
2371 20EC             (          edt.asm):00562                 BRA     DOCM2A                            ;ADVANCE
2373                  (          edt.asm):00563         DOCM2D
2373 B63004           (          edt.asm):00564                 LDA     REFLAG                            ;DID WE FIND ANY?
2376 26F4             (          edt.asm):00565                 BNE     DOCM2B                            ;YES, A-OK
2378                  (          edt.asm):00566         DOCM2E
2378 CC2D81           (          edt.asm):00567                 LDD     #NOTFND                           ;POINT TO ERROR
237B FD301B           (          edt.asm):00568                 STD     ERRMSG                            ;INDICTE NOT FOUND
237E 39               (          edt.asm):00569                 RTS
                      (          edt.asm):00570         ;* TEST FOR STRING(U) BEGINNING WITH STRING(X)
237F                  (          edt.asm):00571         PMATCH
237F 3450             (          edt.asm):00572                 PSHS    X,U                               ;SAVE REGS
2381                  (          edt.asm):00573         PMAT1
2381 A680             (          edt.asm):00574                 LDA     ,X+                               ;GET CHAR
2383 2B06             (          edt.asm):00575                 BMI     PMAT2                             ;WE FOUND
2385 A1C0             (          edt.asm):00576                 CMPA    ,U+                               ;DO IT MATCH
2387 27F8             (          edt.asm):00577                 BEQ     PMAT1                             ;YES
2389 35D0             (          edt.asm):00578                 PULS    X,U,PC                            ;RESTORE & RETURN
238B                  (          edt.asm):00579         PMAT2
238B 4F               (          edt.asm):00580                 CLRA                                      ;     SET 'Z'
238C 35D0             (          edt.asm):00581                 PULS    X,U,PC                            ;RESTORE & RETURN
                      (          edt.asm):00582         ;* 'S'UBSTITUTE COMMAND
238E                  (          edt.asm):00583         DOCM3
238E 8153             (          edt.asm):00584                 CMPA    #'S'                              ;SUBSTITUTE?
2390 267C             (          edt.asm):00585                 BNE     DOCM4                             ;NO, TRY NEXT
2392 A6A0             (          edt.asm):00586                 LDA     ,Y+                               ;GET DELIMITER
2394 2B6D             (          edt.asm):00587                 BMI     DOCM3I                            ;FORMAT ERROR
2396 B7301D           (          edt.asm):00588                 STA     TEMP                              ;SAVE FOR LATER
                      (          edt.asm):00589         ;* PARSE OFF THE SEARCH STRING
2399 8E306C           (          edt.asm):00590                 LDX     #E_BUFF                           ;USE EDIT BUFFER
239C 5F               (          edt.asm):00591                 CLRB                                      ;     ZERO COUNT
239D                  (          edt.asm):00592         DOCM3A
239D A6A0             (          edt.asm):00593                 LDA     ,Y+                               ;GET NEXT CHAR
239F 2B62             (          edt.asm):00594                 BMI     DOCM3I                            ;FORMAT ERROR
23A1 B1301D           (          edt.asm):00595                 CMPA    TEMP                              ;DO IT MATCH?
23A4 2705             (          edt.asm):00596                 BEQ     DOCM3B                            ;YES, IT DOES
23A6 A780             (          edt.asm):00597                 STA     ,X+                               ;WRITE IT OUT
23A8 5C               (          edt.asm):00598                 INCB                                      ;     ADVANCE
23A9 20F2             (          edt.asm):00599                 BRA     DOCM3A                            ;CONTINUE
23AB                  (          edt.asm):00600         DOCM3B
23AB 86FF             (          edt.asm):00601                 LDA     #-1                               ;EOF MARKER
23AD A784             (          edt.asm):00602                 STA     ,X                                ;WRITE IT
23AF F7301D           (          edt.asm):00603                 STB     TEMP                              ;SAVE LENGTH
23B2 274F             (          edt.asm):00604                 BEQ     DOCM3I                            ;FORMAT ERROR
                      (          edt.asm):00605         ;* LOCATE THE NEXT OCCURANCE OF THE TEXT
23B4 8E306C           (          edt.asm):00606                 LDX     #E_BUFF                           ;RESET TO BUFFER
23B7                  (          edt.asm):00607         DOCM3C
23B7 11B33017         (          edt.asm):00608                 CMPU    END                               ;ARE WE PAST END?
23BB 24B6             (          edt.asm):00609                 BHS     DOCM2D                            ;YES, EXIT
23BD 8DC0             (          edt.asm):00610                 BSR     PMATCH                            ;DO IT MATCH?
23BF 2649             (          edt.asm):00611                 BNE     DOCM3J                            ;NO, ADVANCE
                      (          edt.asm):00612         ;* WE FOUND A STRING, SUBSTITUTE
23C1 FF3019           (          edt.asm):00613                 STU     NEWPOS                            ;NEW POSITION TO MOVE TO
23C4 3472             (          edt.asm):00614                 PSHS    A,X,Y,U                           ;SAVE REGS
23C6 C6FF             (          edt.asm):00615                 LDB     #-1                               ;START WITH -1
23C8                  (          edt.asm):00616         DOCM3D
23C8 5C               (          edt.asm):00617                 INCB                                      ;     ADVANCE COUNT
23C9 A6A0             (          edt.asm):00618                 LDA     ,Y+                               ;GET CHAR
23CB 2AFB             (          edt.asm):00619                 BPL     DOCM3D                            ;DO TILL END
23CD                  (          edt.asm):00620         DOCM3E
23CD B7300A           (          edt.asm):00621                 STA     FCHANGE                           ;INDICATE FILE CHANGED
23D0 B73004           (          edt.asm):00622                 STA     REFLAG                            ;INDICATE RFRESH R=IRED
23D3 E7E4             (          edt.asm):00623                 STB     ,S                                ;SAVE LENGTH ON STACK
23D5 4F               (          edt.asm):00624                 CLRA                                      ;     ZERO HIGH
23D6 1F02             (          edt.asm):00625                 TFR     D,Y                               ;'Y' = LENGTH OF SUB STRING
23D8 AE63             (          edt.asm):00626                 LDX     3,S                               ;GET PTR BACK
23DA F0301D           (          edt.asm):00627                 SUBB    TEMP                              ;B = SUB - SEARCH
23DD 271B             (          edt.asm):00628                 BEQ     DOCM3G                            ;SAME LENGTH
23DF 250B             (          edt.asm):00629                 BLO     DOCM3F                            ;WE HAVE TO DELETE
                      (          edt.asm):00630         ;* SUBSTITUTE TEXT IS LONGER, INSERT INTO FILE
23E1 BD29B9           (          edt.asm):00631                 JSR     INSERT                            ;DO INSERT
23E4 F33017           (          edt.asm):00632                 ADDD    END                               ;ADVANCE END BY # INSERTED
23E7 FD3017           (          edt.asm):00633                 STD     END                               ;AND RESAVE
23EA 2011             (          edt.asm):00634                 BRA     DOCM3H                            ;AND CONTINUE
                      (          edt.asm):00635         ;* SUBSTITUTE TEXT IS SHORTER, DELETE FROM FILE
23EC                  (          edt.asm):00636         DOCM3F
23EC 50               (          edt.asm):00637                 NEGB                                      ;     CALCULATE DIFFERENCE
23ED BD2A33           (          edt.asm):00638                 JSR     DELETE                            ;DELETE THE DATA
23F0 3406             (          edt.asm):00639                 PSHS    A,B                               ;SAVE
23F2 FC3017           (          edt.asm):00640                 LDD     END                               ;GET END
23F5 A3E1             (          edt.asm):00641                 SUBD    ,S++                              ;DO SUBTRACT
23F7 FD3017           (          edt.asm):00642                 STD     END                               ;RESAVE
23FA                  (          edt.asm):00643         DOCM3G
23FA BD2A21           (          edt.asm):00644                 JSR     COPY                              ;PERFORM COPY
23FD                  (          edt.asm):00645         DOCM3H
23FD 3572             (          edt.asm):00646                 PULS    A,X,Y,U                           ;RESTORE REG'S
23FF 33C6             (          edt.asm):00647                 LEAU    A,U                               ;SKIP NEW TEXT
2401 20B4             (          edt.asm):00648                 BRA     DOCM3C                            ;PROCEED
                      (          edt.asm):00649         ;* INVALID SERARCH STRING
2403                  (          edt.asm):00650         DOCM3I
2403 CC2D47           (          edt.asm):00651                 LDD     #INVSER                           ;GET MESSAGE
2406 FD301B           (          edt.asm):00652                 STD     ERRMSG                            ;SET MESSAGE
2409 39               (          edt.asm):00653                 RTS
                      (          edt.asm):00654         ;* NO MATCH, ADVANCE TO NEXT
240A                  (          edt.asm):00655         DOCM3J
240A 3341             (          edt.asm):00656                 LEAU    1,U                               ;ADVANCE
240C 20A9             (          edt.asm):00657                 BRA     DOCM3C                            ;AND CONTINUE
                      (          edt.asm):00658         ;* 'T'AG LINES
240E                  (          edt.asm):00659         DOCM4
240E 8154             (          edt.asm):00660                 CMPA    #'T'                              ;DO WE TAG?
2410 260C             (          edt.asm):00661                 BNE     DOCM5                             ;NO, TRY NEXT
2412 FF3011           (          edt.asm):00662                 STU     TAG                               ;SET TAG
2415 301F             (          edt.asm):00663                 LEAX    -1,X                              ;BACKUP
2417 BF3013           (          edt.asm):00664                 STX     TAG1                              ;SET IT
241A 7A3004           (          edt.asm):00665                 DEC     REFLAG                            ;CAUSE REFRESH
241D 39               (          edt.asm):00666                 RTS
                      (          edt.asm):00667         ;* 'C' COPY LINES
241E                  (          edt.asm):00668         DOCM5
241E 8143             (          edt.asm):00669                 CMPA    #'C'                              ;COPY COMMAND?
2420 262E             (          edt.asm):00670                 BNE     DOCM6                             ;NO, TRY NEXT
2422 8D03             (          edt.asm):00671                 BSR     DOCM5A                            ;EXEC
2424 7E2302           (          edt.asm):00672                 JMP     DOQUIT                            ;AND PROCEED
                      (          edt.asm):00673         ;* PERFORM COPY OF INDICATED LINES
2427                  (          edt.asm):00674         DOCM5A
2427 FE300F           (          edt.asm):00675                 LDU     TXTPOS                            ;GET POSITION
242A 11B33015         (          edt.asm):00676                 CMPU    START                             ;ARE WE IN TEXT
242E 230E             (          edt.asm):00677                 BLS     DOCM5B                            ;ITS OK
2430 B13017           (          edt.asm):00678                 CMPA    END                               ;ARE WE IN TEXT?
2433 2409             (          edt.asm):00679                 BHS     DOCM5B                            ;NO, ITS OK
2435 CC2D5D           (          edt.asm):00680                 LDD     #INVDEST        POINT TO MESSAGE
2438 FD301B           (          edt.asm):00681                 STD     ERRMSG                            ;SAVE IT
243B 3262             (          edt.asm):00682                 LEAS    2,S                               ;SKIP SAVED PC
243D 39               (          edt.asm):00683                 RTS
                      (          edt.asm):00684         ;* RANGE IS OK, COPY LINES
243E                  (          edt.asm):00685         DOCM5B
243E FC3017           (          edt.asm):00686                 LDD     END                               ;GET END
2441 B33015           (          edt.asm):00687                 SUBD    START                             ;GET SIZE
2444 1F02             (          edt.asm):00688                 TFR     D,Y                               ;'Y' = LENGTH
2446 BE3015           (          edt.asm):00689                 LDX     START                             ;POINT TO TEXT
2449 BD29B9           (          edt.asm):00690                 JSR     INSERT                            ;DO INERT
244C 7A3004           (          edt.asm):00691                 DEC     REFLAG                            ;REFRESH
244F 39               (          edt.asm):00692                 RTS
                      (          edt.asm):00693         ;* 'M'OVE LINES
2450                  (          edt.asm):00694         DOCM6
2450 814D             (          edt.asm):00695                 CMPA    #'M'                              ;MOVE LINES?
2452 260F             (          edt.asm):00696                 BNE     DOCM7                             ;NO, TRY NEXT
2454 8DD1             (          edt.asm):00697                 BSR     DOCM5A                            ;INSERT THE TEXT
2456 FE3015           (          edt.asm):00698                 LDU     START                             ;GET STARTING ADDRESS
2459 11B3300F         (          edt.asm):00699                 CMPU    TXTPOS                            ;ARE WE IN RANGE
245D 250E             (          edt.asm):00700                 BLO     DOCM7A                            ;ITS OK
245F 33CB             (          edt.asm):00701                 LEAU    D,U                               ;OFFSET TO IT
2461 200A             (          edt.asm):00702                 BRA     DOCM7A                            ;AND PROCEED
                      (          edt.asm):00703         ;* 'D'ELETE LINES
2463                  (          edt.asm):00704         DOCM7
2463 8144             (          edt.asm):00705                 CMPA    #'D'                              ;DELETE?
2465 260F             (          edt.asm):00706                 BNE     DOCM8                             ;NO, PROCEED
2467 FC3017           (          edt.asm):00707                 LDD     END                               ;GET END
246A B33015           (          edt.asm):00708                 SUBD    START                             ;CALCULATE LENGTH
246D                  (          edt.asm):00709         DOCM7A
246D BD2A33           (          edt.asm):00710                 JSR     DELETE                            ;PERFORM DELETE
2470 7A3004           (          edt.asm):00711                 DEC     REFLAG                            ;DO REFRESH
2473 7E2302           (          edt.asm):00712                 JMP     DOQUIT                            ;CLEAN UP AND EXIT
                      (          edt.asm):00713         ;* 'L'IST FILE LINES
2476                  (          edt.asm):00714         DOCM8
2476 814C             (          edt.asm):00715                 CMPA    #'L'                              ;LIST?
2478 264D             (          edt.asm):00716                 BNE     DOCM9                             ;NO, TRY NEXT
247A 8D43             (          edt.asm):00717                 BSR     OSTART                            ;BEGIN LARGE OUTPUT
247C                  (          edt.asm):00718         DOCM8A
247C 11B33017         (          edt.asm):00719                 CMPU    END                               ;ARE WE OVER?
2480 240E             (          edt.asm):00720                 BHS     OSTOP                             ;YES, EXIT
2482 A6C0             (          edt.asm):00721                 LDA     ,U+                               ;GET CHAR
2484 810D             (          edt.asm):00722                 CMPA    #NL                               ;NEW LINE?
2486 2704             (          edt.asm):00723                 BEQ     DOCM8B                            ;SPECIAL CASE
2488 3F               (          edt.asm):00724                 SWI
2489 21               (          edt.asm):00725                 FCB     33                                ;DISPLAY IT
248A 20F0             (          edt.asm):00726                 BRA     DOCM8A                            ;AND PROCEED
248C                  (          edt.asm):00727         DOCM8B
248C 3F               (          edt.asm):00728                 SWI
248D 16               (          edt.asm):00729                 FCB     22                                ;NEW LINE
248E 20EC             (          edt.asm):00730                 BRA     DOCM8A
                      (          edt.asm):00731         ;* TERMINATE LARGE OUTPUT
2490                  (          edt.asm):00732         OSTOP
2490 B63005           (          edt.asm):00733                 LDA     WINDOW                            ;WINDOW MODE?
2493 2A27             (          edt.asm):00734                 BPL     OSTOPX                            ;NO, NOTHING SPECIAL
2495 3F               (          edt.asm):00735                 SWI
2496 18               (          edt.asm):00736                 FCB     24                                ;OUTPUT MESSAGE
2497 0A0D             (          edt.asm):00737                 FCB     $0A,$0D                           ;NEW LINE
2499 507265737320616E (          edt.asm):00738                 FCN     'Press any key to continue...'
     79206B657920746F
     20636F6E74696E75
     652E2E2E00
24B6 BD2CE8           (          edt.asm):00739                 JSR     GETKEY                            ;GET INPUT KEY
24B9 7A3004           (          edt.asm):00740                 DEC     REFLAG                            ;FORCE REFRESH
24BC                  (          edt.asm):00741         OSTOPX
24BC 7E2302           (          edt.asm):00742                 JMP     DOQUIT                            ;EXIT
                      (          edt.asm):00743         ;* BEGIN LARGE OUTPUT
24BF                  (          edt.asm):00744         OSTART
24BF B63005           (          edt.asm):00745                 LDA     WINDOW                            ;WINDOW MODE?
24C2 102B07C8         (          edt.asm):00746                 LBMI    WCL                               ;YES, CLEAR DISPLAY
24C6 39               (          edt.asm):00747                 RTS
                      (          edt.asm):00748         ;* 'P'RINT LINES IN FORMATTED FASHON
24C7                  (          edt.asm):00749         DOCM9
24C7 8150             (          edt.asm):00750                 CMPA    #'P'                              ;PRINT?
24C9 2671             (          edt.asm):00751                 BNE     DOCM10                            ;NO, TRY NEXT
24CB 8DF2             (          edt.asm):00752                 BSR     OSTART                            ;BEGIN LARGE OUTPUT
24CD 8E0001           (          edt.asm):00753                 LDX     #1                                ;ZERO LINE COUNT
24D0 CE3298           (          edt.asm):00754                 LDU     #T_BUFF                           ;POINT TO TEXT BUFFER
24D3                  (          edt.asm):00755         DOCM9A
24D3 11B33015         (          edt.asm):00756                 CMPU    START                             ;AT BEGINNING?
24D7 240A             (          edt.asm):00757                 BHS     DOCM9B                            ;YES, WE ARE THERE
24D9 A6C0             (          edt.asm):00758                 LDA     ,U+                               ;GET CHAR
24DB 810D             (          edt.asm):00759                 CMPA    #NL                               ;NEW LINE
24DD 26F4             (          edt.asm):00760                 BNE     DOCM9A                            ;KEEP LOOKING
24DF 3001             (          edt.asm):00761                 LEAX    1,X                               ;ADVANCE # LINES
24E1 20F0             (          edt.asm):00762                 BRA     DOCM9A                            ;AND PROCEED
24E3                  (          edt.asm):00763         DOCM9B
24E3 8620             (          edt.asm):00764                 LDA     #' '                              ;ASSUME NOT CURRENT
24E5 11B3300F         (          edt.asm):00765                 CMPU    TXTPOS                            ;CURRENT LINE?
24E9 2602             (          edt.asm):00766                 BNE     DOCM9C                            ;YES, ASSUMTION CORRECT
24EB 862A             (          edt.asm):00767                 LDA     #'*'                              ;WE ARE ON TAGGED LINE
24ED                  (          edt.asm):00768         DOCM9C
24ED 3F               (          edt.asm):00769                 SWI
24EE 21               (          edt.asm):00770                 FCB     33                                ;DISPLAY CHAR
24EF 8C270F           (          edt.asm):00771                 CMPX    #9999                             ;OVER 4 DIGITS?
24F2 2217             (          edt.asm):00772                 BHI     DOCM9D                            ;YES
24F4 3F               (          edt.asm):00773                 SWI
24F5 15               (          edt.asm):00774                 FCB     21                                ;DISPLAY SPACE
24F6 8C03E7           (          edt.asm):00775                 CMPX    #999                              ;OVER 3 DIGITS
24F9 2210             (          edt.asm):00776                 BHI     DOCM9D                            ;YES
24FB 3F               (          edt.asm):00777                 SWI
24FC 15               (          edt.asm):00778                 FCB     21                                ;DISPLAY SPACE
24FD 8C0063           (          edt.asm):00779                 CMPX    #99                               ;OVER 2 DIGITS
2500 2209             (          edt.asm):00780                 BHI     DOCM9D                            ;YES
2502 3F               (          edt.asm):00781                 SWI
2503 15               (          edt.asm):00782                 FCB     21                                ;DISPLAY SPACE
2504 8C0009           (          edt.asm):00783                 CMPX    #9                                ;OVER 1 DIGIT
2507 2202             (          edt.asm):00784                 BHI     DOCM9D                            ;YES
2509 3F               (          edt.asm):00785                 SWI
250A 15               (          edt.asm):00786                 FCB     21                                ;DISPLAY SPACE
250B                  (          edt.asm):00787         DOCM9D
250B 1F10             (          edt.asm):00788                 TFR     X,D                               ;GET VALUE
250D 3F               (          edt.asm):00789                 SWI
250E 1A               (          edt.asm):00790                 FCB     26                                ;DISPLAY LINE NUMBER
250F 8620             (          edt.asm):00791                 LDA     #' '                              ;ASSUME NOT TAGGED
2511 11B33011         (          edt.asm):00792                 CMPU    TAG                               ;ARE WE TAGGED
2515 2508             (          edt.asm):00793                 BLO     DOCM9E                            ;NO
2517 11B33013         (          edt.asm):00794                 CMPU    TAG1                              ;SECOND TEST
251B 2202             (          edt.asm):00795                 BHI     DOCM9E                            ;NO
251D 863D             (          edt.asm):00796                 LDA     #'='                              ;INDICATE TAGGED
251F                  (          edt.asm):00797         DOCM9E
251F 3F               (          edt.asm):00798                 SWI
2520 21               (          edt.asm):00799                 FCB     33                                ;DISPLAY
2521 3F               (          edt.asm):00800                 SWI
2522 15               (          edt.asm):00801                 FCB     21                                ;ANOTHER SPACE
2523                  (          edt.asm):00802         DOCM9F
2523 A6C0             (          edt.asm):00803                 LDA     ,U+                               ;GET CHAR
2525 2B12             (          edt.asm):00804                 BMI     OSTOP1                            ;END OF FILE
2527 810D             (          edt.asm):00805                 CMPA    #NL                               ;NEW LINE
2529 2704             (          edt.asm):00806                 BEQ     DOCM9G                            ;SPECIAL CASE
252B 3F               (          edt.asm):00807                 SWI
252C 21               (          edt.asm):00808                 FCB     33                                ;DISPLAY
252D 20F4             (          edt.asm):00809                 BRA     DOCM9F                            ;PROCEED
252F                  (          edt.asm):00810         DOCM9G
252F 3F               (          edt.asm):00811                 SWI
2530 16               (          edt.asm):00812                 FCB     22                                ;NEW LINE
2531 3001             (          edt.asm):00813                 LEAX    1,X                               ;ADVANCE LINE NUMBER
2533 11B33017         (          edt.asm):00814                 CMPU    END                               ;END OF TEXT
2537 25AA             (          edt.asm):00815                 BLO     DOCM9B                            ;NO, TRY AGAIN
2539                  (          edt.asm):00816         OSTOP1
2539 7E2490           (          edt.asm):00817                 JMP     OSTOP                             ;EXIT
                      (          edt.asm):00818         ;* 'F'ILE INFORMATION
253C                  (          edt.asm):00819         DOCM10
253C 8146             (          edt.asm):00820                 CMPA    #'F'                              ;FILE INFO?
253E 102600C5         (          edt.asm):00821                 LBNE    DOCM11                            ;NO, TRY NEXT
2542 BD24BF           (          edt.asm):00822                 JSR     OSTART                            ;BEGIN LARGE OUTPUT
2545 CE3298           (          edt.asm):00823                 LDU     #T_BUFF                           ;POINT TO START OF BUFFER
2548 8E0000           (          edt.asm):00824                 LDX     #0                                ;LINE COUNT
254B                  (          edt.asm):00825         DOCM10A
254B 11B33015         (          edt.asm):00826                 CMPU    START                             ;ARE WE THERE?
254F 2603             (          edt.asm):00827                 BNE     DOCM10B                           ;NO, WE ARE NOT
2551 BF301D           (          edt.asm):00828                 STX     TEMP                              ;SAVE FOR LATER
2554                  (          edt.asm):00829         DOCM10B
2554 A6C0             (          edt.asm):00830                 LDA     ,U+                               ;GET CHAR
2556 2B08             (          edt.asm):00831                 BMI     DOCM10C                           ;END OF LINE
2558 810D             (          edt.asm):00832                 CMPA    #NL                               ;NEW LINE
255A 26F8             (          edt.asm):00833                 BNE     DOCM10B                           ;KEEP LOOKING
255C 3001             (          edt.asm):00834                 LEAX    1,X                               ;ADVANCE
255E 20EB             (          edt.asm):00835                 BRA     DOCM10A                           ;AND KEEP LOOKING
2560                  (          edt.asm):00836         DOCM10C
2560 1F30             (          edt.asm):00837                 TFR     U,D                               ;GET EOF POSITION
2562 833299           (          edt.asm):00838                 SUBD    #T_BUFF+1       CONVERT
2565 1F03             (          edt.asm):00839                 TFR     D,U                               ;'U' = # CHARACTERS
2567 1F10             (          edt.asm):00840                 TFR     X,D                               ;'D' = # LINES
2569 3F               (          edt.asm):00841                 SWI
256A 18               (          edt.asm):00842                 FCB     24                                ;OUTPUT STRING
256B 46696C656E616D65 (          edt.asm):00843                 FCN     'Filename: '
     3A2000
2576 8E3021           (          edt.asm):00844                 LDX     #NAMBUF                           ;POINT TO NAME BUFFER
2579 3F               (          edt.asm):00845                 SWI
257A 17               (          edt.asm):00846                 FCB     23                                ;DISPLAY NAME
257B 8D65             (          edt.asm):00847                 BSR     DLINCHR                           ;DISPLAY # LINES & CHARS
257D FE3015           (          edt.asm):00848                 LDU     START                             ;GET STARTING POSITION
2580 8E0000           (          edt.asm):00849                 LDX     #0                                ;RESET # LINES
2583                  (          edt.asm):00850         DOCM10D
2583 11B33017         (          edt.asm):00851                 CMPU    END                               ;ARE WE OVER?
2587 240A             (          edt.asm):00852                 BHS     DOCM10E                           ;NO, WE ARE NOT
2589 A6C0             (          edt.asm):00853                 LDA     ,U+                               ;GET CHAR
258B 810D             (          edt.asm):00854                 CMPA    #NL                               ;NEW LINE?
258D 26F4             (          edt.asm):00855                 BNE     DOCM10D                           ;NO, KEEP LOOKING
258F 3001             (          edt.asm):00856                 LEAX    1,X                               ;ADVANCE COUNT
2591 20F0             (          edt.asm):00857                 BRA     DOCM10D                           ;AND KEEP GOING
2593                  (          edt.asm):00858         DOCM10E
2593 3F               (          edt.asm):00859                 SWI
2594 18               (          edt.asm):00860                 FCB     24                                ;DISPLAY TEXT
2595 506F736974696F6E (          edt.asm):00861                 FCN     'Position: '
     3A2000
25A0 FC301D           (          edt.asm):00862                 LDD     TEMP                              ;GET ID
25A3 C30001           (          edt.asm):00863                 ADDD    #1                                ;ADVANCE
25A6 3F               (          edt.asm):00864                 SWI
25A7 1A               (          edt.asm):00865                 FCB     26                                ;DISPLAY
25A8 FC3017           (          edt.asm):00866                 LDD     END                               ;GET END
25AB B33015           (          edt.asm):00867                 SUBD    START                             ;CALCULATE SIZE
25AE 1F03             (          edt.asm):00868                 TFR     D,U                               ;'U' = # CHARS
25B0 1F10             (          edt.asm):00869                 TFR     X,D                               ;'D' = # LINES
25B2 8D2E             (          edt.asm):00870                 BSR     DLINCHR                           ;DISPLAY # LINES & CHARS
25B4 3F               (          edt.asm):00871                 SWI
25B5 18               (          edt.asm):00872                 FCB     24                                ;DISPLAY TEXT
25B6 5468657265206172 (          edt.asm):00873                 FCN     'There are '
     652000
25C1 B6300A           (          edt.asm):00874                 LDA     FCHANGE                           ;IS FILE CHANGED?
25C4 2606             (          edt.asm):00875                 BNE     DOCM10F                           ;YES, RECORD IT
25C6 3F               (          edt.asm):00876                 SWI
25C7 18               (          edt.asm):00877                 FCB     24                                ;DISPLAY TEXT
25C8 6E6F2000         (          edt.asm):00878                 FCN     'no '                             ;INDICTE NEGATIVE
25CC                  (          edt.asm):00879         DOCM10F
25CC 3F               (          edt.asm):00880                 SWI
25CD 19               (          edt.asm):00881                 FCB     25                                ;MORE TEXT
25CE 756E736176656420 (          edt.asm):00882                 FCN     'unsaved changes.'
     6368616E6765732E
     00
25DF                  (          edt.asm):00883         DOCM10G
25DF 7E2490           (          edt.asm):00884                 JMP     OSTOP                             ;TERMINATE OUTPUT
                      (          edt.asm):00885         ;* DISPLAY # LINES(D) & CHARACTERS(U)
25E2                  (          edt.asm):00886         DLINCHR
25E2 3F               (          edt.asm):00887                 SWI
25E3 18               (          edt.asm):00888                 FCB     24                                ;MORE TEXT
25E4 2C2000           (          edt.asm):00889                 FCN     ', '
25E7 3F               (          edt.asm):00890                 SWI
25E8 1A               (          edt.asm):00891                 FCB     26                                ;DISPLAY IN DECIMAL
25E9 3F               (          edt.asm):00892                 SWI
25EA 18               (          edt.asm):00893                 FCB     24                                ;MORE TEXT
25EB 204C696E65732C20 (          edt.asm):00894                 FCN     ' Lines, '
     00
25F4 1F30             (          edt.asm):00895                 TFR     U,D                               ;GET EOF
25F6 3F               (          edt.asm):00896                 SWI
25F7 1A               (          edt.asm):00897                 FCB     26                                ;DISPLAY IN DECIMAL
25F8 3F               (          edt.asm):00898                 SWI
25F9 19               (          edt.asm):00899                 FCB     25                                ;REST OF LINE
25FA 2043686172616374 (          edt.asm):00900                 FCN     ' Characters'
     65727300
2606 39               (          edt.asm):00901                 RTS
                      (          edt.asm):00902         ;* 'I'NPUT NEW TEXT
2607                  (          edt.asm):00903         DOCM11
2607 8149             (          edt.asm):00904                 CMPA    #'I'                              ;INPUT?
2609 262B             (          edt.asm):00905                 BNE     DOCM12                            ;NO, TRY NEXT
260B BD24BF           (          edt.asm):00906                 JSR     OSTART                            ;BEGIN LARGE OUTPUT
260E 3F               (          edt.asm):00907                 SWI
260F 19               (          edt.asm):00908                 FCB     25                                ;DISPLAY MESSAGE
2610 496E7075743A00   (          edt.asm):00909                 FCN     'Input:'
2617                  (          edt.asm):00910         DOCM11A
2617 8E306C           (          edt.asm):00911                 LDX     #E_BUFF                           ;POINT TO EDIT BUFFER
261A BD2162           (          edt.asm):00912                 JSR     GETLIN                            ;GET INPUT LINE
261D B63005           (          edt.asm):00913                 LDA     WINDOW                            ;GET WINDOW STAT
2620 2A02             (          edt.asm):00914                 BPL     DOCM11B                           ;NO SPECIAL
2622 3F               (          edt.asm):00915                 SWI
2623 16               (          edt.asm):00916                 FCB     22                                ;NEW LINE
2624                  (          edt.asm):00917         DOCM11B
2624 5D               (          edt.asm):00918                 TSTB                                      ;     ZERO LENGTH?
2625 27B8             (          edt.asm):00919                 BEQ     DOCM10G                           ;YES, EXIT
2627 860D             (          edt.asm):00920                 LDA     #NL                               ;INCLUDE NEW LINE
2629 A785             (          edt.asm):00921                 STA     B,X                               ;WRITE IT
262B 5C               (          edt.asm):00922                 INCB                                      ;     ADVANCE
262C 4F               (          edt.asm):00923                 CLRA                                      ;     ZERO HIGH
262D 1F02             (          edt.asm):00924                 TFR     D,Y                               ;'Y' = INPUT LENGTH
262F BD29B9           (          edt.asm):00925                 JSR     INSERT                            ;INSERT INTO TEXT
2632 33CB             (          edt.asm):00926                 LEAU    D,U                               ;ADVANCE TO NEXT LINE
2634 20E1             (          edt.asm):00927                 BRA     DOCM11A                           ;KEEP GOING
                      (          edt.asm):00928         ;* 'V'ISUAL MODE SWITCH
2636                  (          edt.asm):00929         DOCM12
2636 8156             (          edt.asm):00930                 CMPA    #'V'                              ;SWAP MODES
2638 2617             (          edt.asm):00931                 BNE     DOCM13                            ;NO, TRY NEXT
263A FF3019           (          edt.asm):00932                 STU     NEWPOS                            ;SET NEW POSITION
263D 4F               (          edt.asm):00933                 CLRA                                      ;     ZERO HIGH
263E 5F               (          edt.asm):00934                 CLRB                                      ;     ZERO LOW
263F FD3000           (          edt.asm):00935                 STD     CX                                ;ZERO CURSORS
2642 A69F2E30         (          edt.asm):00936                 LDA     [GXYPTR]        GOTOXY DEFINED?
2646 2706             (          edt.asm):00937                 BEQ     DOCM12A                           ;NO, SKIP IT
2648 7A3004           (          edt.asm):00938                 DEC     REFLAG                            ;SWAP IT
264B 733005           (          edt.asm):00939                 COM     WINDOW                            ;TOGGLE FLAG
264E                  (          edt.asm):00940         DOCM12A
264E 7E2302           (          edt.asm):00941                 JMP     DOQUIT                            ;EXIT
                      (          edt.asm):00942         ;* EXECUTE DOS COMMAND
2651                  (          edt.asm):00943         DOCM13
2651 8124             (          edt.asm):00944                 CMPA    #'$'                              ;DOS COMMAND
2653 2626             (          edt.asm):00945                 BNE     DOCM14                            ;ERROR
2655 BD24BF           (          edt.asm):00946                 JSR     OSTART                            ;BEGIN OUTPUT
2658 8D0B             (          edt.asm):00947                 BSR     CONVERT                           ;CONVERT INPUT
265A 3448             (          edt.asm):00948                 PSHS    DP,U                              ;SAVE FOR LATER
265C 3F               (          edt.asm):00949                 SWI
265D 64               (          edt.asm):00950                 FCB     100                               ;EXECUTE COMMAND
265E 3548             (          edt.asm):00951                 PULS    DP,U                              ;RESTORE PTR
2660 6AC4             (          edt.asm):00952                 DEC     ,U                                ;SET EOL
2662 7E2490           (          edt.asm):00953                 JMP     OSTOP                             ;END EXIT
                      (          edt.asm):00954         ;* CONVERT COMMAND LINE TO UPPERCASE, ZERO TERMINATED
2665                  (          edt.asm):00955         CONVERT
2665 3420             (          edt.asm):00956                 PSHS    Y                                 ;SAVE 'Y'
2667                  (          edt.asm):00957         CONV1
2667 A6A4             (          edt.asm):00958                 LDA     ,Y                                ;GET CHAR
2669 2B07             (          edt.asm):00959                 BMI     CONV2                             ;END OF LINE, ZERO TERMINATE
266B BD2313           (          edt.asm):00960                 JSR     TOUPPER                           ;CONVERT TO UPPER
266E A7A0             (          edt.asm):00961                 STA     ,Y+                               ;WRITE IT OUT
2670 20F5             (          edt.asm):00962                 BRA     CONV1                             ;AND PROCEED
2672                  (          edt.asm):00963         CONV2
2672 6FA4             (          edt.asm):00964                 CLR     ,Y                                ;ZERO END
2674 1F23             (          edt.asm):00965                 TFR     Y,U                               ;SAVE EOL INDICATOR
2676 3520             (          edt.asm):00966                 PULS    Y                                 ;RESTORE 'Y'
2678 3F               (          edt.asm):00967                 SWI
2679 04               (          edt.asm):00968                 FCB     4                                 ;TEST FOR OPERANDS
267A 39               (          edt.asm):00969                 RTS
                      (          edt.asm):00970         ;* 'R'EAD FILE AT POSITION
267B                  (          edt.asm):00971         DOCM14
267B 8152             (          edt.asm):00972                 CMPA    #'R'                              ;READ COMMAND
267D 264E             (          edt.asm):00973                 BNE     DOCM15                            ;NO, TRY NEXT
267F 8D33             (          edt.asm):00974                 BSR     GETFN                             ;GET FILENAME
2681 3F               (          edt.asm):00975                 SWI
2682 37               (          edt.asm):00976                 FCB     55                                ;OPEN FILE FOR READ
2683 263F             (          edt.asm):00977                 BNE     GETFN2                            ;ERROR, EXIT
2685 7A3004           (          edt.asm):00978                 DEC     REFLAG                            ;INDICATE REFRESH R=IRED
                      (          edt.asm):00979         ;* READ IN EACH BLOCK & INSERT INTO TEXT
2688                  (          edt.asm):00980         DOCM14A
2688 CE303A           (          edt.asm):00981                 LDU     #COMMAND        POINT TO BUFFER
268B 8E306C           (          edt.asm):00982                 LDX     #E_BUFF                           ;POINT TO BUFFER
268E 3F               (          edt.asm):00983                 SWI
268F 3A               (          edt.asm):00984                 FCB     58                                ;READ INTO BUFFER
2690 2675             (          edt.asm):00985                 BNE     DOCM15D                           ;END, EXIT
                      (          edt.asm):00986         ;* SCAN BLOCK LOOKING FOR EOF
2692                  (          edt.asm):00987         DOCM14B
2692 A684             (          edt.asm):00988                 LDA     ,X                                ;GET CHAR
2694 2B07             (          edt.asm):00989                 BMI     DOCM14C                           ;END, EXIT
2696 3001             (          edt.asm):00990                 LEAX    1,X                               ;ADVANCE
2698 8C326C           (          edt.asm):00991                 CMPX    #E_BUFF+512     ARE WE OVER?
269B 25F5             (          edt.asm):00992                 BLO     DOCM14B                           ;NO, KEEP LOOKING
269D                  (          edt.asm):00993         DOCM14C
269D 1F10             (          edt.asm):00994                 TFR     X,D                               ;GET VALUE
269F 83306C           (          edt.asm):00995                 SUBD    #E_BUFF                           ;GET # CHARACTERS
26A2 1F02             (          edt.asm):00996                 TFR     D,Y                               ;'Y' = # CHARS
26A4 FE3015           (          edt.asm):00997                 LDU     START                             ;GET POSITION
26A7 8E306C           (          edt.asm):00998                 LDX     #E_BUFF                           ;POINT TO BUFFER
26AA BD29B9           (          edt.asm):00999                 JSR     INSERT                            ;PERFORM INSERT
26AD 33CB             (          edt.asm):01000                 LEAU    D,U                               ;ADVANCE TO NEXT
26AF FF3015           (          edt.asm):01001                 STU     START                             ;RESAVE
26B2 20D4             (          edt.asm):01002                 BRA     DOCM14A                           ;AND PROCEED
                      (          edt.asm):01003         ;* GET FILENAME FOR DOS
26B4                  (          edt.asm):01004         GETFN
26B4 8DAF             (          edt.asm):01005                 BSR     CONVERT                           ;CONVERT FILENAME
26B6 2604             (          edt.asm):01006                 BNE     GETFN1                            ;ITS OK
26B8 108E3021         (          edt.asm):01007                 LDY     #NAMBUF                           ;POINT TO NAME BUFFER
26BC                  (          edt.asm):01008         GETFN1
26BC 3F               (          edt.asm):01009                 SWI
26BD 0A               (          edt.asm):01010                 FCB     10                                ;GET FILENAME
26BE 2707             (          edt.asm):01011                 BEQ     GETFN3                            ;A-OK, EXIT
26C0 6AC4             (          edt.asm):01012                 DEC     ,U                                ;SET EOL INDICATOR
26C2 3262             (          edt.asm):01013                 LEAS    2,S                               ;SKIP SAVED SP
26C4                  (          edt.asm):01014         GETFN2
26C4 7E2490           (          edt.asm):01015                 JMP     OSTOP                             ;EXIT WITH PROMPT
26C7                  (          edt.asm):01016         GETFN3
26C7 6AC4             (          edt.asm):01017                 DEC     ,U                                ;SET EOL INDICATOR
26C9 CE303A           (          edt.asm):01018                 LDU     #COMMAND        SET UP PTR TO BUFFER
26CC 39               (          edt.asm):01019                 RTS
                      (          edt.asm):01020         ;* 'W'RITE CONTENTS OF RANGE
26CD                  (          edt.asm):01021         DOCM15
26CD 8157             (          edt.asm):01022                 CMPA    #'W'                              ;WRITE COMMAND?
26CF 2704             (          edt.asm):01023                 BEQ     DOCM15A                           ;YES, PROCESS
                      (          edt.asm):01024         ;* E'X'IT AND SAVE FILE
26D1 8058             (          edt.asm):01025                 SUBA    #'X'                              ;EXIT AND SAVE?
26D3 263F             (          edt.asm):01026                 BNE     BADCMD                            ;NO, TRY NEXT
26D5                  (          edt.asm):01027         DOCM15A
26D5 B7301E           (          edt.asm):01028                 STA     TEMP+1                            ;SAVE COMMAND
26D8 B6301F           (          edt.asm):01029                 LDA     TEMP+2                            ;DEFAULT?
26DB 260C             (          edt.asm):01030                 BNE     DOCM15B                           ;NO, ITS OK
26DD BD29AC           (          edt.asm):01031                 JSR     FINDEOF                           ;LOCATE END OF FILE
26E0 FF3017           (          edt.asm):01032                 STU     END                               ;POINT TO END
26E3 CE3298           (          edt.asm):01033                 LDU     #T_BUFF                           ;POINT TO START OF FILE
26E6 FF3015           (          edt.asm):01034                 STU     START                             ;POINT TO START OF RANGE
26E9                  (          edt.asm):01035         DOCM15B
26E9 8DC9             (          edt.asm):01036                 BSR     GETFN                             ;GET FILENAME
26EB 3F               (          edt.asm):01037                 SWI
26EC 38               (          edt.asm):01038                 FCB     56                                ;OPEN THE FILE FOR WRITE
26ED 26D5             (          edt.asm):01039                 BNE     GETFN2                            ;REPORT ERROR
26EF BE3015           (          edt.asm):01040                 LDX     START                             ;POINT TO START OF RANGE
26F2                  (          edt.asm):01041         DOCM15C
26F2 A680             (          edt.asm):01042                 LDA     ,X+                               ;GET CHAR
26F4 3F               (          edt.asm):01043                 SWI
26F5 3D               (          edt.asm):01044                 FCB     61                                ;WRITE FILE
26F6 260F             (          edt.asm):01045                 BNE     DOCM15D                           ;ERROR, EXIT
26F8 BC3017           (          edt.asm):01046                 CMPX    END                               ;OVER END?
26FB 25F5             (          edt.asm):01047                 BLO     DOCM15C                           ;NO, KEEP GOING
26FD 7F300A           (          edt.asm):01048                 CLR     FCHANGE                           ;INDICATE NOT CHANGED
2700 B6301E           (          edt.asm):01049                 LDA     TEMP+1                            ;GET COMMAND
2703 1027FC2F         (          edt.asm):01050                 LBEQ    DOEXIT                            ;IT SO, TERMINATE
                      (          edt.asm):01051         ;* CLOSE FILE & TERMINATE COMMAND
2707                  (          edt.asm):01052         DOCM15D
2707 3F               (          edt.asm):01053                 SWI
2708 39               (          edt.asm):01054                 FCB     57                                ;CLOSE FILE
2709 3F               (          edt.asm):01055                 SWI
270A 56               (          edt.asm):01056                 FCB     86                                ;FLUSH DISK (INCASE CRASH)
270B 7F303A           (          edt.asm):01057                 CLR     COMMAND                           ;INSURE NO COMMAND
270E 7F300C           (          edt.asm):01058                 CLR     DELLEN                            ;INSURE NO DELETE BUFFER
2711 7E2302           (          edt.asm):01059                 JMP     DOQUIT                            ;AND EXIT
                      (          edt.asm):01060         ;* COMMAND IN NOT RECOGNIZED
2714                  (          edt.asm):01061         BADCMD
2714 CC2D37           (          edt.asm):01062                 LDD     #UNCMSG                           ;POINT TO MESSAGE
2717 FD301B           (          edt.asm):01063                 STD     ERRMSG                            ;SET ERROT MESSAGE
271A 39               (          edt.asm):01064                 RTS
                      (          edt.asm):01065         ;*
                      (          edt.asm):01066         ;* UNKNOWN KEY ENTERED
                      (          edt.asm):01067         ;*
271B                  (          edt.asm):01068         UNKEY
271B CC2D2B           (          edt.asm):01069                 LDD     #UNKMSG                           ;POINT TO MESSAGE
271E FD301B           (          edt.asm):01070                 STD     ERRMSG                            ;SET ERROR MESSAGE
2721 39               (          edt.asm):01071                 RTS
                      (          edt.asm):01072         ;*
                      (          edt.asm):01073         ;* TOGGLE EOL DISPLAY
                      (          edt.asm):01074         ;*
2722                  (          edt.asm):01075         TOGEOL
2722 733008           (          edt.asm):01076                 COM     EOLFLAG                           ;SWAP FLAG STATE
                      (          edt.asm):01077         ;* COMMAND TO FORCE RE-REFRESH
2725                  (          edt.asm):01078         REDRAW
2725 7A3004           (          edt.asm):01079                 DEC     REFLAG                            ;INDICTE REFRESH R=IRED
2728 7E2AD1           (          edt.asm):01080                 JMP     UPDATE                            ;AND UPDATE ANY CHANGES
                      (          edt.asm):01081         ;*
                      (          edt.asm):01082         ;* TOGGLE INSERT MODE
                      (          edt.asm):01083         ;*
272B                  (          edt.asm):01084         TOGINS
272B CC2DB2           (          edt.asm):01085                 LDD     #INSMSG                           ;POINT TO ON MESSAGE
272E 733007           (          edt.asm):01086                 COM     INSFLAG                           ;SWAP FLAG STATE
2731 2B03             (          edt.asm):01087                 BMI     TOGIN1                            ;CORRECT
2733 CC2DB9           (          edt.asm):01088                 LDD     #OVWMSG                           ;POINT TO OFF MESSAGE
2736                  (          edt.asm):01089         TOGIN1
2736 FD301B           (          edt.asm):01090                 STD     ERRMSG                            ;SAVE MESSAGE
2739 39               (          edt.asm):01091                 RTS
                      (          edt.asm):01092         ;*
                      (          edt.asm):01093         ;* DISPLAY CURSOR POSITION
                      (          edt.asm):01094         ;*
273A                  (          edt.asm):01095         DISCUR
273A BD2CB2           (          edt.asm):01096                 JSR     GOTOLST                           ;MOVE THERE
273D BD2C9A           (          edt.asm):01097                 JSR     WSO                               ;ENABLE SPECIAL EFFECTS
2740 3F               (          edt.asm):01098                 SWI
2741 18               (          edt.asm):01099                 FCB     24                                ;OUTPUT STRING
2742 20437572736F723A (          edt.asm):01100                 FCN     ' Cursor: '
     2000
274C F63001           (          edt.asm):01101                 LDB     CY                                ;GET 'Y' POSITION
274F 8D3A             (          edt.asm):01102                 BSR     WRDEC                             ;DISPLAY
2751 3F               (          edt.asm):01103                 SWI
2752 18               (          edt.asm):01104                 FCB     24                                ;MORE TEXT
2753 20646F776E2C2000 (          edt.asm):01105                 FCN     ' down, '
275B F63002           (          edt.asm):01106                 LDB     HORZ                              ;GET ACTUAL 'X' POSITION
275E 8D2B             (          edt.asm):01107                 BSR     WRDEC                             ;DISPLAY
2760 3F               (          edt.asm):01108                 SWI
2761 18               (          edt.asm):01109                 FCB     24                                ;MORE TEXT
2762 206F7665722C2061 (          edt.asm):01110                 FCN     ' over, at character '
     7420636861726163
     7465722000
2777 F63000           (          edt.asm):01111                 LDB     CX                                ;GET CHAR 'X' POSITION
277A 8D0F             (          edt.asm):01112                 BSR     WRDEC                             ;DISPLAY
277C 3F               (          edt.asm):01113                 SWI
277D 18               (          edt.asm):01114                 FCB     24                                ;MORE TEXT
277E 20696E206C696E65 (          edt.asm):01115                 FCN     ' in line '
     2000
2788 7E2C9E           (          edt.asm):01116                 JMP     WSE                               ;DISABLE SPECIAL EFFECTS
278B                  (          edt.asm):01117         WRDEC
278B 4F               (          edt.asm):01118                 CLRA                                      ;     ZERO HIGH
278C C30001           (          edt.asm):01119                 ADDD    #1                                ;ADVANCE IT
278F 3F               (          edt.asm):01120                 SWI
2790 1A               (          edt.asm):01121                 FCB     26                                ;DISPLAY IN DECIMAL
2791 39               (          edt.asm):01122                 RTS
                      (          edt.asm):01123         ;*
                      (          edt.asm):01124         ;* DELETE PREVIOUS CHARACTER
                      (          edt.asm):01125         ;*
2792                  (          edt.asm):01126         DELPRE
2792 BD2926           (          edt.asm):01127                 JSR     BACKCHR                           ;BACKUP A CHARACTER
2795 BD2B0E           (          edt.asm):01128                 JSR     POSITC                            ;REPOSITION CURSOR
2798 F73000           (          edt.asm):01129                 STB     CX                                ;RESET 'C' POSITION
279B BD2CB7           (          edt.asm):01130                 JSR     GOTOXX                            ;MOVE TO POSITION
                      (          edt.asm):01131         ;*
                      (          edt.asm):01132         ;* DELETE CHARACTER
                      (          edt.asm):01133         ;*
279E                  (          edt.asm):01134         DELCHR
279E BD2A90           (          edt.asm):01135                 JSR     EDIT                              ;BEGIN EDITING LINE
27A1 1F23             (          edt.asm):01136                 TFR     Y,U                               ;SAVE FOR LATER
27A3 A6C4             (          edt.asm):01137                 LDA     ,U                                ;GET CHAR
27A5 2B17             (          edt.asm):01138                 BMI     DELC3                             ;EOF, DO NOT DELETE
27A7                  (          edt.asm):01139         DELC1
27A7 E621             (          edt.asm):01140                 LDB     1,Y                               ;GET NEXT CHAR
27A9 E7A0             (          edt.asm):01141                 STB     ,Y+                               ;WRITE TO TEXT
27AB 2AFA             (          edt.asm):01142                 BPL     DELC1                             ;DO THEM ALL
27AD 7A300B           (          edt.asm):01143                 DEC     EDTLEN                            ;REDUCE LENGTH
27B0                  (          edt.asm):01144         DELC2
27B0 810D             (          edt.asm):01145                 CMPA    #NL                               ;DELETED NEWLINE?
27B2 10260431         (          edt.asm):01146                 LBNE    REFLIN                            ;NO, JUST UPDATE ONE LINE
27B6 BD2AD1           (          edt.asm):01147                 JSR     UPDATE                            ;UPDATE IT
27B9 B63004           (          edt.asm):01148                 LDA     REFLAG                            ;ARE WE REFRESHING?
27BC 2715             (          edt.asm):01149                 BEQ     REFBOT                            ;NO, DO EXPLICITILY
27BE                  (          edt.asm):01150         DELC3
27BE 39               (          edt.asm):01151                 RTS
                      (          edt.asm):01152         ;*
                      (          edt.asm):01153         ;* DELETE LIPUT LINE
                      (          edt.asm):01154         ;*
27BF                  (          edt.asm):01155         DELLIN
27BF 8D34             (          edt.asm):01156                 BSR     DELPREP                           ;PREPERATION
27C1                  (          edt.asm):01157         DELL1
27C1 A6A0             (          edt.asm):01158                 LDA     ,Y+                               ;GET CHAR FROM BUFFER
27C3 A780             (          edt.asm):01159                 STA     ,X+                               ;WRITE IN BUFFER
27C5 2B05             (          edt.asm):01160                 BMI     DELL2                             ;END OF FILE
27C7 5C               (          edt.asm):01161                 INCB                                      ;     ADVANCE
27C8 810D             (          edt.asm):01162                 CMPA    #NL                               ;NEWLINE?
27CA 26F5             (          edt.asm):01163                 BNE     DELL1                             ;NO, ERROR
27CC                  (          edt.asm):01164         DELL2
27CC 4F               (          edt.asm):01165                 CLRA                                      ;     ZERO HIGH
27CD F7300C           (          edt.asm):01166                 STB     DELLEN                            ;SET LENGTH
27D0 BD2A33           (          edt.asm):01167                 JSR     DELETE                            ;PERFORM DELETE
                      (          edt.asm):01168         ;* REFRESH FROM CURRENT POSITION TO BOTTOM OF SCREEN
27D3                  (          edt.asm):01169         REFBOT
27D3 F63001           (          edt.asm):01170                 LDB     CY                                ;GET 'Y' POSITION
27D6 FE300F           (          edt.asm):01171                 LDU     TXTPOS                            ;GET START OF LINE
27D9 7E2BB4           (          edt.asm):01172                 JMP     REFSCR                            ;CONTINUE
                      (          edt.asm):01173         ;*
                      (          edt.asm):01174         ;* DELETE TO END OF LINE (EXCLUSIVE)
                      (          edt.asm):01175         ;*
27DC                  (          edt.asm):01176         DELEOL
27DC 8D17             (          edt.asm):01177                 BSR     DELPREP                           ;PEROFRM PREPERATION
27DE                  (          edt.asm):01178         DELEO1
27DE A6A0             (          edt.asm):01179                 LDA     ,Y+                               ;GET CHAR FROM BUFFER
27E0 A780             (          edt.asm):01180                 STA     ,X+                               ;WRITE IN DELETE BUFFER
27E2 2B07             (          edt.asm):01181                 BMI     DELEO2                            ;EOF, EXIT
27E4 810D             (          edt.asm):01182                 CMPA    #NL                               ;END OF LINE?
27E6 2703             (          edt.asm):01183                 BEQ     DELEO2                            ;EOF, EXIT
27E8 5C               (          edt.asm):01184                 INCB                                      ;     ADVANCE COUNT
27E9 20F3             (          edt.asm):01185                 BRA     DELEO1                            ;CONTINUE
27EB                  (          edt.asm):01186         DELEO2
27EB 4F               (          edt.asm):01187                 CLRA                                      ;     ZERO HIGH
27EC F7300C           (          edt.asm):01188                 STB     DELLEN                            ;SET LENGTH
27EF BD2A33           (          edt.asm):01189                 JSR     DELETE                            ;PERORM DELETE
27F2 7E2C96           (          edt.asm):01190                 JMP     WCE                               ;CLEAR END OF LINE
                      (          edt.asm):01191         ;* PREPREATION FOR DELETE OPERATION
27F5                  (          edt.asm):01192         DELPREP
27F5 BD2AD1           (          edt.asm):01193                 JSR     UPDATE                            ;UPDATE CHANGES
27F8 F63000           (          edt.asm):01194                 LDB     CX                                ;GET 'X' POSITION
27FB 4F               (          edt.asm):01195                 CLRA                                      ;     ZERO HIGH
27FC F3300F           (          edt.asm):01196                 ADDD    TXTPOS                            ;'D' = POSITION
27FF 1F03             (          edt.asm):01197                 TFR     D,U                               ;'U' = INPUT PTR
2801 1F02             (          edt.asm):01198                 TFR     D,Y                               ;'Y' = INPUT PTR
2803 8E316C           (          edt.asm):01199                 LDX     #D_BUFF                           ;POINT TO DELETE BUFFER
2806 5F               (          edt.asm):01200                 CLRB                                      ;     ZERO COUNT
2807 39               (          edt.asm):01201                 RTS
                      (          edt.asm):01202         ;*
                      (          edt.asm):01203         ;* INSERT DELETED TEXT
                      (          edt.asm):01204         ;*
2808                  (          edt.asm):01205         INSDEL
2808 8DEB             (          edt.asm):01206                 BSR     DELPREP                           ;PREPERATION
280A F6300C           (          edt.asm):01207                 LDB     DELLEN                            ;GET LENGTH OF DELETE BUFFER
280D 4F               (          edt.asm):01208                 CLRA                                      ;     ZERO HIGH
280E 1F02             (          edt.asm):01209                 TFR     D,Y                               ;'Y' = LENGTH OF DATA
2810 BD29B9           (          edt.asm):01210                 JSR     INSERT                            ;PERFORM INSERT
2813 20BE             (          edt.asm):01211                 BRA     REFBOT                            ;AND PROCEED
                      (          edt.asm):01212         ;*
                      (          edt.asm):01213         ;* GOTO START OF FILE
                      (          edt.asm):01214         ;*
2815                  (          edt.asm):01215         HOME
2815 BD2AD1           (          edt.asm):01216                 JSR     UPDATE                            ;UPDATE ANY CHANGES
2818 7E2059           (          edt.asm):01217                 JMP     EDT4                              ;AND GOTO HOME
                      (          edt.asm):01218         ;*
                      (          edt.asm):01219         ;* MOVE CURRENT LINE TO TOP OF SCREEN
                      (          edt.asm):01220         ;*
281B                  (          edt.asm):01221         CURTOP
281B BD2AD1           (          edt.asm):01222                 JSR     UPDATE                            ;UPDATE ANY CHANGES
281E FC300F           (          edt.asm):01223                 LDD     TXTPOS                            ;GET LINE POSITION
2821 FD300D           (          edt.asm):01224                 STD     SCRTOP                            ;SET SCREEN TOP
2824 7F3001           (          edt.asm):01225                 CLR     CY                                ;RESET TO TOP
2827 7A3004           (          edt.asm):01226                 DEC     REFLAG                            ;INDICATE REFRESH R=IRED
282A 39               (          edt.asm):01227                 RTS
                      (          edt.asm):01228         ;*
                      (          edt.asm):01229         ;* TAG LINES
                      (          edt.asm):01230         ;*
282B                  (          edt.asm):01231         TAGLIN
282B BD2AD1           (          edt.asm):01232                 JSR     UPDATE                            ;UPDATE ANY CHANGES
282E FE300F           (          edt.asm):01233                 LDU     TXTPOS                            ;GET CURRENT POSITION
2831 BE3011           (          edt.asm):01234                 LDX     TAG                               ;AND FIRST TAG
2834 2613             (          edt.asm):01235                 BNE     TAGL1                             ;ALREADY TAGGED
2836 FF3011           (          edt.asm):01236                 STU     TAG                               ;SET BEGINNING TAG
2839 FF3013           (          edt.asm):01237                 STU     TAG1                              ;SET ENDING TAG
283C 4F               (          edt.asm):01238                 CLRA                                      ;     ZERO 'X'
283D B73002           (          edt.asm):01239                 STA     HORZ                              ;RESET COUNTER
2840 F63001           (          edt.asm):01240                 LDB     CY                                ;GET 'Y'
2843 BD2CC0           (          edt.asm):01241                 JSR     GOTOXY                            ;RESET CURSOR
2846 7E2BE7           (          edt.asm):01242                 JMP     REFLIN                            ;REFRESH THE LINE
2849                  (          edt.asm):01243         TAGL1
2849 11B33011         (          edt.asm):01244                 CMPU    TAG                               ;DOES IT MATCH
284D 270D             (          edt.asm):01245                 BEQ     TAGL3                             ;DELETE THE TAGS
284F 2202             (          edt.asm):01246                 BHI     TAGL2                             ;IN PROPER ORDER
2851 1E13             (          edt.asm):01247                 EXG     X,U                               ;SWAP VALUES
2853                  (          edt.asm):01248         TAGL2
2853 BF3011           (          edt.asm):01249                 STX     TAG                               ;SET BEGINNING TAG
2856 FF3013           (          edt.asm):01250                 STU     TAG1                              ;SET ENDING TAG
2859 7E2BAD           (          edt.asm):01251                 JMP     REFALL                            ;REFRESH SCREEN
285C                  (          edt.asm):01252         TAGL3
285C 8E0000           (          edt.asm):01253                 LDX     #0                                ;ZERO STARTNG TAG
285F 1F13             (          edt.asm):01254                 TFR     X,U                               ;ZERO ENDING TAG
2861 20F0             (          edt.asm):01255                 BRA     TAGL2                             ;AND SET IT
                      (          edt.asm):01256         ;*
                      (          edt.asm):01257         ;* MOVE WORD RIGHT
                      (          edt.asm):01258         ;*
2863                  (          edt.asm):01259         WRDRT
2863 A6A4             (          edt.asm):01260                 LDA     ,Y                                ;GET CHAR
2865 810D             (          edt.asm):01261                 CMPA    #NL                               ;AT END OF LINE?
2867 272C             (          edt.asm):01262                 BEQ     FWDCHR                            ;IF SO, ADVANCE
2869                  (          edt.asm):01263         WRDRT1
2869 A6A4             (          edt.asm):01264                 LDA     ,Y                                ;GET CHAR
286B 2B0B             (          edt.asm):01265                 BMI     WRDRT2                            ;EOF, EXIT
286D 8120             (          edt.asm):01266                 CMPA    #' '                              ;CONTROL CODE
286F 2307             (          edt.asm):01267                 BLS     WRDRT2                            ;YES, EXIT
2871 3121             (          edt.asm):01268                 LEAY    1,Y                               ;ADVANCE
2873 7C3000           (          edt.asm):01269                 INC     CX                                ;ADVANCE 'X' POSITION
2876 20F1             (          edt.asm):01270                 BRA     WRDRT1                            ;ADN PROCEED
2878                  (          edt.asm):01271         WRDRT2
2878 A6A0             (          edt.asm):01272                 LDA     ,Y+                               ;GET NEXT CHAR
287A 2B18             (          edt.asm):01273                 BMI     WRDRT4                            ;EOF, EXIT
287C 810D             (          edt.asm):01274                 CMPA    #NL                               ;NEW LINE
287E 2714             (          edt.asm):01275                 BEQ     WRDRT4                            ;EOL, EXIT
2880 8120             (          edt.asm):01276                 CMPA    #' '                              ;CONTROL CODE?
2882 2210             (          edt.asm):01277                 BHI     WRDRT4                            ;NEW WORD, EXIT
2884 7C3000           (          edt.asm):01278                 INC     CX                                ;ADVANCE 'X' POSITION
2887 20EF             (          edt.asm):01279                 BRA     WRDRT2                            ;AND PROCEED
                      (          edt.asm):01280         ;*
                      (          edt.asm):01281         ;* MOVE CURSOR TO END OF LINE
                      (          edt.asm):01282         ;*
2889                  (          edt.asm):01283         CUREOL
2889 86FF             (          edt.asm):01284                 LDA     #$FF                              ;HIGH NUMBER
288B B73000           (          edt.asm):01285                 STA     CX                                ;SET POSITION
288E A6A4             (          edt.asm):01286                 LDA     ,Y                                ;GET CHAR
2890 810D             (          edt.asm):01287                 CMPA    #NL                               ;AT END ALREADY?
2892 270E             (          edt.asm):01288                 BEQ     FWDLIN                            ;YES, GOTO NEXT
2894                  (          edt.asm):01289         WRDRT4
2894 39               (          edt.asm):01290                 RTS
                      (          edt.asm):01291         ;*
                      (          edt.asm):01292         ;* MOVE FORWARD A CHARACTER
                      (          edt.asm):01293         ;*
2895                  (          edt.asm):01294         FWDCHR
2895 A6A4             (          edt.asm):01295                 LDA     ,Y                                ;GET DATA
2897 810D             (          edt.asm):01296                 CMPA    #NL                               ;NEW LINE?
2899 2704             (          edt.asm):01297                 BEQ     FWDC1                             ;YES, SPECIAL CASE
289B 7C3000           (          edt.asm):01298                 INC     CX                                ;ADVANCE
289E 39               (          edt.asm):01299                 RTS
289F                  (          edt.asm):01300         FWDC1
289F 7F3000           (          edt.asm):01301                 CLR     CX                                ;ZERO POSITION
                      (          edt.asm):01302         ;*
                      (          edt.asm):01303         ;* MOVE FORWARD A LINE
                      (          edt.asm):01304         ;*
28A2                  (          edt.asm):01305         FWDLIN
28A2 3416             (          edt.asm):01306                 PSHS    A,B,X                             ;SAVE REGISTERS
28A4 BD2AD1           (          edt.asm):01307                 JSR     UPDATE                            ;UPDATE ANY CHANGES
28A7 FE300F           (          edt.asm):01308                 LDU     TXTPOS                            ;GET TEXT POSITION
28AA                  (          edt.asm):01309         FWDL1
28AA A6C4             (          edt.asm):01310                 LDA     ,U                                ;GET CHAR
28AC 2B13             (          edt.asm):01311                 BMI     FWDL2                             ;END OF FILE
28AE 3341             (          edt.asm):01312                 LEAU    1,U                               ;ADVANCE
28B0 810D             (          edt.asm):01313                 CMPA    #NL                               ;NEW LINE?
28B2 26F6             (          edt.asm):01314                 BNE     FWDL1                             ;NO, KEEP LOOKING
28B4 FF300F           (          edt.asm):01315                 STU     TXTPOS                            ;NEW POSITION
28B7 F63001           (          edt.asm):01316                 LDB     CY                                ;GET POSITION
28BA C116             (          edt.asm):01317                 CMPB    #LINES-2        PAST END OF SCREEN?
28BC 2405             (          edt.asm):01318                 BHS     FWDL3                             ;YES, SPECIAL CASE
28BE 7C3001           (          edt.asm):01319                 INC     CY                                ;ADVANCE CY
28C1                  (          edt.asm):01320         FWDL2
28C1 3596             (          edt.asm):01321                 PULS    A,B,X,PC        RESTORE & RETURN
28C3                  (          edt.asm):01322         FWDL3
28C3 BE300D           (          edt.asm):01323                 LDX     SCRTOP                            ;GET TOP OF SCREEN
28C6                  (          edt.asm):01324         FWDL4
28C6 A680             (          edt.asm):01325                 LDA     ,X+                               ;GET CHAR
28C8 810D             (          edt.asm):01326                 CMPA    #NL                               ;NEW LINE
28CA 26FA             (          edt.asm):01327                 BNE     FWDL4                             ;NO, KEEP GOING
28CC BF300D           (          edt.asm):01328                 STX     SCRTOP                            ;RESAVE SCREEN TOP
                      (          edt.asm):01329         ;* SOME TERMINALS MAY NOT PERFORM FOREWARD SCROLLING WHEN "SF" IS
                      (          edt.asm):01330         ;* PRINTED ON THE BOTTOM LINE... IF SO, REPLACE NEXT SECTION WITH
                      (          edt.asm):01331         ;* CODE SIMILAR TO THAT FOUND IN "BACKLIN".
28CF 8685             (          edt.asm):01332                 LDA     #SF                               ;SCROLL FORWARD COMMAND
28D1 BD2CA0           (          edt.asm):01333                 JSR     PUTCHR                            ;OUTPUT IT
28D4 BD2BB4           (          edt.asm):01334                 JSR     REFSCR                            ;REFRESH SCREEN (DRAW NEXT LINE)
28D7 3596             (          edt.asm):01335                 PULS    A,B,X,PC        RESTORE & RETURN
                      (          edt.asm):01336         ;*
                      (          edt.asm):01337         ;* MOVE FORWARD A PAGE
                      (          edt.asm):01338         ;*
28D9                  (          edt.asm):01339         FWDPAG
28D9 3406             (          edt.asm):01340                 PSHS    A,B                               ;SAVE REGISTERS
28DB BD2AD1           (          edt.asm):01341                 JSR     UPDATE                            ;UPDATE ANY CHANGES
28DE C616             (          edt.asm):01342                 LDB     #LINES-2        GET # LINES
28E0 FE300D           (          edt.asm):01343                 LDU     SCRTOP                            ;GET TOP OF SCREEN
28E3                  (          edt.asm):01344         FWDP1
28E3 A6C4             (          edt.asm):01345                 LDA     ,U                                ;GET CHAR
28E5 2B09             (          edt.asm):01346                 BMI     FWDP2                             ;END OF FILE
28E7 3341             (          edt.asm):01347                 LEAU    1,U                               ;ADVANCE
28E9 810D             (          edt.asm):01348                 CMPA    #NL                               ;NEWLINE?
28EB 26F6             (          edt.asm):01349                 BNE     FWDP1                             ;NO, TRY NEXT
28ED 5A               (          edt.asm):01350                 DECB                                      ;     REDUCE COUNT
28EE 26F3             (          edt.asm):01351                 BNE     FWDP1                             ;KEEP GOING
                      (          edt.asm):01352         ;* RESET POSITIONS & EXIT
28F0                  (          edt.asm):01353         FWDP2
28F0 FF300D           (          edt.asm):01354                 STU     SCRTOP                            ;SET SCREEN TOP
28F3 FF300F           (          edt.asm):01355                 STU     TXTPOS                            ;SET TEXT POSITION
28F6 7F3001           (          edt.asm):01356                 CLR     CY                                ;ZERO 'Y' POSITION
28F9 7A3004           (          edt.asm):01357                 DEC     REFLAG                            ;INDICATE REFRESH R=IRED
28FC 3586             (          edt.asm):01358                 PULS    A,B,PC                            ;RESTORE & RETURN
                      (          edt.asm):01359         ;*
                      (          edt.asm):01360         ;* MOVE WORD LEFT
                      (          edt.asm):01361         ;*
28FE                  (          edt.asm):01362         WRDLT
28FE F63000           (          edt.asm):01363                 LDB     CX                                ;GET 'X' POSITION
2901 2723             (          edt.asm):01364                 BEQ     BACKCHR                           ;END OF ROPE, BACKUP
2903                  (          edt.asm):01365         WRDLT1
2903 A6A2             (          edt.asm):01366                 LDA     ,-Y                               ;GET CHAR
2905 8120             (          edt.asm):01367                 CMPA    #' '                              ;IN SPACE?
2907 2205             (          edt.asm):01368                 BHI     WRDLT2                            ;YES, QUIT
2909 5A               (          edt.asm):01369                 DECB                                      ;     REDUCE COUNT
290A 26F7             (          edt.asm):01370                 BNE     WRDLT1                            ;AND CONTINUE
290C 200B             (          edt.asm):01371                 BRA     WRDLT4                            ;SOL, EXIT
290E                  (          edt.asm):01372         WRDLT2
290E 3121             (          edt.asm):01373                 LEAY    1,Y                               ;ADVANCE
2910                  (          edt.asm):01374         WRDLT3
2910 A6A2             (          edt.asm):01375                 LDA     ,-Y                               ;GET CHAR
2912 8120             (          edt.asm):01376                 CMPA    #' '                              ;IN WORD?
2914 2303             (          edt.asm):01377                 BLS     WRDLT4                            ;NO, EXIT
2916 5A               (          edt.asm):01378                 DECB                                      ;     REDUCE COUNT
2917 26F7             (          edt.asm):01379                 BNE     WRDLT3                            ;AND PROCEED
2919                  (          edt.asm):01380         WRDLT4
2919 F73000           (          edt.asm):01381                 STB     CX                                ;RESAVE 'X' POSITION
291C 39               (          edt.asm):01382                 RTS
                      (          edt.asm):01383         ;*
                      (          edt.asm):01384         ;* MOVE CURSOR TO START OF LINE
                      (          edt.asm):01385         ;*
291D                  (          edt.asm):01386         CURSOL
291D B63000           (          edt.asm):01387                 LDA     CX                                ;GET 'X' POSITION
2920 270E             (          edt.asm):01388                 BEQ     BACKLIN                           ;BACKUP A LINE
2922 7F3000           (          edt.asm):01389                 CLR     CX                                ;RESET TO ZERO
2925 39               (          edt.asm):01390                 RTS
                      (          edt.asm):01391         ;*
                      (          edt.asm):01392         ;* BACKUP A CHARACTER
                      (          edt.asm):01393         ;*
2926                  (          edt.asm):01394         BACKCHR
2926 7A3000           (          edt.asm):01395                 DEC     CX                                ;REDUCE COUNT
2929 B63000           (          edt.asm):01396                 LDA     CX                                ;GET VALUE
292C 4C               (          edt.asm):01397                 INCA                                      ;     WAS IT ZERO
292D 2701             (          edt.asm):01398                 BEQ     BACKLIN                           ;OVERFLOW, BACKUP LINE
292F 39               (          edt.asm):01399                 RTS
                      (          edt.asm):01400         ;*
                      (          edt.asm):01401         ;* BACKUP A LINE
                      (          edt.asm):01402         ;*
2930                  (          edt.asm):01403         BACKLIN
2930 3416             (          edt.asm):01404                 PSHS    A,B,X                             ;SAVE REGISTERS
2932 BD2AD1           (          edt.asm):01405                 JSR     UPDATE                            ;UPDATE ANY CHANGES
2935 FE300F           (          edt.asm):01406                 LDU     TXTPOS                            ;GET CURRENT TEXT POSITION
2938 335F             (          edt.asm):01407                 LEAU    -1,U                              ;BACKUP INCASE AT START OF LINE
293A                  (          edt.asm):01408         BACKL1
293A 11833298         (          edt.asm):01409                 CMPU    #T_BUFF                           ;AT START OF BUFFER?
293E 2506             (          edt.asm):01410                 BLO     BACKL2                            ;YES, EXIT
2940 A6C2             (          edt.asm):01411                 LDA     ,-U                               ;GET PRECEEDING CHAR
2942 810D             (          edt.asm):01412                 CMPA    #NL                               ;NEWLINE?
2944 26F4             (          edt.asm):01413                 BNE     BACKL1                            ;NO, KEEP LOOKING
2946                  (          edt.asm):01414         BACKL2
2946 3341             (          edt.asm):01415                 LEAU    1,U                               ;ADVANCE TO LINE
2948 FF300F           (          edt.asm):01416                 STU     TXTPOS                            ;SAVE LINE POSITION
294B 7A3001           (          edt.asm):01417                 DEC     CY                                ;REDUCE COUNT
294E 2A2D             (          edt.asm):01418                 BPL     BACKL7                            ;NO OVERFLOW
                      (          edt.asm):01419         ;* BACKUP PAST TOP OF SCREEN
2950 BE300D           (          edt.asm):01420                 LDX     SCRTOP                            ;GET TOP OF SCREEN
2953 C60C             (          edt.asm):01421                 LDB     #LINES/2        GET HALF SCREEN
2955                  (          edt.asm):01422         BACKL3
2955 8C3298           (          edt.asm):01423                 CMPX    #T_BUFF                           ;ARE WE AT START?
2958 230B             (          edt.asm):01424                 BLS     BACKL4                            ;YES, EXIT
295A A682             (          edt.asm):01425                 LDA     ,-X                               ;GET PREVIOUS CHAR
295C 810D             (          edt.asm):01426                 CMPA    #NL                               ;NEW LINE?
295E 26F5             (          edt.asm):01427                 BNE     BACKL3                            ;PROCEED
2960 5A               (          edt.asm):01428                 DECB                                      ;     REDUCE COUNT
2961 26F2             (          edt.asm):01429                 BNE     BACKL3                            ;AND PROCEED
2963 3001             (          edt.asm):01430                 LEAX    1,X                               ;ADVANCE TO LINE
2965                  (          edt.asm):01431         BACKL4
2965 BF300D           (          edt.asm):01432                 STX     SCRTOP                            ;RESET TOP OF SCREEN
2968 5F               (          edt.asm):01433                 CLRB                                      ;     ZERO 'B'
2969                  (          edt.asm):01434         BACKL5
2969 F13000           (          edt.asm):01435                 CMPB    CX                                ;ARE WE OVER?
296C 2409             (          edt.asm):01436                 BHS     BACKL6                            ;YES, WE ARE THERE
296E 5C               (          edt.asm):01437                 INCB                                      ;     ADVANCE
296F A6C0             (          edt.asm):01438                 LDA     ,U+                               ;GET CHAR
2971 810D             (          edt.asm):01439                 CMPA    #NL                               ;NEW LINE?
2973 26F4             (          edt.asm):01440                 BNE     BACKL5                            ;PROCEED
2975 335F             (          edt.asm):01441                 LEAU    -1,U                              ;BACKUP
2977                  (          edt.asm):01442         BACKL6
2977 FF3019           (          edt.asm):01443                 STU     NEWPOS                            ;INDICATE MOVE TO
297A 7A3004           (          edt.asm):01444                 DEC     REFLAG                            ;INSURE REFRESH
297D                  (          edt.asm):01445         BACKL7
297D 3596             (          edt.asm):01446                 PULS    A,B,X,PC        RESTORE                  ;* RETURN
                      (          edt.asm):01447         ;*
                      (          edt.asm):01448         ;* GOTO END OF FILE
                      (          edt.asm):01449         ;*
297F                  (          edt.asm):01450         FEND
297F BD2AD1           (          edt.asm):01451                 JSR     UPDATE                            ;UPDATE CHANGES
2982 BD29AC           (          edt.asm):01452                 JSR     FINDEOF                           ;LOCATE END
2985 FF3019           (          edt.asm):01453                 STU     NEWPOS                            ;REPOSITION
2988 FF300D           (          edt.asm):01454                 STU     SCRTOP                            ;SET START OF SCREEN
298B FF300F           (          edt.asm):01455                 STU     TXTPOS                            ;SET START OF LINE
                      (          edt.asm):01456         ;*
                      (          edt.asm):01457         ;* BACKUP A PAGE
                      (          edt.asm):01458         ;*
298E                  (          edt.asm):01459         BACKPAG
298E 3406             (          edt.asm):01460                 PSHS    A,B                               ;SAVE REGS
2990 BD2AD1           (          edt.asm):01461                 JSR     UPDATE                            ;UPDATE ANY CHANGES
2993 C617             (          edt.asm):01462                 LDB     #LINES-1        ZERO COUNTER
2995 FE300D           (          edt.asm):01463                 LDU     SCRTOP                            ;GET TOP OF SCREEN
2998                  (          edt.asm):01464         BACKP1
2998 11833298         (          edt.asm):01465                 CMPU    #T_BUFF                           ;AT START OF BUFFER?
299C 230B             (          edt.asm):01466                 BLS     BACKP2                            ;YES, EXIT
299E A6C2             (          edt.asm):01467                 LDA     ,-U                               ;GET NEXT CHAR
29A0 810D             (          edt.asm):01468                 CMPA    #NL                               ;NEWLINE?
29A2 26F4             (          edt.asm):01469                 BNE     BACKP1                            ;NO, ITS NOT
29A4 5A               (          edt.asm):01470                 DECB                                      ;     REDUCE CONT
29A5 26F1             (          edt.asm):01471                 BNE     BACKP1                            ;KEEP GOING
29A7 3341             (          edt.asm):01472                 LEAU    1,U                               ;ADVANCE
29A9                  (          edt.asm):01473         BACKP2
29A9 7E28F0           (          edt.asm):01474                 JMP     FWDP2                             ;RESAVE REGISTERS
                      (          edt.asm):01475         ;*
                      (          edt.asm):01476         ;* LOCATE THE END OF FILE
                      (          edt.asm):01477         ;* EXIT:   ;U = PTR TO END OF FILE MARKER
                      (          edt.asm):01478         ;*
29AC                  (          edt.asm):01479         FINDEOF
29AC 3402             (          edt.asm):01480                 PSHS    A                                 ;SAVE 'A'
29AE FE300D           (          edt.asm):01481                 LDU     SCRTOP                            ;BEGIN AT TOP OF SCREEN
29B1                  (          edt.asm):01482         FINDE1
29B1 A6C0             (          edt.asm):01483                 LDA     ,U+                               ;GET NEXT CHAR
29B3 2AFC             (          edt.asm):01484                 BPL     FINDE1                            ;KEEP LOOKING
29B5 335F             (          edt.asm):01485                 LEAU    -1,U                              ;BACKUP TO MARKER
29B7 3582             (          edt.asm):01486                 PULS    A,PC                              ;RETORE & RETURN
                      (          edt.asm):01487         ;*
                      (          edt.asm):01488         ;* INSERT A BLOCK OF DATA INTO THE FILE
                      (          edt.asm):01489         ;* ENTRY:    U = PTR TO INSERT AT
                      (          edt.asm):01490         ;*   ;D = # CHARACTERS TO INSERT
                      (          edt.asm):01491         ;*   ;X = PTR TO DATA TO OVERWRITE
                      (          edt.asm):01492         ;*   ;Y = # CHARACTERS TO OVERWRITE
                      (          edt.asm):01493         ;*
29B9                  (          edt.asm):01494         INSERT
29B9 3476             (          edt.asm):01495                 PSHS    A,B,X,Y,U       SAVE REGS
29BB 8DEF             (          edt.asm):01496                 BSR     FINDEOF                           ;LOCATE END OF FILE
29BD 3341             (          edt.asm):01497                 LEAU    1,U                               ;INCLUDE EOF
29BF 30CB             (          edt.asm):01498                 LEAX    D,U                               ;POINTER TO NEW END
29C1 8CDBFF           (          edt.asm):01499                 CMPX    #OSEND                            ;ARE WE OVER?
29C4 2253             (          edt.asm):01500                 BHI     INSERR                            ;REPORT ERROR
                      (          edt.asm):01501         ;* ADJUST FILE TO PROVIDE SPACE
29C6                  (          edt.asm):01502         INSE0
29C6 A6C2             (          edt.asm):01503                 LDA     ,-U                               ;GET CHAR FROM FILE
29C8 A782             (          edt.asm):01504                 STA     ,-X                               ;WRITE TO NEW DATA
29CA 11A366           (          edt.asm):01505                 CMPU    6,S                               ;ARE WE BACK TO PTR
29CD 22F7             (          edt.asm):01506                 BHI     INSE0                             ;NO, KEEP GOING
                      (          edt.asm):01507         ;* ADJUST TOP OF SCREEN
29CF 11B3300D         (          edt.asm):01508                 CMPU    SCRTOP                            ;PTR < SCRTOP?
29D3 2408             (          edt.asm):01509                 BHS     INSE1                             ;NO, ITS OK
29D5 FC300D           (          edt.asm):01510                 LDD     SCRTOP                            ;GET TOP OF SCREEN
29D8 E3E4             (          edt.asm):01511                 ADDD    ,S                                ;ADJUST
29DA FD300D           (          edt.asm):01512                 STD     SCRTOP                            ;RESAVE
                      (          edt.asm):01513         ;* ADJUST TEXT POSITION
29DD                  (          edt.asm):01514         INSE1
29DD 11B3300F         (          edt.asm):01515                 CMPU    TXTPOS                            ;PTR < TXTPOS?
29E1 2408             (          edt.asm):01516                 BHS     INSE2                             ;NO, ITS OK
29E3 FC300F           (          edt.asm):01517                 LDD     TXTPOS                            ;GET TOP OF SCREEN
29E6 E3E4             (          edt.asm):01518                 ADDD    ,S                                ;ADJUST
29E8 FD300F           (          edt.asm):01519                 STD     TXTPOS                            ;RESAVE
                      (          edt.asm):01520         ;* ADJUST TAG POSITIONS
29EB                  (          edt.asm):01521         INSE2
29EB 11B33011         (          edt.asm):01522                 CMPU    TAG                               ;PTR < TAG?
29EF 2408             (          edt.asm):01523                 BHS     INSE3                             ;NO, ITS OK
29F1 FC3011           (          edt.asm):01524                 LDD     TAG                               ;GET FIRST TAGE
29F4 E3E4             (          edt.asm):01525                 ADDD    ,S                                ;ADJUST
29F6 FD3011           (          edt.asm):01526                 STD     TAG                               ;RESAVE
29F9                  (          edt.asm):01527         INSE3
29F9 11B33013         (          edt.asm):01528                 CMPU    TAG1                              ;PTR < TAG1
29FD 2408             (          edt.asm):01529                 BHS     INSE4                             ;NO, ITS OK
29FF FC3013           (          edt.asm):01530                 LDD     TAG1                              ;GET SECOND TAG
2A02 E3E4             (          edt.asm):01531                 ADDD    ,S                                ;ADJUST
2A04 FD3013           (          edt.asm):01532                 STD     TAG1                              ;RESAVE
                      (          edt.asm):01533         ;* ADJUST OVERWRITE POINTER
2A07                  (          edt.asm):01534         INSE4
2A07 11A362           (          edt.asm):01535                 CMPU    2,S                               ;PTR < OVERWRITE
2A0A 2406             (          edt.asm):01536                 BHS     INSE5                             ;NO, ITS OK
2A0C EC62             (          edt.asm):01537                 LDD     2,S                               ;GET OVERWRITE POINTER
2A0E E3E4             (          edt.asm):01538                 ADDD    ,S                                ;ADJUST
2A10 ED62             (          edt.asm):01539                 STD     2,S                               ;RESAVE
                      (          edt.asm):01540         ;* COPY IN THE NEW TEXT
2A12                  (          edt.asm):01541         INSE5
2A12 AE62             (          edt.asm):01542                 LDX     2,S                               ;RESTORE SOURCE POINTER
2A14 BD2A21           (          edt.asm):01543                 JSR     COPY                              ;PERFORM COPY
2A17 35F6             (          edt.asm):01544                 PULS    A,B,X,Y,U,PC    RESTORE & RETURN
                      (          edt.asm):01545         ;* ERROR, CANNOT INSERT TEXT
2A19                  (          edt.asm):01546         INSERR
2A19 CC2D8B           (          edt.asm):01547                 LDD     #INEMSG                           ;POINT TO MESSAGE
2A1C FD301B           (          edt.asm):01548                 STD     ERRMSG                            ;SAVE IT
2A1F 35F6             (          edt.asm):01549                 PULS    A,B,X,Y,U,PC    RESTORE & RETURN
                      (          edt.asm):01550         ;*
                      (          edt.asm):01551         ;* COPY MEMORY SUBROUTINE
                      (          edt.asm):01552         ;* ENTRY:    X = SOURCE PTR
                      (          edt.asm):01553         ;*   ;U = DEST PTR
                      (          edt.asm):01554         ;*   ;Y = LENGTH
                      (          edt.asm):01555         ;*
2A21                  (          edt.asm):01556         COPY
2A21 3121             (          edt.asm):01557                 LEAY    1,Y                               ;ADVANCE FOR DEC
2A23                  (          edt.asm):01558         COPY1
2A23 313F             (          edt.asm):01559                 LEAY    -1,Y                              ;REDUCE COUNT
2A25 2706             (          edt.asm):01560                 BEQ     COPY2                             ;EXIT
2A27 A680             (          edt.asm):01561                 LDA     ,X+                               ;GET CHAR FROM SOURCE
2A29 A7C0             (          edt.asm):01562                 STA     ,U+                               ;WRITE INTO DEST
2A2B 20F6             (          edt.asm):01563                 BRA     COPY1                             ;AND PROCEED
2A2D                  (          edt.asm):01564         COPY2
2A2D 86FF             (          edt.asm):01565                 LDA     #-1                               ;GET SET FLAG
2A2F B7300A           (          edt.asm):01566                 STA     FCHANGE                           ;INDICATE FILE CHANGED
2A32 39               (          edt.asm):01567                 RTS
                      (          edt.asm):01568         ;*
                      (          edt.asm):01569         ;* DELETE DATA FROM FILE
                      (          edt.asm):01570         ;* ENTRY:    U = PTR TO LOCATION TO DELETE
                      (          edt.asm):01571         ;*   ;D = # CHARACTERS TO DELETE
2A33                  (          edt.asm):01572         DELETE
2A33 3456             (          edt.asm):01573                 PSHS    A,B,X,U                           ;SAVE DATA
2A35 30CB             (          edt.asm):01574                 LEAX    D,U                               ;'X' = POS + LEN
                      (          edt.asm):01575         ;* ADJUST LINE POSITION IF WE DELETE
2A37 11B3300F         (          edt.asm):01576                 CMPU    TXTPOS                            ;PTR < TEXTPOS?
2A3B 2412             (          edt.asm):01577                 BHS     DELE2                             ;NO, ITS OK
2A3D FC300F           (          edt.asm):01578                 LDD     TXTPOS                            ;GET ADDRESS
2A40 A3E4             (          edt.asm):01579                 SUBD    ,S                                ;ADJUST
2A42 10A364           (          edt.asm):01580                 CMPD    4,S                               ;NEW TXTPOS < PTR ?
2A45 2402             (          edt.asm):01581                 BHS     DELE1                             ;NO, ITS OK
2A47 1F30             (          edt.asm):01582                 TFR     U,D                               ;TXTPOS = PTR
2A49                  (          edt.asm):01583         DELE1
2A49 FD300F           (          edt.asm):01584                 STD     TXTPOS                            ;SET POSITION
2A4C FD3019           (          edt.asm):01585                 STD     NEWPOS                            ;ADJUST POSITION
                      (          edt.asm):01586         ;* ADJUST SCREEN TOP IF WE DELETE
2A4F                  (          edt.asm):01587         DELE2
2A4F 11B3300D         (          edt.asm):01588                 CMPU    SCRTOP                            ;PTR < SCRTOP?
2A53 2412             (          edt.asm):01589                 BHS     DELE4                             ;NO, ITS OK
2A55 FC300D           (          edt.asm):01590                 LDD     SCRTOP                            ;GET ADDRESS
2A58 A3E4             (          edt.asm):01591                 SUBD    ,S                                ;ADJUST
2A5A 10A364           (          edt.asm):01592                 CMPD    4,S                               ;NEW SCRTOP < PTR?
2A5D 2402             (          edt.asm):01593                 BHS     DELE3                             ;NO, ITS OK
2A5F 1F30             (          edt.asm):01594                 TFR     U,D                               ;SCRTOP = PTR
2A61                  (          edt.asm):01595         DELE3
2A61 FD300D           (          edt.asm):01596                 STD     SCRTOP                            ;SET POSITION
2A64 7A3004           (          edt.asm):01597                 DEC     REFLAG                            ;INDICATE REFRESH R=IRED
                      (          edt.asm):01598         ;* ADJUST TAGGED LINE POSITIONS
2A67                  (          edt.asm):01599         DELE4
2A67 11B33011         (          edt.asm):01600                 CMPU    TAG                               ;PTR < TAG?
2A6B 2408             (          edt.asm):01601                 BHS     DELE5                             ;NO, ITS OK
2A6D FC3011           (          edt.asm):01602                 LDD     TAG                               ;GET TAG
2A70 A3E4             (          edt.asm):01603                 SUBD    ,S                                ;ADJUST
2A72 FD3011           (          edt.asm):01604                 STD     TAG                               ;RESAVE
2A75                  (          edt.asm):01605         DELE5
2A75 11B33013         (          edt.asm):01606                 CMPU    TAG1                              ;PTR < TAG1
2A79 2408             (          edt.asm):01607                 BHS     DELE6                             ;NO, ITS OK
2A7B FC3013           (          edt.asm):01608                 LDD     TAG1                              ;GET TAG1
2A7E A3E4             (          edt.asm):01609                 SUBD    ,S                                ;ADJUST
2A80 FD3013           (          edt.asm):01610                 STD     TAG1                              ;RESAVE
                      (          edt.asm):01611         ;* PERFORM DELETE FROM TEXT
2A83                  (          edt.asm):01612         DELE6
2A83 A680             (          edt.asm):01613                 LDA     ,X+                               ;GET CHAR
2A85 A7C0             (          edt.asm):01614                 STA     ,U+                               ;WRITE IT
2A87 2AFA             (          edt.asm):01615                 BPL     DELE6                             ;DO ALL DATA
2A89 86FF             (          edt.asm):01616                 LDA     #-1                               ;GET SET FLAG
2A8B B7300A           (          edt.asm):01617                 STA     FCHANGE                           ;INDICATE FILE CHANGED
2A8E 35D6             (          edt.asm):01618                 PULS    A,B,X,U,PC      RESTORE & RETURN
                      (          edt.asm):01619         ;*
                      (          edt.asm):01620         ;* BEGIN EDITING CURRENT LINE, IF NOT ALREADY IN EDIT
                      (          edt.asm):01621         ;* BUFFER, COPY IT THERE.
                      (          edt.asm):01622         ;* EXIT:   ;Y = PTR TO CURRENT CHAR IN EDIT BUFFER
                      (          edt.asm):01623         ;*
2A90                  (          edt.asm):01624         EDIT
2A90 3456             (          edt.asm):01625                 PSHS    A,B,X,U                           ;RESTORE & RETURN
2A92 8E306C           (          edt.asm):01626                 LDX     #E_BUFF                           ;POINT TO EDIT BUFFER
2A95 F63000           (          edt.asm):01627                 LDB     CX                                ;GET 'X' POSITION
2A98 4F               (          edt.asm):01628                 CLRA                                      ;     ZERO HIGH
2A99 318B             (          edt.asm):01629                 LEAY    D,X                               ;OFFSET TO POSITION
2A9B B63009           (          edt.asm):01630                 LDA     CHANGE                            ;LINE ALREADY IN BUFFER?
2A9E 262F             (          edt.asm):01631                 BNE     EDIT4                             ;YES, ALL IS OK
                      (          edt.asm):01632         ;* COPY EDIT LINE OVER
2AA0 FE300F           (          edt.asm):01633                 LDU     TXTPOS                            ;GET LINE POSITION
2AA3 7F300B           (          edt.asm):01634                 CLR     EDTLEN                            ;ZERO COUNT
2AA6                  (          edt.asm):01635         EDIT1
2AA6 7C300B           (          edt.asm):01636                 INC     EDTLEN                            ;ADVANCE COUNT
2AA9 A6C4             (          edt.asm):01637                 LDA     ,U                                ;GET CHAR
2AAB 2B0A             (          edt.asm):01638                 BMI     EDIT2                             ;EOF, EXIT
2AAD 3341             (          edt.asm):01639                 LEAU    1,U                               ;ADVANCE
2AAF A780             (          edt.asm):01640                 STA     ,X+                               ;WRITE IT OUT
2AB1 810D             (          edt.asm):01641                 CMPA    #NL                               ;NEW LINE?
2AB3 2710             (          edt.asm):01642                 BEQ     EDIT3                             ;EXIT
2AB5 20EF             (          edt.asm):01643                 BRA     EDIT1                             ;AND KEEP COPYING
                      (          edt.asm):01644         ;* END OF FILE ENCOUNTERED, INSERT CARRIAGE RETURN
2AB7                  (          edt.asm):01645         EDIT2
2AB7 860D             (          edt.asm):01646                 LDA     #NL                               ;GET A NEWLINE
2AB9 A780             (          edt.asm):01647                 STA     ,X+                               ;WRITE IT OUT
2ABB F63001           (          edt.asm):01648                 LDB     CY                                ;GET 'Y' POSITION
2ABE 5C               (          edt.asm):01649                 INCB                                      ;     ADVANCE
2ABF BD2BB4           (          edt.asm):01650                 JSR     REFSCR                            ;DISPLAY "EOF" MARKER
2AC2 BD2CB7           (          edt.asm):01651                 JSR     GOTOXX                            ;RESTORE CURSOR
                      (          edt.asm):01652         ;* WE HAVE EDIT LINE
2AC5                  (          edt.asm):01653         EDIT3
2AC5 86FF             (          edt.asm):01654                 LDA     #-1                               ;GET SET FLAG
2AC7 A784             (          edt.asm):01655                 STA     ,X                                ;WRITE END OF LINE
2AC9 B73009           (          edt.asm):01656                 STA     CHANGE                            ;INDICATE CHANGED
2ACC B7300A           (          edt.asm):01657                 STA     FCHANGE                           ;INDICATE FILE CHANGED
2ACF                  (          edt.asm):01658         EDIT4
2ACF 35D6             (          edt.asm):01659                 PULS    A,B,X,U,PC      RESTORE & RETURN
                      (          edt.asm):01660         ;*
                      (          edt.asm):01661         ;* UPDATE ANY CHANEGS WHICH ARE PENDING
                      (          edt.asm):01662         ;*
2AD1                  (          edt.asm):01663         UPDATE
2AD1 3476             (          edt.asm):01664                 PSHS    A,B,X,Y,U       SAVE REGS
2AD3 B63009           (          edt.asm):01665                 LDA     CHANGE                            ;ANY CHANGES?
2AD6 2734             (          edt.asm):01666                 BEQ     UPDAT6                            ;NO, ITS OK
2AD8 FE300F           (          edt.asm):01667                 LDU     TXTPOS                            ;POINT TO CURRENT LINE
2ADB 1F31             (          edt.asm):01668                 TFR     U,X                               ;'X' = COPY
2ADD 5F               (          edt.asm):01669                 CLRB                                      ;     ZERO COUNT
2ADE                  (          edt.asm):01670         UPDAT1
2ADE A684             (          edt.asm):01671                 LDA     ,X                                ;GET CHAR
2AE0 2B07             (          edt.asm):01672                 BMI     UPDAT2                            ;END OF BUFFER
2AE2 5C               (          edt.asm):01673                 INCB                                      ;     ADVANCE COUNTER
2AE3 3001             (          edt.asm):01674                 LEAX    1,X                               ;ADVANCE PTR
2AE5 810D             (          edt.asm):01675                 CMPA    #NL                               ;NEW LINE?
2AE7 26F5             (          edt.asm):01676                 BNE     UPDAT1                            ;KEEP GOING
2AE9                  (          edt.asm):01677         UPDAT2
2AE9 4F               (          edt.asm):01678                 CLRA                                      ;     ZERO HIGH
2AEA 3404             (          edt.asm):01679                 PSHS    B                                 ;SAVE COUNT
2AEC F6300B           (          edt.asm):01680                 LDB     EDTLEN                            ;GET EDIT BUFFER LENGTH
2AEF 1F02             (          edt.asm):01681                 TFR     D,Y                               ;'Y' = EDIT LENGTH
2AF1 3504             (          edt.asm):01682                 PULS    B                                 ;RESTORE IT
2AF3 8E306C           (          edt.asm):01683                 LDX     #E_BUFF                           ;POINT TO EDIT BUFFER
2AF6 F0300B           (          edt.asm):01684                 SUBB    EDTLEN                            ;CHECK LENGTHS
2AF9 2406             (          edt.asm):01685                 BHS     UPDAT3                            ;BUFFER IS LARGER
                      (          edt.asm):01686         ;* BUFFER IS LARGER, INSERT SPACE
2AFB 50               (          edt.asm):01687                 NEGB                                      ;     CONVERT TO POSITIVE VALUE
2AFC BD29B9           (          edt.asm):01688                 JSR     INSERT                            ;INSERT SPACE
2AFF 2008             (          edt.asm):01689                 BRA     UPDAT5                            ;AND PROCEED
2B01                  (          edt.asm):01690         UPDAT3
2B01 2703             (          edt.asm):01691                 BEQ     UPDAT4                            ;SAME LENGTH
                      (          edt.asm):01692         ;* BUFFER IS SMALLER, DELETE TEXT
2B03 BD2A33           (          edt.asm):01693                 JSR     DELETE                            ;DELETE SOME TEXT
2B06                  (          edt.asm):01694         UPDAT4
2B06 BD2A21           (          edt.asm):01695                 JSR     COPY                              ;PERFORM COPY
2B09                  (          edt.asm):01696         UPDAT5
2B09 7F3009           (          edt.asm):01697                 CLR     CHANGE                            ;INDICATE LINE NOT CHANGED
2B0C                  (          edt.asm):01698         UPDAT6
2B0C 35F6             (          edt.asm):01699                 PULS    A,B,X,Y,U,PC    RESTORE & RETURN
                      (          edt.asm):01700         ;*
                      (          edt.asm):01701         ;* SET THE 'HORZ' VARIABLE TO THE CORRECT VALUE FOR THE CURRENT
                      (          edt.asm):01702         ;* CURSOR POSITION, AND SET UP A POINTER TO THE ACTUAL LINE
                      (          edt.asm):01703         ;* ON WHICH THE CURSOR IS ON (THIS WILL BE THE TEXT FILE OR
                      (          edt.asm):01704         ;* THE EDIT BUFFER).
                      (          edt.asm):01705         ;* ENTRY:       NONE
                      (          edt.asm):01706         ;* EXIT:   ;U = POINTER TO CHARACTER
                      (          edt.asm):01707         ;*   ;B = ACTUAL 'X' POSITION OF CURSOR
                      (          edt.asm):01708         ;*
2B0E                  (          edt.asm):01709         POSITC
2B0E 3412             (          edt.asm):01710                 PSHS    A,X                               ;SAVE REGISTERS
2B10 FE300F           (          edt.asm):01711                 LDU     TXTPOS                            ;GET LINE POSITION
2B13 B63009           (          edt.asm):01712                 LDA     CHANGE                            ;GET CHANGEED FLAG
2B16 2703             (          edt.asm):01713                 BEQ     POSIT1                            ;NOT IN EDIT BUFFER
2B18 CE306C           (          edt.asm):01714                 LDU     #E_BUFF                           ;POINT TO EDIT BUFFER
                      (          edt.asm):01715         ;* LOCATE ACTUAL 'X' POSITION IN LINE
2B1B                  (          edt.asm):01716         POSIT1
2B1B 1F31             (          edt.asm):01717                 TFR     U,X                               ;'X' = TEMP ADDRESS
2B1D 7F3002           (          edt.asm):01718                 CLR     HORZ                              ;ZERO ACTUAL 'X' POSITION
2B20 5F               (          edt.asm):01719                 CLRB                                      ;     ZERO B
2B21                  (          edt.asm):01720         POSIT2
2B21 F13000           (          edt.asm):01721                 CMPB    CX                                ;ARE WE AT 'X' POSITION
2B24 2414             (          edt.asm):01722                 BHS     POSIT4                            ;YES, EXIT
2B26 A680             (          edt.asm):01723                 LDA     ,X+                               ;GET CHAR
2B28 2B10             (          edt.asm):01724                 BMI     POSIT4                            ;EOF, EXIT
2B2A 810D             (          edt.asm):01725                 CMPA    #NL                               ;NEW LINE?
2B2C 270C             (          edt.asm):01726                 BEQ     POSIT4                            ;YES, EXIT
2B2E 5C               (          edt.asm):01727                 INCB                                      ;     REDUCE COUNT
2B2F 7C3002           (          edt.asm):01728                 INC     HORZ                              ;ADVANCE 'X' POSITION
2B32 8109             (          edt.asm):01729                 CMPA    #TAB                              ;IS IT A TAB?
2B34 26EB             (          edt.asm):01730                 BNE     POSIT2                            ;NO, KEEP GOING
2B36 8D68             (          edt.asm):01731                 BSR     SKPTAB                            ;SKIP THE TAB STOP
2B38 20E7             (          edt.asm):01732                 BRA     POSIT2                            ;AND TEST AGAIN
                      (          edt.asm):01733         ;* IF POSITION IS < LEFT MARGIN, SCROLL SRCEEN LEFT
2B3A                  (          edt.asm):01734         POSIT4
2B3A B63003           (          edt.asm):01735                 LDA     OFFSET                            ;GET LEFT MARGIN
2B3D B13002           (          edt.asm):01736                 CMPA    HORZ                              ;> CURRENT POSITION?
2B40 2207             (          edt.asm):01737                 BHI     POSIT5                            ;YES, HANDLE IT
                      (          edt.asm):01738         ;* IF POSITION > RIGHT MARGIN, SCROLL SCREEN RIGHT
2B42 8B50             (          edt.asm):01739                 ADDA    #COLS                             ;OFFSET TO RIGHT MARGIN
2B44 B13002           (          edt.asm):01740                 CMPA    HORZ                              ;<= CURRENT POSITION
2B47 220C             (          edt.asm):01741                 BHI     POSIT6                            ;NO, DONT ADJUST
2B49                  (          edt.asm):01742         POSIT5
2B49 8028             (          edt.asm):01743                 SUBA    #COLS/2                           ;SCROLL SCREEN LEFT
2B4B B73003           (          edt.asm):01744                 STA     OFFSET                            ;RESET OFFSET
2B4E 8D81             (          edt.asm):01745                 BSR     UPDATE                            ;INSURE CHANGES ARE UPDATED
2B50 7A3004           (          edt.asm):01746                 DEC     REFLAG                            ;INSURE REFRESH OCCURS
2B53 20E5             (          edt.asm):01747                 BRA     POSIT4                            ;INSURE WE HAVE DONE ENOUGH
2B55                  (          edt.asm):01748         POSIT6
2B55 3592             (          edt.asm):01749                 PULS    A,X,PC                            ;RESTORE & RETURN
                      (          edt.asm):01750         ;*
                      (          edt.asm):01751         ;* REPOSITION THE CURSOR TO THE INDICATED ADDRESS
                      (          edt.asm):01752         ;* ENTRY: U = ADDRESS
                      (          edt.asm):01753         ;*
2B57                  (          edt.asm):01754         REPOS
2B57 3456             (          edt.asm):01755                 PSHS    A,B,X,U                           ;SAVE REGISTERS
                      (          edt.asm):01756         ;* CALCULATE NEW 'Y' ADDRESS
2B59 5F               (          edt.asm):01757                 CLRB                                      ;     ZERO 'Y' POSITION
2B5A BE300D           (          edt.asm):01758                 LDX     SCRTOP                            ;GET SCREEN TOP
2B5D                  (          edt.asm):01759         REPO1
2B5D AC64             (          edt.asm):01760                 CMPX    4,S                               ;ARE WE OVER?
2B5F 240D             (          edt.asm):01761                 BHS     REPO2                             ;YES, QUIT
2B61 A680             (          edt.asm):01762                 LDA     ,X+                               ;GET CHAR
2B63 810D             (          edt.asm):01763                 CMPA    #NL                               ;END OF LINE?
2B65 26F6             (          edt.asm):01764                 BNE     REPO1                             ;NO, ITS OK
2B67 5C               (          edt.asm):01765                 INCB                                      ;     ADVANCE 'Y' POSITION
2B68 C116             (          edt.asm):01766                 CMPB    #LINES-2        OVER SCREEN?
2B6A 23F1             (          edt.asm):01767                 BLS     REPO1                             ;NO, ITS OK
2B6C AE64             (          edt.asm):01768                 LDX     4,S                               ;NO SENSE LOOKING FURTHOR
                      (          edt.asm):01769         ;* CALCULATE NEW 'X' ADDRESS
2B6E                  (          edt.asm):01770         REPO2
2B6E 7F3000           (          edt.asm):01771                 CLR     CX                                ;ZERO 'X' POSITION
2B71 F73001           (          edt.asm):01772                 STB     CY                                ;SAVE 'Y' POSITION
2B74                  (          edt.asm):01773         REPO3
2B74 11833298         (          edt.asm):01774                 CMPU    #T_BUFF                           ;START OF FILE?
2B78 230D             (          edt.asm):01775                 BLS     REPO4                             ;YES, EXIT
2B7A A65F             (          edt.asm):01776                 LDA     -1,U                              ;GET CHAR
2B7C 810D             (          edt.asm):01777                 CMPA    #NL                               ;START OF LINE?
2B7E 2707             (          edt.asm):01778                 BEQ     REPO4                             ;YES, EXIT
2B80 335F             (          edt.asm):01779                 LEAU    -1,U                              ;REDUCE COUNT
2B82 7C3000           (          edt.asm):01780                 INC     CX                                ;ADVANCE POSITION
2B85 20ED             (          edt.asm):01781                 BRA     REPO3                             ;AND CONTINUE
2B87                  (          edt.asm):01782         REPO4
2B87 FF300F           (          edt.asm):01783                 STU     TXTPOS                            ;SAVE LINE POSITION
2B8A AE64             (          edt.asm):01784                 LDX     4,S                               ;RESTORE 'U'
2B8C BC300D           (          edt.asm):01785                 CMPX    SCRTOP                            ;ARE WE WITHIN SCREEN?
2B8F 2504             (          edt.asm):01786                 BLO     REPO5                             ;YES, ITS OK
2B91 C116             (          edt.asm):01787                 CMPB    #LINES-2        ARE WE OVER?
2B93 2309             (          edt.asm):01788                 BLS     REPO6                             ;NO, ITS OK
2B95                  (          edt.asm):01789         REPO5
2B95 7F3001           (          edt.asm):01790                 CLR     CY                                ;RESET TO ZERO
2B98 FF300D           (          edt.asm):01791                 STU     SCRTOP                            ;RESET TOP OF SCREEN
2B9B 7A3004           (          edt.asm):01792                 DEC     REFLAG                            ;INDICATE REFRESH R=IRED
2B9E                  (          edt.asm):01793         REPO6
2B9E 35D6             (          edt.asm):01794                 PULS    A,B,X,U,PC      RESTORE & RETURN
                      (          edt.asm):01795         ;*
                      (          edt.asm):01796         ;* SKIP AHEAD A TAB STOP
                      (          edt.asm):01797         ;*
2BA0                  (          edt.asm):01798         SKPTAB
2BA0 B63002           (          edt.asm):01799                 LDA     HORZ                              ;GET 'X' POSITION
2BA3 8507             (          edt.asm):01800                 BITA    #%00000111      AT TAB STOP?
2BA5 2705             (          edt.asm):01801                 BEQ     SKPT1                             ;YES, WE ARE
2BA7 7C3002           (          edt.asm):01802                 INC     HORZ                              ;ADVANCE IT
2BAA 20F4             (          edt.asm):01803                 BRA     SKPTAB                            ;AND PROCEED
2BAC                  (          edt.asm):01804         SKPT1
2BAC 39               (          edt.asm):01805                 RTS
                      (          edt.asm):01806         ;*
                      (          edt.asm):01807         ;* REFRESH ENTIRE SCREEN FROM TOP
                      (          edt.asm):01808         ;*
2BAD                  (          edt.asm):01809         REFALL
2BAD FE300D           (          edt.asm):01810                 LDU     SCRTOP                            ;GET TOP OF SCREEN ADDRESS
2BB0 5F               (          edt.asm):01811                 CLRB                                      ;     ZERO 'Y' POSITION
2BB1 F73004           (          edt.asm):01812                 STB     REFLAG                            ;SET REFRESH FLAG
                      (          edt.asm):01813         ;*
                      (          edt.asm):01814         ;* REFRESH SCREEN:
                      (          edt.asm):01815         ;* ENTRY:    U = PTR TO TEXT, B = VERT LINE
                      (          edt.asm):01816         ;*
2BB4                  (          edt.asm):01817         REFSCR
2BB4 3446             (          edt.asm):01818                 PSHS    A,B,U                             ;SAVE REGISTERS
2BB6 B63002           (          edt.asm):01819                 LDA     HORZ                              ;GET HORZ POSITION
2BB9 3402             (          edt.asm):01820                 PSHS    A                                 ;SAVE FOR LATER
2BBB                  (          edt.asm):01821         REFS1
2BBB 4F               (          edt.asm):01822                 CLRA                                      ;     'X' POSITION
2BBC B73002           (          edt.asm):01823                 STA     HORZ                              ;ZERO HORIZONTAL
2BBF BD2CC0           (          edt.asm):01824                 JSR     GOTOXY                            ;MOVE CURSOR
2BC2 A6C4             (          edt.asm):01825                 LDA     ,U                                ;GET TEXT CHAR
2BC4 2B09             (          edt.asm):01826                 BMI     REFS2                             ;END OF FILE
2BC6 8D1F             (          edt.asm):01827                 BSR     REFLIN                            ;DISPLAY LINE
2BC8 5C               (          edt.asm):01828                 INCB                                      ;     ADVANCE COUNT
2BC9 C117             (          edt.asm):01829                 CMPB    #LINES-1        ARE WE OVER?
2BCB 2410             (          edt.asm):01830                 BHS     REFS3                             ;YES, WE ARE
2BCD 20EC             (          edt.asm):01831                 BRA     REFS1                             ;AND PROCEED
                      (          edt.asm):01832         ;* END OF FILE ENCOUNTERED
2BCF                  (          edt.asm):01833         REFS2
2BCF BD2C9A           (          edt.asm):01834                 JSR     WSO                               ;SPECIAL EFFECTS
2BD2 3F               (          edt.asm):01835                 SWI
2BD3 18               (          edt.asm):01836                 FCB     24                                ;DISPLAY MESSAGE
2BD4 2A454F462A00     (          edt.asm):01837                 FCN     '*EOF*'
2BDA BD2C9E           (          edt.asm):01838                 JSR     WSE                               ;RESET SPECIAL
2BDD                  (          edt.asm):01839         REFS3
2BDD BD2C92           (          edt.asm):01840                 JSR     WCD                               ;CLEAR END OF SCREEN
2BE0 3502             (          edt.asm):01841                 PULS    A                                 ;RESTORE HORZ
2BE2 B73002           (          edt.asm):01842                 STA     HORZ                              ;RE-SAVE IT
2BE5 35C6             (          edt.asm):01843                 PULS    A,B,U,PC        RESTORE & RETURN
                      (          edt.asm):01844         ;*
                      (          edt.asm):01845         ;* REFRESH LINE:
                      (          edt.asm):01846         ;* ENTRY: U = PTR LINE TO DISPLAY
                      (          edt.asm):01847         ;* EXIT:  U = PTR TO NEXT LINE
                      (          edt.asm):01848         ;*
2BE7                  (          edt.asm):01849         REFLIN
2BE7 B63003           (          edt.asm):01850                 LDA     OFFSET                            ;GET SCREEN OFFSET
2BEA 8B50             (          edt.asm):01851                 ADDA    #COLS                             ;CALCULATE LAST POSITION
2BEC B7301E           (          edt.asm):01852                 STA     TEMP+1                            ;SAVE FOR LATER
                      (          edt.asm):01853         ;* DISPLAY TAGGED LINES IN SPECIAL VIDEO
2BEF 11B33011         (          edt.asm):01854                 CMPU    TAG                               ;ARE WE IN TAG RANGE?
2BF3 250C             (          edt.asm):01855                 BLO     REFL0A                            ;NO, ITS OK
2BF5 11B33013         (          edt.asm):01856                 CMPU    TAG1                              ;STILL IN TAG RANGE?
2BF9 2206             (          edt.asm):01857                 BHI     REFL0A                            ;NO, ITS OK
2BFB 7A3006           (          edt.asm):01858                 DEC     VIDEO                             ;SET VIDEO FLAG
2BFE BD2C9A           (          edt.asm):01859                 JSR     WSO                               ;DISPLAY TAGG INFO
                      (          edt.asm):01860         ;* SKIP ANY DATA WHICH PRECEEDS THE HORIZONTAL SCROLLING WINDOW
2C01                  (          edt.asm):01861         REFL0A
2C01 B63002           (          edt.asm):01862                 LDA     HORZ                              ;GET 'X' POSITION
2C04 B13003           (          edt.asm):01863                 CMPA    OFFSET                            ;ARE WE LOWER?
2C07 2415             (          edt.asm):01864                 BHS     REFL1                             ;NO, EXIT
2C09 A6C4             (          edt.asm):01865                 LDA     ,U                                ;GET CHAR
2C0B 2B48             (          edt.asm):01866                 BMI     REFL2A                            ;END OF FILE
2C0D 810D             (          edt.asm):01867                 CMPA    #NL                               ;NEW LINE?
2C0F 2744             (          edt.asm):01868                 BEQ     REFL2A                            ;EXIT
2C11 3341             (          edt.asm):01869                 LEAU    1,U                               ;ADVANCE
2C13 7C3002           (          edt.asm):01870                 INC     HORZ                              ;ADVANCE HORZ
2C16 8109             (          edt.asm):01871                 CMPA    #TAB                              ;IS IT A TAB?
2C18 26E7             (          edt.asm):01872                 BNE     REFL0A                            ;NO, ALL IS OK
2C1A 8D84             (          edt.asm):01873                 BSR     SKPTAB                            ;SKIP TO NEXT TAB STOP
2C1C 20E3             (          edt.asm):01874                 BRA     REFL0A                            ;AND PROCEED
                      (          edt.asm):01875         ;* DISPLAY ANY DATA WHICH IS WITHIN THE HORIZONTAL SCROLLING WINDOW
2C1E                  (          edt.asm):01876         REFL1
2C1E B63002           (          edt.asm):01877                 LDA     HORZ                              ;GET 'X' POSITION
2C21 B1301E           (          edt.asm):01878                 CMPA    TEMP+1                            ;ARE WE OVER?
2C24 2431             (          edt.asm):01879                 BHS     REFL3                             ;YES, EXIT
2C26 A6C4             (          edt.asm):01880                 LDA     ,U                                ;GET CHAR
2C28 2B2B             (          edt.asm):01881                 BMI     REFL2A                            ;END OF FILE (NO EOL)
2C2A 810D             (          edt.asm):01882                 CMPA    #NL                               ;NEW LINE CHAR?
2C2C 2718             (          edt.asm):01883                 BEQ     REFL2                             ;YES, EXIT
2C2E 3341             (          edt.asm):01884                 LEAU    1,U                               ;ADVANCE IT
2C30 8109             (          edt.asm):01885                 CMPA    #TAB                              ;IS IT A TAB?
2C32 2704             (          edt.asm):01886                 BEQ     REFL1A                            ;YES, HANDLE IT
2C34 8D36             (          edt.asm):01887                 BSR     WRCHR                             ;DISPLAY THE CHARACTER
2C36 20E6             (          edt.asm):01888                 BRA     REFL1                             ;AND PROCEED
                      (          edt.asm):01889         ;* TAB CHAR, ADVANCE TO TAB STOP
2C38                  (          edt.asm):01890         REFL1A
2C38 3F               (          edt.asm):01891                 SWI
2C39 15               (          edt.asm):01892                 FCB     21                                ;OUTPUT A SPACE
2C3A 7C3002           (          edt.asm):01893                 INC     HORZ                              ;ADVANCE POSITION
2C3D B63002           (          edt.asm):01894                 LDA     HORZ                              ;GET POSITION
2C40 8507             (          edt.asm):01895                 BITA    #%00000111      AT TAB STOP?
2C42 26F4             (          edt.asm):01896                 BNE     REFL1A                            ;NO, PROCEED
2C44 20D8             (          edt.asm):01897                 BRA     REFL1                             ;AND PROCEED
                      (          edt.asm):01898         ;* END OF LINE, PRINT EOL CHAR IF ENABLED, AND CLEAR REMINDER
2C46                  (          edt.asm):01899         REFL2
2C46 7D3008           (          edt.asm):01900                 TST     EOLFLAG                           ;DO WE DISPLAY END OF LINE?
2C49 2A0A             (          edt.asm):01901                 BPL     REFL2A                            ;NO, WE DON'T
2C4B 8D1F             (          edt.asm):01902                 BSR     WRCHR                             ;DISPLAY END OF LINE
2C4D B63002           (          edt.asm):01903                 LDA     HORZ                              ;GET 'X' POSITION
2C50 B1301E           (          edt.asm):01904                 CMPA    TEMP+1                            ;ARE WE OVER?
2C53 2402             (          edt.asm):01905                 BHS     REFL3                             ;YES, DON'T CLEAR
2C55                  (          edt.asm):01906         REFL2A
2C55 8D3F             (          edt.asm):01907                 BSR     WCE                               ;CLEAR END OF LINE
                      (          edt.asm):01908         ;* SKIP ANY DATA WHICH FOLLOWS THE HORIZONTAL SCROLLING WINDOW.
2C57                  (          edt.asm):01909         REFL3
2C57 A6C4             (          edt.asm):01910                 LDA     ,U                                ;GET CHARCTER
2C59 2B06             (          edt.asm):01911                 BMI     REFL4                             ;EOF, EXIT
2C5B 3341             (          edt.asm):01912                 LEAU    1,U                               ;ADVANCE
2C5D 810D             (          edt.asm):01913                 CMPA    #NL                               ;NEWLINE?
2C5F 26F6             (          edt.asm):01914                 BNE     REFL3                             ;NO, KEEP LOOKING
                      (          edt.asm):01915         ;* TURN OFF SPECIAL VIDEO
2C61                  (          edt.asm):01916         REFL4
2C61 B63006           (          edt.asm):01917                 LDA     VIDEO                             ;SPECIAL MODE
2C64 2705             (          edt.asm):01918                 BEQ     REFL5                             ;NO, ITS OK
2C66 7F3006           (          edt.asm):01919                 CLR     VIDEO                             ;ZERO FLAG
2C69 8D33             (          edt.asm):01920                 BSR     WSE                               ;DISABLE SPECIAL EFFECTS
2C6B                  (          edt.asm):01921         REFL5
2C6B 39               (          edt.asm):01922                 RTS
                      (          edt.asm):01923         ;*
                      (          edt.asm):01924         ;* WRITE CHARACTER TO OUTPUT DEVICE: A = CHR
                      (          edt.asm):01925         ;*
2C6C                  (          edt.asm):01926         WRCHR
2C6C 3406             (          edt.asm):01927                 PSHS    A,B                               ;SAVE REGISTERS
2C6E 8120             (          edt.asm):01928                 CMPA    #' '                              ;CONTROL CODE
2C70 2415             (          edt.asm):01929                 BHS     WRCH2                             ;NO, ITS OK
                      (          edt.asm):01930         ;* CONTROL CODE TO DISPLAY
2C72 8683             (          edt.asm):01931                 LDA     #SO                               ;SPECIAL EFFECTS ON
2C74 C684             (          edt.asm):01932                 LDB     #SE                               ;SPECIAL EFFECTS OFF
2C76 7D3006           (          edt.asm):01933                 TST     VIDEO                             ;INVERSE MODE?
2C79 2702             (          edt.asm):01934                 BEQ     WRCH1                             ;NO, ITS OK
2C7B 1E89             (          edt.asm):01935                 EXG     A,B                               ;SWAP MODEM
2C7D                  (          edt.asm):01936         WRCH1
2C7D 8D21             (          edt.asm):01937                 BSR     PUTCHR                            ;SET EFFECTS
2C7F A6E4             (          edt.asm):01938                 LDA     ,S                                ;GET CHAR
2C81 8B40             (          edt.asm):01939                 ADDA    #'@'                              ;CONVERT TO DISPLAY
2C83 8D1B             (          edt.asm):01940                 BSR     PUTCHR                            ;DISPLAY
2C85 1F98             (          edt.asm):01941                 TFR     B,A                               ;GET TERMINATE CHAR
                      (          edt.asm):01942         ;* NORMAL CHARACTER TO DISPLAY
2C87                  (          edt.asm):01943         WRCH2
2C87 8D17             (          edt.asm):01944                 BSR     PUTCHR                            ;OUTPUT CHAR
2C89 7C3002           (          edt.asm):01945                 INC     HORZ                              ;ADVANCE POSITION
2C8C 3586             (          edt.asm):01946                 PULS    A,B,PC                            ;RESTORE & RETURN
                      (          edt.asm):01947         ;* SPECIAL CHRAACTER OUTPUT ROUTINES
2C8E                  (          edt.asm):01948         WCL
2C8E 8680             (          edt.asm):01949                 LDA     #CL                               ;GET CLEAR SCREEN CHAR
2C90 200E             (          edt.asm):01950                 BRA     PUTCHR                            ;OUTPUT & RETURN
2C92                  (          edt.asm):01951         WCD
2C92 8682             (          edt.asm):01952                 LDA     #CD                               ;GET CLEAR TO END CHAR
2C94 200A             (          edt.asm):01953                 BRA     PUTCHR                            ;OUTPUT & RETURN
2C96                  (          edt.asm):01954         WCE
2C96 8681             (          edt.asm):01955                 LDA     #CE                               ;GET CLEAR LINE CHAR
2C98 2006             (          edt.asm):01956                 BRA     PUTCHR                            ;OUTPUT & RETURN
2C9A                  (          edt.asm):01957         WSO
2C9A 8683             (          edt.asm):01958                 LDA     #SO                               ;SPECIAL EFFECTS ON
2C9C 2002             (          edt.asm):01959                 BRA     PUTCHR                            ;OUTPUT & RETURN
2C9E                  (          edt.asm):01960         WSE
2C9E 8684             (          edt.asm):01961                 LDA     #SE                               ;SPECIAL EFFECTS OFF
                      (          edt.asm):01962         ;*
                      (          edt.asm):01963         ;* TERMINAL INDEPENDANT SCREEN HANDLING
                      (          edt.asm):01964         ;*
                      (          edt.asm):01965         ;* GOTOXY    - MOVE CURSOR POSITION A='X', B='Y'
                      (          edt.asm):01966         ;* GETKEY    - GET KEY FROM TTY, EXIT: A > $7F = SPECIAL CODE
                      (          edt.asm):01967         ;* PUTCHR    - WRITE CHAR(A), A > 80 = SPECIAL CODE
                      (          edt.asm):01968         ;*
                      (          edt.asm):01969         ;* WRITE A CHARACTER TO THE DISPLAY
                      (          edt.asm):01970         ;*
2CA0                  (          edt.asm):01971         PUTCHR
2CA0 4D               (          edt.asm):01972                 TSTA                                      ;     SPECIAL CASE?
2CA1 2B03             (          edt.asm):01973                 BMI     PUTC1                             ;YES, HANDLE IT
2CA3 3F               (          edt.asm):01974                 SWI
2CA4 21               (          edt.asm):01975                 FCB     33                                ;DISPLAY IT
2CA5 39               (          edt.asm):01976                 RTS
                      (          edt.asm):01977         ;* SPECIAL STRING TO OUTPUT
2CA6                  (          edt.asm):01978         PUTC1
2CA6 3412             (          edt.asm):01979                 PSHS    A,X                               ;SAVE REGISTERS
2CA8 48               (          edt.asm):01980                 LSLA                                      ;     X2 FOR TWO BYTE ENTRIES
2CA9 8E2E32           (          edt.asm):01981                 LDX     #PUTTAB                           ;POINT TO TABLE
2CAC AE86             (          edt.asm):01982                 LDX     A,X                               ;GET DATA TO WRITE
2CAE 3F               (          edt.asm):01983                 SWI
2CAF 17               (          edt.asm):01984                 FCB     23                                ;DISPLAY IT
2CB0 3592             (          edt.asm):01985                 PULS    A,X,PC                            ;RESTORE & RETURN
                      (          edt.asm):01986         ;* MOVE TO LAST LINE OF SCREEN
2CB2                  (          edt.asm):01987         GOTOLST
2CB2 CC0017           (          edt.asm):01988                 LDD     #LINES-1        POINT TO LAST LINE
2CB5 2009             (          edt.asm):01989                 BRA     GOTOXY                            ;MOVE THERE
                      (          edt.asm):01990         ;* MOVE TO RELATIVE SCREEN ADDRESS
2CB7                  (          edt.asm):01991         GOTOXX
2CB7 B63002           (          edt.asm):01992                 LDA     HORZ                              ;GET 'X' POSITION
2CBA B03003           (          edt.asm):01993                 SUBA    OFFSET                            ;CONVERT TO SCREEN POSITION
2CBD F63001           (          edt.asm):01994                 LDB     CY                                ;GET 'Y' POSITION
                      (          edt.asm):01995         ;*
                      (          edt.asm):01996         ;* MOVE CURSOR POSITION
                      (          edt.asm):01997         ;*
2CC0                  (          edt.asm):01998         GOTOXY
2CC0 3416             (          edt.asm):01999                 PSHS    A,B,X                             ;SAVE CHARS
2CC2 BE2E30           (          edt.asm):02000                 LDX     GXYPTR                            ;POINT TO BUFFER
2CC5                  (          edt.asm):02001         GOTOXY1
2CC5 A680             (          edt.asm):02002                 LDA     ,X+                               ;GET CHAR
2CC7 271D             (          edt.asm):02003                 BEQ     GOTOXY6                           ;END, EXIT
2CC9 2B04             (          edt.asm):02004                 BMI     GOTOXY3                           ;SPECIAL CODE
                      (          edt.asm):02005         ;* NORMAL CHARACTER, DISPLAY IT
2CCB                  (          edt.asm):02006         GOTOXY2
2CCB 3F               (          edt.asm):02007                 SWI
2CCC 21               (          edt.asm):02008                 FCB     33                                ;DISPLAY IT
2CCD 20F6             (          edt.asm):02009                 BRA     GOTOXY1                           ;AND PROCEED
                      (          edt.asm):02010         ;* SPECIAL TRANSLATED (X/Y) CODE
2CCF                  (          edt.asm):02011         GOTOXY3
2CCF E6E4             (          edt.asm):02012                 LDB     ,S                                ;GET 'X' POSITION
2CD1 8540             (          edt.asm):02013                 BITA    #%01000000      IS IT 'X'?
2CD3 2702             (          edt.asm):02014                 BEQ     GOTOXY4                           ;YES, ALL IS OK
2CD5 E661             (          edt.asm):02015                 LDB     1,S                               ;GET 'Y' POSITION
2CD7                  (          edt.asm):02016         GOTOXY4
2CD7 EB80             (          edt.asm):02017                 ADDB    ,X+                               ;INCLUDE OFFSET
2CD9 8520             (          edt.asm):02018                 BITA    #%00100000      DECIMAL?
2CDB 2604             (          edt.asm):02019                 BNE     GOTOXY5                           ;YES, DO DECIMAL
2CDD 1F98             (          edt.asm):02020                 TFR     B,A                               ;GET CHAR
2CDF 20EA             (          edt.asm):02021                 BRA     GOTOXY2                           ;OUTPUT & PROCEED
2CE1                  (          edt.asm):02022         GOTOXY5
2CE1 4F               (          edt.asm):02023                 CLRA                                      ;     ZERO HIGH
2CE2 3F               (          edt.asm):02024                 SWI
2CE3 1A               (          edt.asm):02025                 FCB     26                                ;DISPLAY IN DECIMAL
2CE4 20DF             (          edt.asm):02026                 BRA     GOTOXY1                           ;AND PROCEED
2CE6                  (          edt.asm):02027         GOTOXY6
2CE6 3596             (          edt.asm):02028                 PULS    A,B,X,PC        RESTORE & RETURN
                      (          edt.asm):02029         ;*
                      (          edt.asm):02030         ;* GET AN INPUT KEY FROM THE TERMINAL
                      (          edt.asm):02031         ;*
2CE8                  (          edt.asm):02032         GETKEY
2CE8 3454             (          edt.asm):02033                 PSHS    B,X,U                             ;SAVE REGS
2CEA                  (          edt.asm):02034         GETK1
2CEA CE2E3E           (          edt.asm):02035                 LDU     #GETKTAB        POINT TO KEY TABLE
2CED C680             (          edt.asm):02036                 LDB     #$80                              ;FIRST FUNCTION CODE
2CEF                  (          edt.asm):02037         GETK2
2CEF 8E2E24           (          edt.asm):02038                 LDX     #GKBUFF                           ;POINT TO KEY BUFFER
2CF2                  (          edt.asm):02039         GETK3
2CF2 A680             (          edt.asm):02040                 LDA     ,X+                               ;GET CHAR
2CF4 2722             (          edt.asm):02041                 BEQ     GETK6                             ;PARTIAL MATCH
2CF6 A1C4             (          edt.asm):02042                 CMPA    ,U                                ;GET CHAR FROM TABLE
2CF8 2604             (          edt.asm):02043                 BNE     GETK4                             ;DOSN'T MATCH
2CFA 3341             (          edt.asm):02044                 LEAU    1,U                               ;ADVANCE
2CFC 20F4             (          edt.asm):02045                 BRA     GETK3                             ;KEEP LOOKING
                      (          edt.asm):02046         ;* CHAR DID NOT MATCH, ADVANCE TO NEXT
2CFE                  (          edt.asm):02047         GETK4
2CFE A6C0             (          edt.asm):02048                 LDA     ,U+                               ;GET CHAR
2D00 26FC             (          edt.asm):02049                 BNE     GETK4                             ;KEEP LOOKING
2D02 5C               (          edt.asm):02050                 INCB                                      ;     ADVANCE FUNCTION CODE
2D03 A6C4             (          edt.asm):02051                 LDA     ,U                                ;END OF TABLE?
2D05 26E8             (          edt.asm):02052                 BNE     GETK2                             ;NO, KEEP LOOKING
                      (          edt.asm):02053         ;* HIT END OF TABLE, NO MATCHES
                      (          edt.asm):02054         ;* REMOVE AND RETURN ONE CHAR FROM THE INPUT
2D07 8E2E24           (          edt.asm):02055                 LDX     #GKBUFF                           ;POINT TO BUFFER
2D0A A680             (          edt.asm):02056                 LDA     ,X+                               ;GET CHAR
2D0C 270E             (          edt.asm):02057                 BEQ     GETK8                             ;NONE, GET A KEY
2D0E                  (          edt.asm):02058         GETK5
2D0E E680             (          edt.asm):02059                 LDB     ,X+                               ;GET NEXT CHAR
2D10 E71E             (          edt.asm):02060                 STB     -2,X                              ;WRITE IT
2D12 26FA             (          edt.asm):02061                 BNE     GETK5                             ;DO THEM ALL
2D14 847F             (          edt.asm):02062                 ANDA    #%01111111      INSURE NO HIGH BUT
2D16 35D4             (          edt.asm):02063                 PULS    B,X,U,PC        RETURN WITH CHAR
                      (          edt.asm):02064         ;* HIT END OF STRING WITH ALL MATCHES
2D18                  (          edt.asm):02065         GETK6
2D18 A6C4             (          edt.asm):02066                 LDA     ,U                                ;END OF STRING?
2D1A 2708             (          edt.asm):02067                 BEQ     GETK7                             ;YES, WE HAVE IT
2D1C                  (          edt.asm):02068         GETK8
2D1C 3F               (          edt.asm):02069                 SWI
2D1D 22               (          edt.asm):02070                 FCB     34                                ;GET INPUT KEY
2D1E A71F             (          edt.asm):02071                 STA     -1,X                              ;WRITE INTO STRING
2D20 6F84             (          edt.asm):02072                 CLR     ,X                                ;ZERO END
2D22 20C6             (          edt.asm):02073                 BRA     GETK1                             ;RETEST FOR MATCHES
                      (          edt.asm):02074         ;* WE FOUND AN INPUT STRING
2D24                  (          edt.asm):02075         GETK7
2D24 1F98             (          edt.asm):02076                 TFR     B,A                               ;GET CHAR
2D26 7F2E24           (          edt.asm):02077                 CLR     >GKBUFF                           ;ZERO BUFFER
2D29 35D4             (          edt.asm):02078                 PULS    B,X,U,PC        RESTORE & RETURN
                      (          edt.asm):02079         ;*
                      (          edt.asm):02080         ;* INFORMATIONAL AND ERROR MESSAGES
                      (          edt.asm):02081         ;*
2D2B                  (          edt.asm):02082         UNKMSG
2D2B 496E76616C696420 (          edt.asm):02083                 FCN     'Invalid key'
     6B657900
2D37                  (          edt.asm):02084         UNCMSG
2D37 556E6B6E6F776E20 (          edt.asm):02085                 FCN     'Unknown command'
     636F6D6D616E6400
2D47                  (          edt.asm):02086         INVSER
2D47 496E76616C696420 (          edt.asm):02087                 FCN     'Invalid search string'
     7365617263682073
     7472696E6700
2D5D                  (          edt.asm):02088         INVDEST
2D5D 496E76616C696420 (          edt.asm):02089                 FCN     'Invalid destination'
     64657374696E6174
     696F6E00
2D71                  (          edt.asm):02090         NOTAGG
2D71 4E6F207461676765 (          edt.asm):02091                 FCN     'No tagged lines'
     64206C696E657300
2D81                  (          edt.asm):02092         NOTFND
2D81 4E6F7420666F756E (          edt.asm):02093                 FCN     'Not found'
     6400
2D8B                  (          edt.asm):02094         INEMSG
2D8B 4F7574206F66206D (          edt.asm):02095                 FCC     'Out of memory - Changes lost'
     656D6F7279202D20
     4368616E67657320
     6C6F7374
2DA7 07               (          edt.asm):02096                 FCB     7
2DA8                  (          edt.asm):02097         NULLMSG
2DA8 00               (          edt.asm):02098                 FCB     0
2DA9                  (          edt.asm):02099         NEWMSG
2DA9 4E65772066696C65 (          edt.asm):02100                 FCN     'New file'
     00
2DB2                  (          edt.asm):02101         INSMSG
2DB2 496E7365727400   (          edt.asm):02102                 FCN     'Insert'
2DB9                  (          edt.asm):02103         OVWMSG
2DB9 4F76657277726974 (          edt.asm):02104                 FCN     'Overwrite'
     6500
2DC3                  (          edt.asm):02105         FCHMSG
2DC3 556E736176656420 (          edt.asm):02106                 FCN     "Unsaved changes, use 'qq' to quit anyway"
     6368616E6765732C
     2075736520277171
     2720746F20717569
     7420616E79776179
     00
                      (          edt.asm):02107         ;* SCREEN MODE COMMAND KEY TABLE
2DEC                  (          edt.asm):02108         CMDTAB
2DEC 2930             (          edt.asm):02109                 FDB     BACKLIN                           ;UP ARROW
2DEE 28A2             (          edt.asm):02110                 FDB     FWDLIN                            ;DOWN ARROW
2DF0 2895             (          edt.asm):02111                 FDB     FWDCHR                            ;RIGHT ARROW
2DF2 2926             (          edt.asm):02112                 FDB     BACKCHR                           ;LEFT ARROW
2DF4 298E             (          edt.asm):02113                 FDB     BACKPAG                           ;PAGE UP
2DF6 28D9             (          edt.asm):02114                 FDB     FWDPAG                            ;PAGE DOWN
2DF8 2889             (          edt.asm):02115                 FDB     CUREOL                            ;PAGE RIGHT
2DFA 291D             (          edt.asm):02116                 FDB     CURSOL                            ;PAGE LEFT
2DFC 2815             (          edt.asm):02117                 FDB     HOME                              ;HOME
2DFE 297F             (          edt.asm):02118                 FDB     FEND                              ;END
2E00 279E             (          edt.asm):02119                 FDB     DELCHR                            ;DELETE CHARACTER
2E02 2792             (          edt.asm):02120                 FDB     DELPRE                            ;DELETE PREVIOUS CHAR
2E04 2725             (          edt.asm):02121                 FDB     REDRAW                            ;REDRAW SCREEN
                      (          edt.asm):02122         ;* FUNCTION KEYS
2E06 211B             (          edt.asm):02123                 FDB     ECMD                              ;1 EXECUTE COMMAND
2E08 2132             (          edt.asm):02124                 FDB     RCMD                              ;2 REPEAT LAST COMMAND
2E0A 272B             (          edt.asm):02125                 FDB     TOGINS                            ;3 TOGGLE INSERT MORE
2E0C 2722             (          edt.asm):02126                 FDB     TOGEOL                            ;4 TOGGLE END OF LINE DISPLAY
2E0E 273A             (          edt.asm):02127                 FDB     DISCUR                            ;5 DISPLAY CURSOR
2E10 281B             (          edt.asm):02128                 FDB     CURTOP                            ;6 CURRENT LINE TO TOP
2E12 282B             (          edt.asm):02129                 FDB     TAGLIN                            ;7 TAG LINE(S)
2E14 27BF             (          edt.asm):02130                 FDB     DELLIN                            ;8 DELETE LINE
2E16 27DC             (          edt.asm):02131                 FDB     DELEOL                            ;9 DELETE TO END OF LINE
2E18 2808             (          edt.asm):02132                 FDB     INSDEL                            ;10 INSERT DELETED LINE
2E1A 2863             (          edt.asm):02133                 FDB     WRDRT                             ;11 WORD RIGHT
2E1C 28FE             (          edt.asm):02134                 FDB     WRDLT                             ;12 WORD LEFT
2E1E 271B             (          edt.asm):02135                 FDB     UNKEY                             ;13 UNKNOWN KEY
2E20 271B             (          edt.asm):02136                 FDB     UNKEY                             ;14 UNKNOWN KEY
2E22 271B             (          edt.asm):02137                 FDB     UNKEY                             ;15 UNKNOWN KEY
                      (          edt.asm):02138         ;*
                      (          edt.asm):02139         ;* DATA AREAS
                      (          edt.asm):02140         ;*
2E24                  (          edt.asm):02141         GKBUFF
2E24 0000000000       (          edt.asm):02142                 FCB     0,0,0,0,0       INPUT BUFFER
2E29 0000000000       (          edt.asm):02143                 FCB     0,0,0,0,0       FOR GET KEY
                      (          edt.asm):02144         ;*
                      (          edt.asm):02145         ;* OUTPUT TRANSLATION TABLES
                      (          edt.asm):02146         ;*
                      (          edt.asm):02147         ;* OUTPUT TRANSLATION TABLES
2E2E                  (          edt.asm):02148         ISTPTR
2E2E 2E3E             (          edt.asm):02149                 FDB     GETKTAB                           ;INITIALIZATION STRING
2E30                  (          edt.asm):02150         GXYPTR
2E30 2E3E             (          edt.asm):02151                 FDB     GETKTAB                           ;GOTO X-Y HANDLER
2E32                  (          edt.asm):02152         PUTTAB
2E32 2E3E             (          edt.asm):02153                 FDB     GETKTAB                           ;CLEAR SCREEN
2E34 2E3E             (          edt.asm):02154                 FDB     GETKTAB                           ;CLEAR END OF LINE
2E36 2E3E             (          edt.asm):02155                 FDB     GETKTAB                           ;CLEAR END OF DISPLAY
2E38 2E3E             (          edt.asm):02156                 FDB     GETKTAB                           ;SPECIAL EFFECTS ON
2E3A 2E3E             (          edt.asm):02157                 FDB     GETKTAB                           ;SPECIAL EFFECTS OFF
2E3C 2E3E             (          edt.asm):02158                 FDB     GETKTAB                           ;SCROLL FORWARD
                      (          edt.asm):02159         ;* STANDARD TERMINAL KEYS INPUT LOOKUP TABLE
2E3E                  (          edt.asm):02160         GETKTAB
2E3E 00               (          edt.asm):02161                 FCB     0
                      (          edt.asm):02162         ;*
                      (          edt.asm):02163                 ORG     DATA_BEGINS
                      (          edt.asm):02164         ;*
                      (          edt.asm):02165         ;* DATA AREA
                      (          edt.asm):02166         ;*
3000                  (          edt.asm):02167         CX
3000 00               (          edt.asm):02168                 FCB     0                                 ;CURSOR 'X' POSITION
3001                  (          edt.asm):02169         CY
3001 00               (          edt.asm):02170                 FCB     0                                 ;CURSOR 'Y' POSITION
3002                  (          edt.asm):02171         HORZ
3002 00               (          edt.asm):02172                 FCB     0                                 ;ACTUAL HORIZONTAL POSITION
3003                  (          edt.asm):02173         OFFSET
3003 00               (          edt.asm):02174                 FCB     0                                 ;OFFSET FRO START OF LINE
3004                  (          edt.asm):02175         REFLAG
3004 00               (          edt.asm):02176                 FCB     0                                 ;REFRESH R=IRED FLAG
3005                  (          edt.asm):02177         WINDOW
3005 FF               (          edt.asm):02178                 FCB     -1                                ;WINDOW MODE FLAG
3006                  (          edt.asm):02179         VIDEO
3006 00               (          edt.asm):02180                 FCB     0                                 ;VIDEO MODE FLAG
3007                  (          edt.asm):02181         INSFLAG
3007 FF               (          edt.asm):02182                 FCB     -1                                ;INSERT/OVERWITE FLAG
3008                  (          edt.asm):02183         EOLFLAG
3008 00               (          edt.asm):02184                 FCB     0                                 ;END OF LINE DISPLAY FLAG
3009                  (          edt.asm):02185         CHANGE
3009 00               (          edt.asm):02186                 FCB     0                                 ;LINE CHANGED FLAG
300A                  (          edt.asm):02187         FCHANGE
300A 00               (          edt.asm):02188                 FCB     0                                 ;FILE CHANGED FLAG
300B                  (          edt.asm):02189         EDTLEN
300B 00               (          edt.asm):02190                 FCB     0                                 ;LENGTH OF EDIT BUFFER
300C                  (          edt.asm):02191         DELLEN
300C 00               (          edt.asm):02192                 FCB     0                                 ;LENGTH OF DELETE BUFFER
300D                  (          edt.asm):02193         SCRTOP
300D 3298             (          edt.asm):02194                 FDB     T_BUFF                            ;ADDRESS OF TOP OF SCREEN
300F                  (          edt.asm):02195         TXTPOS
300F 3298             (          edt.asm):02196                 FDB     T_BUFF                            ;ADDRESS OF START OF LINE
3011                  (          edt.asm):02197         TAG
3011 0000             (          edt.asm):02198                 FDB     0                                 ;START OF TAGGED RANGE
3013                  (          edt.asm):02199         TAG1
3013 0000             (          edt.asm):02200                 FDB     0                                 ;END OF TAGGED RANGE
3015                  (          edt.asm):02201         START
3015 0000             (          edt.asm):02202                 FDB     0                                 ;STARTING COMMAND RANGE
3017                  (          edt.asm):02203         END
3017 0000             (          edt.asm):02204                 FDB     0                                 ;ENDING COMMAND RANGE
3019                  (          edt.asm):02205         NEWPOS
3019 0000             (          edt.asm):02206                 FDB     0                                 ;NEW POSITION TO MOVE TO
301B                  (          edt.asm):02207         ERRMSG
301B 0000             (          edt.asm):02208                 FDB     0                                 ;ERROR MESSAGE
301D                  (          edt.asm):02209         TEMP
301D                  (          edt.asm):02210                 RMB     4                                 ;TEMPORARY STORAGE
3021                  (          edt.asm):02211         NAMBUF
3021                  (          edt.asm):02212                 RMB     25                                ;SAVED FILENAME
303A                  (          edt.asm):02213         COMMAND
303A                  (          edt.asm):02214                 RMB     50                                ;COMMAND BUFFER
306C                  (          edt.asm):02215         E_BUFF
306C                  (          edt.asm):02216                 RMB     256                               ;LINE EDIT BUFFER
316C                  (          edt.asm):02217         D_BUFF
316C                  (          edt.asm):02218                 RMB     300                               ;DELETE BUFFER & STACK
                      (          edt.asm):02219         
     3298             (          edt.asm):02220         STACK           = *                               ;LOCATION OF STACK
     3298             (          edt.asm):02221         T_BUFF          = *                               ;TEXT FILE STORAGE

Symbol Table:
[ G] ABORT                            201D
[ G] BACKCHR                          2926
[ G] BACKL1                           293A
[ G] BACKL2                           2946
[ G] BACKL3                           2955
[ G] BACKL4                           2965
[ G] BACKL5                           2969
[ G] BACKL6                           2977
[ G] BACKL7                           297D
[ G] BACKLIN                          2930
[ G] BACKP1                           2998
[ G] BACKP2                           29A9
[ G] BACKPAG                          298E
[ G] BADCMD                           2714
[ G] CD                               0082
[ G] CE                               0081
[ G] CHANGE                           3009
[ G] CL                               0080
[ G] CMDTAB                           2DEC
[ G] COLS                             0050
[ G] COMMAND                          303A
[ G] CONV1                            2667
[ G] CONV2                            2672
[ G] CONVERT                          2665
[ G] COPY                             2A21
[ G] COPY1                            2A23
[ G] COPY2                            2A2D
[ G] CUREOL                           2889
[ G] CURSOL                           291D
[ G] CURTOP                           281B
[ G] CX                               3000
[ G] CY                               3001
[ G] D_BUFF                           316C
[ G] DATA_BEGINS                      3000
[ G] DATA_BEGINS_P                    0030
[ G] DELC1                            27A7
[ G] DELC2                            27B0
[ G] DELC3                            27BE
[ G] DELCHR                           279E
[ G] DELE1                            2A49
[ G] DELE2                            2A4F
[ G] DELE3                            2A61
[ G] DELE4                            2A67
[ G] DELE5                            2A75
[ G] DELE6                            2A83
[ G] DELEO1                           27DE
[ G] DELEO2                           27EB
[ G] DELEOL                           27DC
[ G] DELETE                           2A33
[ G] DELL1                            27C1
[ G] DELL2                            27CC
[ G] DELLEN                           300C
[ G] DELLIN                           27BF
[ G] DELPRE                           2792
[ G] DELPREP                          27F5
[ G] DISCUR                           273A
[ G] DLINCHR                          25E2
[ G] DOCM1                            231E
[ G] DOCM10                           253C
[ G] DOCM10A                          254B
[ G] DOCM10B                          2554
[ G] DOCM10C                          2560
[ G] DOCM10D                          2583
[ G] DOCM10E                          2593
[ G] DOCM10F                          25CC
[ G] DOCM10G                          25DF
[ G] DOCM11                           2607
[ G] DOCM11A                          2617
[ G] DOCM11B                          2624
[ G] DOCM12                           2636
[ G] DOCM12A                          264E
[ G] DOCM13                           2651
[ G] DOCM14                           267B
[ G] DOCM14A                          2688
[ G] DOCM14B                          2692
[ G] DOCM14C                          269D
[ G] DOCM15                           26CD
[ G] DOCM15A                          26D5
[ G] DOCM15B                          26E9
[ G] DOCM15C                          26F2
[ G] DOCM15D                          2707
[ G] DOCM1A                           233A
[ G] DOCM1B                           2342
[ G] DOCM2                            2345
[ G] DOCM2A                           235F
[ G] DOCM2B                           236C
[ G] DOCM2C                           236F
[ G] DOCM2D                           2373
[ G] DOCM2E                           2378
[ G] DOCM3                            238E
[ G] DOCM3A                           239D
[ G] DOCM3B                           23AB
[ G] DOCM3C                           23B7
[ G] DOCM3D                           23C8
[ G] DOCM3E                           23CD
[ G] DOCM3F                           23EC
[ G] DOCM3G                           23FA
[ G] DOCM3H                           23FD
[ G] DOCM3I                           2403
[ G] DOCM3J                           240A
[ G] DOCM4                            240E
[ G] DOCM5                            241E
[ G] DOCM5A                           2427
[ G] DOCM5B                           243E
[ G] DOCM6                            2450
[ G] DOCM7                            2463
[ G] DOCM7A                           246D
[ G] DOCM8                            2476
[ G] DOCM8A                           247C
[ G] DOCM8B                           248C
[ G] DOCM9                            24C7
[ G] DOCM9A                           24D3
[ G] DOCM9B                           24E3
[ G] DOCM9C                           24ED
[ G] DOCM9D                           250B
[ G] DOCM9E                           251F
[ G] DOCM9F                           2523
[ G] DOCM9G                           252F
[ G] DOCMD                            22FA
[ G] DOEXIT                           2336
[ G] DOQUI1                           2312
[ G] DOQUIT                           2302
[ G] E_BUFF                           306C
[ G] ECMD                             211B
[ G] EDIT                             2A90
[ G] EDIT1                            2AA6
[ G] EDIT2                            2AB7
[ G] EDIT3                            2AC5
[ G] EDIT4                            2ACF
[ G] EDT1                             201F
[ G] EDT2                             202F
[ G] EDT3                             2050
[ G] EDT3A                            2055
[ G] EDT4                             2059
[ G] EDTK1                            20EB
[ G] EDTK2                            20ED
[ G] EDTK4                            20FC
[ G] EDTK5                            2113
[ G] EDTK6                            2118
[ G] EDTKEY                           20D7
[ G] EDTLEN                           300B
[ G] END                              3017
[ G] ENTRY                            2000
[ G] EOLFLAG                          3008
[ G] ERRMSG                           301B
[ G] EXEC                             2235
[ G] FCHANGE                          300A
[ G] FCHMSG                           2DC3
[ G] FEND                             297F
[ G] FINDE1                           29B1
[ G] FINDEOF                          29AC
[ G] FINDL1                           221B
[ G] FINDL2                           221F
[ G] FINDL3                           2229
[ G] FINDL4                           222B
[ G] FINDLIN                          2218
[ G] FWDC1                            289F
[ G] FWDCHR                           2895
[ G] FWDL1                            28AA
[ G] FWDL2                            28C1
[ G] FWDL3                            28C3
[ G] FWDL4                            28C6
[ G] FWDLIN                           28A2
[ G] FWDP1                            28E3
[ G] FWDP2                            28F0
[ G] FWDPAG                           28D9
[ G] GETFN                            26B4
[ G] GETFN1                           26BC
[ G] GETFN2                           26C4
[ G] GETFN3                           26C7
[ G] GETK1                            2CEA
[ G] GETK2                            2CEF
[ G] GETK3                            2CF2
[ G] GETK4                            2CFE
[ G] GETK5                            2D0E
[ G] GETK6                            2D18
[ G] GETK7                            2D24
[ G] GETK8                            2D1C
[ G] GETKEY                           2CE8
[ G] GETKTAB                          2E3E
[ G] GETL1                            2163
[ G] GETL1A                           216F
[ G] GETL2                            217A
[ G] GETL2A                           2188
[ G] GETL3                            218A
[ G] GETL4                            218F
[ G] GETLIN                           2162
[ G] GETN1                            2204
[ G] GETNUM                           21FE
[ G] GETRN1                           224E
[ G] GETRN10                          22C9
[ G] GETRN11                          22D3
[ G] GETRN12                          22ED
[ G] GETRN13                          22F7
[ G] GETRN1A                          2261
[ G] GETRN2                           2268
[ G] GETRN3                           2276
[ G] GETRN4                           2283
[ G] GETRN5                           2286
[ G] GETRN5A                          2288
[ G] GETRN5B                          228B
[ G] GETRN6                           2297
[ G] GETRN7                           22A7
[ G] GETRN8                           22B0
[ G] GETRN9                           22C2
[ G] GETRNG                           2242
[ G] GKBUFF                           2E24
[ G] GOTOLST                          2CB2
[ G] GOTOXX                           2CB7
[ G] GOTOXY                           2CC0
[ G] GOTOXY1                          2CC5
[ G] GOTOXY2                          2CCB
[ G] GOTOXY3                          2CCF
[ G] GOTOXY4                          2CD7
[ G] GOTOXY5                          2CE1
[ G] GOTOXY6                          2CE6
[ G] GXYPTR                           2E30
[ G] HOME                             2815
[ G] HORZ                             3002
[ G] INEMSG                           2D8B
[ G] INSDEL                           2808
[ G] INSE0                            29C6
[ G] INSE1                            29DD
[ G] INSE2                            29EB
[ G] INSE3                            29F9
[ G] INSE4                            2A07
[ G] INSE5                            2A12
[ G] INSERR                           2A19
[ G] INSERT                           29B9
[ G] INSFLAG                          3007
[ G] INSMSG                           2DB2
[ G] INVDEST                          2D5D
[ G] INVSER                           2D47
[ G] ISDIG1                           21FD
[ G] ISDIGIT                          21F3
[ G] ISTPTR                           2E2E
[ G] KCM                              008D
[ G] KDO                              0081
[ G] KDP                              008B
[ G] KEY                              20AE
[ G] KEY1                             20C3
[ G] KUP                              0080
[ G] LINE                             21A4
[ G] LINE1                            21B2
[ G] LINE2                            21C1
[ G] LINE3                            21C6
[ G] LINE4                            21C9
[ G] LINE5                            21D5
[ G] LINE6                            21DD
[ G] LINE7                            21E2
[ G] LINES                            0018
[ G] NAMBUF                           3021
[ G] NEWMSG                           2DA9
[ G] NEWPOS                           3019
[ G] NL                               000D
[ G] NOTAGG                           2D71
[ G] NOTFND                           2D81
[ G] NULLMSG                          2DA8
[ G] OFFSET                           3003
[ G] OSEND                            DBFF
[ G] OSRAM                            2000
[ G] OSTART                           24BF
[ G] OSTOP                            2490
[ G] OSTOP1                           2539
[ G] OSTOPX                           24BC
[ G] OSUTIL                           D000
[ G] OVWMSG                           2DB9
[ G] PMAT1                            2381
[ G] PMAT2                            238B
[ G] PMATCH                           237F
[ G] POSIT1                           2B1B
[ G] POSIT2                           2B21
[ G] POSIT4                           2B3A
[ G] POSIT5                           2B49
[ G] POSIT6                           2B55
[ G] POSITC                           2B0E
[ G] PUTC1                            2CA6
[ G] PUTCHR                           2CA0
[ G] PUTTAB                           2E32
[ G] RCMD                             2132
[ G] RCMD1                            213E
[ G] RCMD2                            2147
[ G] RCMD3                            2161
[ G] REDRAW                           2725
[ G] REFALL                           2BAD
[ G] REFBOT                           27D3
[ G] REFL0A                           2C01
[ G] REFL1                            2C1E
[ G] REFL1A                           2C38
[ G] REFL2                            2C46
[ G] REFL2A                           2C55
[ G] REFL3                            2C57
[ G] REFL4                            2C61
[ G] REFL5                            2C6B
[ G] REFLAG                           3004
[ G] REFLIN                           2BE7
[ G] REFS1                            2BBB
[ G] REFS2                            2BCF
[ G] REFS3                            2BDD
[ G] REFSCR                           2BB4
[ G] REPO1                            2B5D
[ G] REPO2                            2B6E
[ G] REPO3                            2B74
[ G] REPO4                            2B87
[ G] REPO5                            2B95
[ G] REPO6                            2B9E
[ G] REPOS                            2B57
[ G] SCR                              206D
[ G] SCR1                             2081
[ G] SCR2                             2091
[ G] SCR3                             20A9
[ G] SCRTOP                           300D
[ G] SE                               0084
[ G] SF                               0085
[ G] SKIP                             222C
[ G] SKPT1                            2BAC
[ G] SKPTAB                           2BA0
[ G] SO                               0083
[ G] STACK                            3298
[ G] START                            3015
[ G] T_BUFF                           3298
[ G] TAB                              0009
[ G] TAG                              3011
[ G] TAG1                             3013
[ G] TAGL1                            2849
[ G] TAGL2                            2853
[ G] TAGL3                            285C
[ G] TAGLIN                           282B
[ G] TEMP                             301D
[ G] TOGEOL                           2722
[ G] TOGIN1                           2736
[ G] TOGINS                           272B
[ G] TOUPPER                          2313
[ G] TXTPOS                           300F
[ G] UNCMSG                           2D37
[ G] UNKEY                            271B
[ G] UNKMSG                           2D2B
[ G] UPDAT1                           2ADE
[ G] UPDAT2                           2AE9
[ G] UPDAT3                           2B01
[ G] UPDAT4                           2B06
[ G] UPDAT5                           2B09
[ G] UPDAT6                           2B0C
[ G] UPDATE                           2AD1
[ G] VIDEO                            3006
[ G] WCD                              2C92
[ G] WCE                              2C96
[ G] WCL                              2C8E
[ G] WINDOW                           3005
[ G] WRCH1                            2C7D
[ G] WRCH2                            2C87
[ G] WRCHR                            2C6C
[ G] WRDEC                            278B
[ G] WRDLT                            28FE
[ G] WRDLT1                           2903
[ G] WRDLT2                           290E
[ G] WRDLT3                           2910
[ G] WRDLT4                           2919
[ G] WRDRT                            2863
[ G] WRDRT1                           2869
[ G] WRDRT2                           2878
[ G] WRDRT4                           2894
[ G] WSE                              2C9E
[ G] WSO                              2C9A
