                      (           ed.asm):00001         ;        TITLE   CUBIX SCREEN EDITOR
                      (           ed.asm):00002         ;*
                      (           ed.asm):00003         ;* ED: A tiny screen editor for VT100 and compatible terminals
                      (           ed.asm):00004         ;*
                      (           ed.asm):00005         ;* Copyright 1983-2005 Dave Dunfield
                      (           ed.asm):00006         ;* All rights reserved.
                      (           ed.asm):00007         ;*
     2000             (           ed.asm):00008         OSRAM           = $2000       APPLICATION RAM AREA
     DBFF             (           ed.asm):00009         OSEND           = $DBFF       END OF GENERAL RAM
     D000             (           ed.asm):00010         OSUTIL          = $D000       UTILITY ADDRESS SPACE
     3F00             (           ed.asm):00011         TEXT            = OSRAM+$1F00   START OF TEXT BUFFER
     3EFF             (           ed.asm):00012         STACK           = TEXT-1                          ;EDITOR STACK
     0017             (           ed.asm):00013         NLINES          = 23                              ;# LINES - 1
                      (           ed.asm):00014         ;*
                      (           ed.asm):00015         ;* TEMPORARY STORAGE
                      (           ed.asm):00016         ;*
                      (           ed.asm):00017                 ORG     OSRAM+$800
2800                  (           ed.asm):00018         XPOS
2800                  (           ed.asm):00019                 RMB     1                                 ;CURSOR X POSITION
2801                  (           ed.asm):00020         YPOS
2801                  (           ed.asm):00021                 RMB     1                                 ;CURSOR Y POSITION
2802                  (           ed.asm):00022         TXTPOS
2802                  (           ed.asm):00023                 RMB     2                                 ;SCREEN TOP POSITION
2804                  (           ed.asm):00024         OLDPOS
2804                  (           ed.asm):00025                 RMB     1                                 ;OLD CURSOR POSITION
2805                  (           ed.asm):00026         CURFLG
2805                  (           ed.asm):00027                 RMB     1                                 ;CURSOR FLAG
2806                  (           ed.asm):00028         INSFLG
2806                  (           ed.asm):00029                 RMB     1                                 ;INSERT CHARACTER FLAG
2807                  (           ed.asm):00030         TEMP
2807                  (           ed.asm):00031                 RMB     2                                 ;TEMPORARY STORAGE
2809                  (           ed.asm):00032         SNRPOS
2809                  (           ed.asm):00033                 RMB     2                                 ;POSITION IN SNARF BUFFER
280B                  (           ed.asm):00034         NAMBUF
280B                  (           ed.asm):00035                 RMB     25                                ;SAVED FILENAME
2824                  (           ed.asm):00036         INPBUF
2824                  (           ed.asm):00037                 RMB     64                                ;LOTSA SPACE FOR SEARCH
     2864             (           ed.asm):00038         DLBUF           = *                               ;LINE DELETE BUFFER
                      (           ed.asm):00039                 ORG     XPOS+256
     2900             (           ed.asm):00040         SNARF           = *                               ;BUFFER FOR DELETE TO BUFFER
     0028             (           ed.asm):00041         XPOSHB          = XPOS/256
                      (           ed.asm):00042                 ORG     OSRAM
                      (           ed.asm):00043         ;*
                      (           ed.asm):00044         ;* INITIALIZATION AND STARTUP CODE
                      (           ed.asm):00045         ;*
2000                  (           ed.asm):00046         EDIT
2000 10CE3EFF         (           ed.asm):00047                 LDS     #STACK                            ;SET UP STACK
2004 813F             (           ed.asm):00048                 CMPA    #'?'                              ;QUERY OPERATION?
2006 2613             (           ed.asm):00049                 BNE     EDIT1                             ;NO, ITS OK
2008 3F               (           ed.asm):00050                 SWI
2009 19               (           ed.asm):00051                 FCB     25                                ;OUTPUT MESSAGE
200A 5573653A20454420 (           ed.asm):00052                 FCN     'Use: ED <file>'
     3C66696C653E00
2019 3F               (           ed.asm):00053                 SWI
201A 00               (           ed.asm):00054                 FCB     0
201B                  (           ed.asm):00055         EDIT1
201B 8628             (           ed.asm):00056                 LDA     #XPOSHB                           ;POSITION
201D 1F8B             (           ed.asm):00057                 TFR     A,DP                              ;SET DIRECT PAGE
     28               (           ed.asm):00058                 SETDP   XPOSHB                            ;INFORM ASSEMBLER
                      (           ed.asm):00059         ;* SAVE FILENAME
201F 8E280B           (           ed.asm):00060                 LDX     #NAMBUF                           ;POINT TO NAME BUFFER
2022                  (           ed.asm):00061         SAVNAM
2022 A6A0             (           ed.asm):00062                 LDA     ,Y+                               ;GET CHARACTER FROM INPUT LINE
2024 A780             (           ed.asm):00063                 STA     ,X+                               ;SAVE IN FILE BUFFER
2026 810D             (           ed.asm):00064                 CMPA    #$0D                              ;TEST FOR END OF LINE
2028 26F8             (           ed.asm):00065                 BNE     SAVNAM                            ;KEEP GOING TILL NAME SAVED
202A 108E280B         (           ed.asm):00066                 LDY     #NAMBUF                           ;POINT AT FILENAME
202E 3F               (           ed.asm):00067                 SWI
202F 0A               (           ed.asm):00068                 FCB     10                                ;GET FILENAME
2030 10260131         (           ed.asm):00069                 LBNE    ABORT                             ;GIVE UP
2034 8E3F00           (           ed.asm):00070                 LDX     #TEXT                             ;POINT TO TEXT POSITION
2037 9F02             (           ed.asm):00071                 STX     TXTPOS                            ;INITIAL POSITION
2039 3F               (           ed.asm):00072                 SWI
203A 44               (           ed.asm):00073                 FCB     68                                ;DUZ IT EXIST
203B 2611             (           ed.asm):00074                 BNE     NEWFIL                            ;NO, IT'S A NEW FILE
203D 8E3F00           (           ed.asm):00075                 LDX     #TEXT                             ;POINT TO TEXT AREA
2040 3F               (           ed.asm):00076                 SWI
2041 35               (           ed.asm):00077                 FCB     53                                ;LOAD FILE
2042 1026011F         (           ed.asm):00078                 LBNE    ABORT                             ;IF ERROR, GET UPSET
2046 170642           (           ed.asm):00079                 LBSR    CLS                               ;CLEAR SCREEN
2049 1705A0           (           ed.asm):00080                 LBSR    REFSCR                            ;REFRESH THE SCREE
204C 2011             (           ed.asm):00081                 BRA     NOTNEW                            ;NOT A NEW FILE
204E                  (           ed.asm):00082         NEWFIL
204E 17063A           (           ed.asm):00083                 LBSR    CLS                               ;CLEAR SCREEN
2051 86FF             (           ed.asm):00084                 LDA     #$FF                              ;END OF FILE MARKER
2053 B73F00           (           ed.asm):00085                 STA     TEXT                              ;INITIALIZE NEW FILE TO ZIP
2056 170593           (           ed.asm):00086                 LBSR    REFSCR                            ;SET UP SCREEN
2059 8E2753           (           ed.asm):00087                 LDX     #NEWMSG                           ;MESSAGE TO DISPLAY
205C 17020F           (           ed.asm):00088                 LBSR    ERRMSG                            ;DISPLAY
205F                  (           ed.asm):00089         NOTNEW
205F 860D             (           ed.asm):00090                 LDA     #$0D                              ;GET CARRIAGE RETURN
2061 9764             (           ed.asm):00091                 STA     DLBUF                             ;CLEAR DELETED LINE
2063 86FF             (           ed.asm):00092                 LDA     #$FF                              ;GET END CHARACTER
2065 B72900           (           ed.asm):00093                 STA     SNARF                             ;SAVE IN SNARF BUFFER
2068 9706             (           ed.asm):00094                 STA     INSFLG                            ;SET INSERT MODE
206A CC2900           (           ed.asm):00095                 LDD     #SNARF                            ;POINT TO SNARF BUFFER
206D DD09             (           ed.asm):00096                 STD     SNRPOS                            ;SAVE SNARF POSITION
206F 0F05             (           ed.asm):00097                 CLR     CURFLG                            ;CLEAR CURSOR FLAG
                      (           ed.asm):00098         ;*
                      (           ed.asm):00099         ;* COMMAND HANDLER
                      (           ed.asm):00100         ;*
2071                  (           ed.asm):00101         EDTCMD
2071 0D05             (           ed.asm):00102                 TST     CURFLG                            ;WAS LAST COMMAND MOVE CURSOR
2073 2604             (           ed.asm):00103                 BNE     NORES                             ;IF SO, DON'T RESET POSITION
2075 9600             (           ed.asm):00104                 LDA     XPOS                              ;GET POSITION
2077 9704             (           ed.asm):00105                 STA     OLDPOS                            ;RESET POSITION
2079                  (           ed.asm):00106         NORES
2079 170622           (           ed.asm):00107                 LBSR    CURPOS                            ;POSITION CURSOR
207C 17063F           (           ed.asm):00108                 LBSR    GETKEY                            ;GET ONE CHARACTER
207F 0F05             (           ed.asm):00109                 CLR     CURFLG                            ;INDICATE NO SPECIAL OPERATION
2081 8D02             (           ed.asm):00110                 BSR     EXECMD                            ;EXECUTE COMMAND
2083 20EC             (           ed.asm):00111                 BRA     EDTCMD                            ;KEEP PROCESSING
                      (           ed.asm):00112         ;*
                      (           ed.asm):00113         ;* EXECUTES AN EDIT COMMAND
                      (           ed.asm):00114         ;*
2085                  (           ed.asm):00115         EXECMD
2085 4D               (           ed.asm):00116                 TSTA                                      ;     TEST FOR CHARACTER TO INSERT
2086 2B30             (           ed.asm):00117                 BMI     CURUP                             ;NO, IT'S A COMMAND
                      (           ed.asm):00118         ;*
                      (           ed.asm):00119         ;* NORMAL CHARACTER, INSERT IT INTO TEXT
                      (           ed.asm):00120         ;*
2088 810D             (           ed.asm):00121                 CMPA    #$0D                              ;IS IT A CARRIAGE RETURN
208A 271C             (           ed.asm):00122                 BEQ     CRSPEC                            ;IF SO, SPECIAL CASE
208C 3402             (           ed.asm):00123                 PSHS    A                                 ;SAVE CHARACTER
208E 170543           (           ed.asm):00124                 LBSR    LOCADR                            ;FIND OUR ADDRESS
2091 2B08             (           ed.asm):00125                 BMI     GINSCH                            ;IF EOF, INSERT
2093 810D             (           ed.asm):00126                 CMPA    #$0D                              ;CARRIAGE RETURN?
2095 2704             (           ed.asm):00127                 BEQ     GINSCH                            ;DEFINATELY INSERT
2097 0D06             (           ed.asm):00128                 TST     INSFLG                            ;ARE WE INSERTING
2099 2A03             (           ed.asm):00129                 BPL     NOINST                            ;IF NOT, DON'T INSERT
209B                  (           ed.asm):00130         GINSCH
209B 1703E4           (           ed.asm):00131                 LBSR    INSCHR                            ;INSERT CHARACTER
209E                  (           ed.asm):00132         NOINST
209E 3502             (           ed.asm):00133                 PULS    A                                 ;RESTORE CHARACTER
20A0 A784             (           ed.asm):00134                 STA     ,X                                ;INSERT INTO TEXT
20A2 170426           (           ed.asm):00135                 LBSR    REFLIN                            ;REFRESH THIS LINE
20A5 160444           (           ed.asm):00136                 LBRA    ADVCHR                            ;AND ADVANCE ONE CHARACTER
                      (           ed.asm):00137         ;* INSERTING CARRIAGE RETURN
20A8                  (           ed.asm):00138         CRSPEC
20A8 170529           (           ed.asm):00139                 LBSR    LOCADR                            ;GET OUR ADDRESS
20AB 1703D4           (           ed.asm):00140                 LBSR    INSCHR                            ;INSERT CHARACTER
20AE 860D             (           ed.asm):00141                 LDA     #$0D                              ;GET CARRIAGE RETURN
20B0 A784             (           ed.asm):00142                 STA     ,X                                ;SAVE IN TEXT
20B2 170404           (           ed.asm):00143                 LBSR    REFBOT                            ;REFRESH BOTTOM OF SCREEN
20B5 160434           (           ed.asm):00144                 LBRA    ADVCHR                            ;AND ADVANCE TO NEXT POSITION
                      (           ed.asm):00145         ;*
                      (           ed.asm):00146         ;* PROCESS EDIT COMMAND
                      (           ed.asm):00147         ;*
                      (           ed.asm):00148         ;* CURSOR UP COMMAND
                      (           ed.asm):00149         ;*
20B8                  (           ed.asm):00150         CURUP
20B8 0A05             (           ed.asm):00151                 DEC     CURFLG                            ;INDICATE SPECIAL CURSOR MOVE
20BA 847F             (           ed.asm):00152                 ANDA    #$7F                              ;CONVERT TO NORMAL CHARACTER
20BC 102704DB         (           ed.asm):00153                 LBEQ    BAKLIN                            ;IF SO, GO BACK A LINE
                      (           ed.asm):00154         ;*
                      (           ed.asm):00155         ;* CURSOR DOWN COMMAND
                      (           ed.asm):00156         ;*
20C0 4A               (           ed.asm):00157                 DECA                                      ;     TEST FOR CURSOR DOWN
20C1 10270436         (           ed.asm):00158                 LBEQ    ADVLIN                            ;IF SO, GO DOWN
                      (           ed.asm):00159         ;*
                      (           ed.asm):00160         ;* CURSOR FORWARD COMMAND
                      (           ed.asm):00161         ;*
20C5 0F05             (           ed.asm):00162                 CLR     CURFLG                            ;CLEAR SPECIAL FLAG
20C7 4A               (           ed.asm):00163                 DECA                                      ;     TEST FOR CURSOR FORWARD
20C8 10270420         (           ed.asm):00164                 LBEQ    ADVCHR                            ;IF SO, ADVANCE A CHARACTER
                      (           ed.asm):00165         ;*
                      (           ed.asm):00166         ;* CURSOR BACKWARD COMMAND
                      (           ed.asm):00167         ;*
20CC 4A               (           ed.asm):00168                 DECA                                      ;     TEST FOR CURSOR BACKUP
20CD 102704B2         (           ed.asm):00169                 LBEQ    BAKCHR                            ;IF SO, BACKUP
                      (           ed.asm):00170         ;*
                      (           ed.asm):00171         ;* ADVANCE LINE COMMAND
                      (           ed.asm):00172         ;*
20D1 4A               (           ed.asm):00173                 DECA                                      ;     TEST FOR LINE
20D2 2605             (           ed.asm):00174                 BNE     CMD0                              ;NO, TRY NEXT
20D4                  (           ed.asm):00175         ALINE
20D4 0F00             (           ed.asm):00176                 CLR     XPOS                              ;SET POSITION TO ZERO
20D6 160422           (           ed.asm):00177                 LBRA    ADVLIN                            ;ADVANCE A LINE
                      (           ed.asm):00178         ;*
                      (           ed.asm):00179         ;* BACK LINE COMMAND
                      (           ed.asm):00180         ;*
20D9                  (           ed.asm):00181         CMD0
20D9 4A               (           ed.asm):00182                 DECA                                      ;     TEST FOR BACK LINE
20DA 2609             (           ed.asm):00183                 BNE     CMD1                              ;NO, TRY NEXT COMMAND
20DC 9600             (           ed.asm):00184                 LDA     XPOS                              ;GET OLD POSITION
20DE 102704B9         (           ed.asm):00185                 LBEQ    BAKLIN                            ;IF ALREADY AT ZERO, GO BACK A LINE
20E2 0F00             (           ed.asm):00186                 CLR     XPOS                              ;INDICATE ZERO POSITION
20E4 39               (           ed.asm):00187                 RTS
                      (           ed.asm):00188         ;*
                      (           ed.asm):00189         ;* TOGGLE INSERT COMMAND
                      (           ed.asm):00190         ;*
20E5                  (           ed.asm):00191         CMD1
20E5 4A               (           ed.asm):00192                 DECA                                      ;     TEST FOR REFRESH COMMAND
20E6 260D             (           ed.asm):00193                 BNE     CMD2                              ;NO, TRY NEXT COMMAND
20E8 8E27B8           (           ed.asm):00194                 LDX     #INSON                            ;GET INSERT ON MESSAGE
20EB 0306             (           ed.asm):00195                 COM     INSFLG                            ;CHANGE INSERT FLAG
20ED 2B03             (           ed.asm):00196                 BMI     INMSG                             ;ISSUE MESSAGE
20EF 8E27C2           (           ed.asm):00197                 LDX     #INSOFF                           ;GET INSERT OFF MESSAGE
20F2                  (           ed.asm):00198         INMSG
20F2 160179           (           ed.asm):00199                 LBRA    ERRMSG                            ;ISSUE MESSAGE
                      (           ed.asm):00200         ;*
                      (           ed.asm):00201         ;* DELETE CHARACTER COMMAND
                      (           ed.asm):00202         ;*
20F5                  (           ed.asm):00203         CMD2
20F5 4A               (           ed.asm):00204                 DECA                                      ;     TEST FOR DELETE
20F6 262A             (           ed.asm):00205                 BNE     CMD3                              ;NO, TRY NEXT COMMAND
20F8                  (           ed.asm):00206         DELGO
20F8 1704D9           (           ed.asm):00207                 LBSR    LOCADR                            ;GET OUR ADDRESS
20FB 1703AD           (           ed.asm):00208                 LBSR    DELCHR                            ;DELETE THE CHARACTER
20FE 810D             (           ed.asm):00209                 CMPA    #$0D                              ;DID WE DELETE A CARRIAGE RETURN
2100 2706             (           ed.asm):00210                 BEQ     DELCR                             ;IF SO, SPECIAL CASE
2102 4D               (           ed.asm):00211                 TSTA                                      ;     TEST FOR NO DELETE
2103 2B1C             (           ed.asm):00212                 BMI     DELRTS                            ;IF SO, NO ACTION
2105 1603C3           (           ed.asm):00213                 LBRA    REFLIN                            ;REFRESH THIS LINE
2108                  (           ed.asm):00214         DELCR
2108 1F10             (           ed.asm):00215                 TFR     X,D                               ;GET OUR POSITION
210A 10833F00         (           ed.asm):00216                 CMPD    #TEXT                             ;ARE WE HOME
210E 270E             (           ed.asm):00217                 BEQ     NODEOF                            ;IF SO, NO NEED TO DELETE
2110 A684             (           ed.asm):00218                 LDA     ,X                                ;GET NEXT CHARACTER
2112 2A0A             (           ed.asm):00219                 BPL     NODEOF                            ;DIDN'T TRY TO DELETE END OF FILE
2114 A701             (           ed.asm):00220                 STA     1,X                               ;RESET END OF FILE
2116 860D             (           ed.asm):00221                 LDA     #$0D                              ;GET CARRIAGE RETURN
2118 A11F             (           ed.asm):00222                 CMPA    -1,X                              ;DO WE ALREADY HAVE A CARRIAGE RETURN THERE?
211A 2702             (           ed.asm):00223                 BEQ     NODEOF                            ;IF SO, WE ARE OK
211C A784             (           ed.asm):00224                 STA     ,X                                ;RESAVE INTO TEXT
211E                  (           ed.asm):00225         NODEOF
211E 160398           (           ed.asm):00226                 LBRA    REFBOT                            ;REFRESH SCREEN BOTTOM
2121                  (           ed.asm):00227         DELRTS
2121 39               (           ed.asm):00228                 RTS                                       ;     QUIT WHILE WE ARE AHEAD
                      (           ed.asm):00229         ;*
                      (           ed.asm):00230         ;* DELETE PREVIOUS COMMAND
                      (           ed.asm):00231         ;*
2122                  (           ed.asm):00232         CMD3
2122 4A               (           ed.asm):00233                 DECA                                      ;     TEST FOR DELETE PREV
2123 2608             (           ed.asm):00234                 BNE     CMD4                              ;NO, TRY NEXT
2125 17045B           (           ed.asm):00235                 LBSR    BAKCHR                            ;BACKUP A CHARACTER
2128 170573           (           ed.asm):00236                 LBSR    CURPOS                            ;POSITION CURSOR
212B 20CB             (           ed.asm):00237                 BRA     DELGO                             ;CONTINUE WITH DELETE
                      (           ed.asm):00238         ;*
                      (           ed.asm):00239         ;* COMMAND COMMAND, PROMPT FOR EDITOR COMMAND
                      (           ed.asm):00240         ;*
212D                  (           ed.asm):00241         CMD4
212D 4A               (           ed.asm):00242                 DECA                                      ;     TEST FOR QUIT
212E 10260153         (           ed.asm):00243                 LBNE    CMD5                              ;NO, TRY NEXT COMMAND
2132 17052A           (           ed.asm):00244                 LBSR    CLRCMD                            ;BOTTOM LINE, CLEARED
2135 3F               (           ed.asm):00245                 SWI
2136 18               (           ed.asm):00246                 FCB     24                                ;DISPLAY MESSAGE
2137 436F6D6D616E643A (           ed.asm):00247                 FCN     'Command: '
     2000
2141 1704F9           (           ed.asm):00248                 LBSR    GETCMD                            ;GET COMMAND INPUT
2144 170529           (           ed.asm):00249                 LBSR    CNVBUF                            ;CONVERT TO UPPERCASE
2147 8E272C           (           ed.asm):00250                 LDX     #CMDTAB                           ;POINT TO COMMAND TABLE
214A 3F               (           ed.asm):00251                 SWI
214B 04               (           ed.asm):00252                 FCB     4                                 ;SKIP ANY BLANKS
214C 2744             (           ed.asm):00253                 BEQ     REFR1                             ;IF NULL LINE, REFRESH SCREEN
214E 3F               (           ed.asm):00254                 SWI
214F 12               (           ed.asm):00255                 FCB     18                                ;GET COMMAND FROM BUFFER
2150 5A               (           ed.asm):00256                 DECB                                      ;     TEST FOR EXIT OR QUIT
2151 2B0E             (           ed.asm):00257                 BMI     QUIT                              ;IF QUIT, GO AWAY
2153 2625             (           ed.asm):00258                 BNE     APPEND                            ;NO, TRY APPEND FILE COMMAND
                      (           ed.asm):00259         ;* SAVING FILE, FIND OUT HOW MANY BLOCKS TO SAVE
2155                  (           ed.asm):00260         SAVFIL
2155 108E280B         (           ed.asm):00261                 LDY     #NAMBUF                           ;POINT AT FILENAME
2159 3F               (           ed.asm):00262                 SWI
215A 0A               (           ed.asm):00263                 FCB     10                                ;GET NAME
215B 8D0A             (           ed.asm):00264                 BSR     SAVOUT                            ;SAVEOUT FILE
215D 10260029         (           ed.asm):00265                 LBNE    WAIKEY                            ;ERROR, DON'T EXIT
2161                  (           ed.asm):00266         QUIT
2161 170527           (           ed.asm):00267                 LBSR    CLS                               ;CLEAR SCREEN
2164 4F               (           ed.asm):00268                 CLRA                                      ;     SET RC=0
                      (           ed.asm):00269         ;* RETURN TO DOS
2165                  (           ed.asm):00270         ABORT
2165 3F               (           ed.asm):00271                 SWI
2166 00               (           ed.asm):00272                 FCB     0                                 ;REENTER DOS
                      (           ed.asm):00273         ;*
                      (           ed.asm):00274         ;* SAVES FILE ON DISK
                      (           ed.asm):00275         ;*
2167                  (           ed.asm):00276         SAVOUT
2167 1701ED           (           ed.asm):00277                 LBSR    FNDEOF                            ;LOCATE END OF FILE
216A 1F10             (           ed.asm):00278                 TFR     X,D                               ;COPY TO ACC'S
216C 833F01           (           ed.asm):00279                 SUBD    #TEXT+1                           ;CONVERT TO FILE LENGTH
216F 1F89             (           ed.asm):00280                 TFR     A,B                               ;COPY HIGH TO LOW
2171 4F               (           ed.asm):00281                 CLRA                                      ;     CLEAR CARRY
2172 56               (           ed.asm):00282                 RORB                                      ;     SHIFT OUT LOW, =;*512
2173 5C               (           ed.asm):00283                 INCB                                      ;     ADD ONE FOR PARTIAL SECTOR
2174 8E3F00           (           ed.asm):00284                 LDX     #TEXT                             ;POINT TO FILE IN MEMORY
2177 3F               (           ed.asm):00285                 SWI
2178 36               (           ed.asm):00286                 FCB     54                                ;SAVE FILE
2179 39               (           ed.asm):00287                 RTS
                      (           ed.asm):00288         ;*
                      (           ed.asm):00289         ;* APPENDS A FILE TO THE CURRENT ONE
                      (           ed.asm):00290         ;*
217A                  (           ed.asm):00291         APPEND
217A 5A               (           ed.asm):00292                 DECB                                      ;     TEST FOR ABBEND
217B 261B             (           ed.asm):00293                 BNE     SAVE                              ;NO, TRY SAVE COMMAND
217D 3F               (           ed.asm):00294                 SWI
217E 0A               (           ed.asm):00295                 FCB     10                                ;GET FILENAME
217F 2609             (           ed.asm):00296                 BNE     WAIKEY                            ;WAIT IF IT'S INVALID
2181 1701D3           (           ed.asm):00297                 LBSR    FNDEOF                            ;LOCATE END OF FILE
2184 301F             (           ed.asm):00298                 LEAX    -1,X                              ;BACKUP TO END OF FILE MARKER
2186 3F               (           ed.asm):00299                 SWI
2187 35               (           ed.asm):00300                 FCB     53                                ;LOAD THE FILE
2188 2708             (           ed.asm):00301                 BEQ     REFR1                             ;ALLOW HIM TO SEE ERROR
218A                  (           ed.asm):00302         WAIKEY
218A 8E2770           (           ed.asm):00303                 LDX     #WAIMSG                           ;POINT AT KEY MESSAGE
218D 3F               (           ed.asm):00304                 SWI
218E 17               (           ed.asm):00305                 FCB     23                                ;DISPLAY
218F 17052C           (           ed.asm):00306                 LBSR    GETKEY                            ;WAIT FOR INPUT
2192                  (           ed.asm):00307         REFR1
2192 1704F6           (           ed.asm):00308                 LBSR    CLS                               ;CLEAR SCREEN
2195 160454           (           ed.asm):00309                 LBRA    REFSCR                            ;AND PERFORM REFRESH
                      (           ed.asm):00310         ;*
                      (           ed.asm):00311         ;* SAVE IN OLD OR NEW FILE
                      (           ed.asm):00312         ;*
2198                  (           ed.asm):00313         SAVE
2198 5A               (           ed.asm):00314                 DECB                                      ;     TEST FOR SAVE
2199 2616             (           ed.asm):00315                 BNE     PACK                              ;NO, TRY PACK
219B 3F               (           ed.asm):00316                 SWI
219C 04               (           ed.asm):00317                 FCB     4                                 ;ANY OPERANDS?
219D 2604             (           ed.asm):00318                 BNE     NEWNAM                            ;IF SO, USE OLD NAME
219F 108E280B         (           ed.asm):00319                 LDY     #NAMBUF                           ;POINT AT SAVED NAME
21A3                  (           ed.asm):00320         NEWNAM
21A3 3F               (           ed.asm):00321                 SWI
21A4 0A               (           ed.asm):00322                 FCB     10                                ;GET FILENAME
21A5 26E3             (           ed.asm):00323                 BNE     WAIKEY                            ;NAME IS OK, SAVE FILE
21A7 17FFBD           (           ed.asm):00324                 LBSR    SAVOUT                            ;SAVE FILE ON DISK
21AA 1026FFDC         (           ed.asm):00325                 LBNE    WAIKEY                            ;ERROR, EXIT
21AE 160462           (           ed.asm):00326                 LBRA    CURHOM                            ;HOME CURSOR AND CONTINUE
                      (           ed.asm):00327         ;*
                      (           ed.asm):00328         ;* PACK FILE, REMOVE BLANKS AND INSERT TAB CHARACTERS IF POSSIBLE
                      (           ed.asm):00329         ;*
21B1                  (           ed.asm):00330         PACK
21B1 5A               (           ed.asm):00331                 DECB                                      ;     TEST FOR 'TABS'
21B2 2643             (           ed.asm):00332                 BNE     UNPACK                            ;NO, TRY UNPACK
21B4 8E3F00           (           ed.asm):00333                 LDX     #TEXT                             ;POINT TO TOP OF FILE
21B7 9F02             (           ed.asm):00334                 STX     TXTPOS                            ;RESET TEXT POSITION
21B9 1F12             (           ed.asm):00335                 TFR     X,Y                               ;COPY TO NEXT POINTER
21BB                  (           ed.asm):00336         GOLIN
21BB 0F07             (           ed.asm):00337                 CLR     TEMP                              ;INDICATE ON LINE ZERO
21BD                  (           ed.asm):00338         NOCOM
21BD 0C07             (           ed.asm):00339                 INC     TEMP                              ;ADVANCE ONE IN LINE
21BF A680             (           ed.asm):00340                 LDA     ,X+                               ;GET CHARACTER FROM X
21C1 A7A0             (           ed.asm):00341                 STA     ,Y+                               ;SAVE IN DEST
21C3 2B30             (           ed.asm):00342                 BMI     ENPAK                             ;END OF PACK
21C5 810D             (           ed.asm):00343                 CMPA    #$0D                              ;END OF LINE?
21C7 27F2             (           ed.asm):00344                 BEQ     GOLIN                             ;IF SO, COULD BE COMMENT ON NEXT LINE
21C9 8120             (           ed.asm):00345                 CMPA    #' '                              ;IS IT A SPACE?
21CB 26F0             (           ed.asm):00346                 BNE     NOCOM                             ;NOT A SPACE
21CD 3410             (           ed.asm):00347                 PSHS    X                                 ;SAVE X POINTER
21CF                  (           ed.asm):00348         SKPSPC
21CF 9607             (           ed.asm):00349                 LDA     TEMP                              ;TEST FOR AT POSITION
21D1 8407             (           ed.asm):00350                 ANDA    #7                                ;TEST FOR A TAB POSITION
21D3 2718             (           ed.asm):00351                 BEQ     TABOK                             ;IF SO, TAB IS OK HERE
21D5 0C07             (           ed.asm):00352                 INC     TEMP                              ;ADVANCE IN TEXT
21D7 A680             (           ed.asm):00353                 LDA     ,X+                               ;GET CHARACTER FROM SOURCE
21D9 8120             (           ed.asm):00354                 CMPA    #' '                              ;SPACE?
21DB 27F2             (           ed.asm):00355                 BEQ     SKPSPC                            ;KEEP SKIPPING
21DD 3510             (           ed.asm):00356                 PULS    X                                 ;GET POSITION BACK
21DF                  (           ed.asm):00357         SAVSPC
21DF A680             (           ed.asm):00358                 LDA     ,X+                               ;GET CHARACTER FROM LINE
21E1 A7A0             (           ed.asm):00359                 STA     ,Y+                               ;SAVE IN DEST
21E3 8120             (           ed.asm):00360                 CMPA    #' '                              ;TEST FOR SPACE
21E5 27F8             (           ed.asm):00361                 BEQ     SAVSPC                            ;FINISH SAVEING THE SPACES
21E7 810D             (           ed.asm):00362                 CMPA    #$0D                              ;CARRIAGE RETURN?
21E9 27D0             (           ed.asm):00363                 BEQ     GOLIN                             ;IF SO, START NEW LINE
21EB 20D0             (           ed.asm):00364                 BRA     NOCOM                             ;SAVE THIS SPACE
21ED                  (           ed.asm):00365         TABOK
21ED C609             (           ed.asm):00366                 LDB     #9                                ;GET A TAB CHARACTER
21EF E73F             (           ed.asm):00367                 STB     -1,Y                              ;CHANGE SPACE TO TAB
21F1 3506             (           ed.asm):00368                 PULS    A,B                               ;FIX UP STACK
21F3 2AC8             (           ed.asm):00369                 BPL     NOCOM                             ;KEEP MOVEING
21F5                  (           ed.asm):00370         ENPAK
21F5 2052             (           ed.asm):00371                 BRA     UEOF                              ;REFRESH SCREEN
                      (           ed.asm):00372         ;*
                      (           ed.asm):00373         ;* UNPACK TAB SPACES, REPLACING WITH BLANKS
                      (           ed.asm):00374         ;*
21F7                  (           ed.asm):00375         UNPACK
21F7 5A               (           ed.asm):00376                 DECB                                      ;     TEST FOR 'UNPACK'
21F8 2657             (           ed.asm):00377                 BNE     DOS                               ;NO, TRY DOS ENTRY
21FA 8E3F00           (           ed.asm):00378                 LDX     #TEXT                             ;POINT TO START OF TEXT
21FD                  (           ed.asm):00379         UGOLIN
21FD 9F02             (           ed.asm):00380                 STX     TXTPOS                            ;REMEMBER WHERE WE ARE
21FF 0F07             (           ed.asm):00381                 CLR     TEMP                              ;STARTING ON COLUMN ZERO
2201 108E2900         (           ed.asm):00382                 LDY     #SNARF                            ;POINT TO SNARF BUFFER
2205                  (           ed.asm):00383         UMOVL
2205 0C07             (           ed.asm):00384                 INC     TEMP                              ;INDICATE ON NEXT POSITION
2207 A680             (           ed.asm):00385                 LDA     ,X+                               ;GET CHARACTER FROM SOURCE
2209 A7A0             (           ed.asm):00386                 STA     ,Y+                               ;SAVE IN CREATED LINE
220B 2B3C             (           ed.asm):00387                 BMI     UEOF                              ;END OF FILE
220D 8109             (           ed.asm):00388                 CMPA    #9                                ;IS IT A TAB?
220F 2706             (           ed.asm):00389                 BEQ     UTAB                              ;TAB IS SPECIAL CASE
2211 810D             (           ed.asm):00390                 CMPA    #$0D                              ;CARRIAGE RETURN?
2213 26F0             (           ed.asm):00391                 BNE     UMOVL                             ;IF NOT, KEEP MOVEING
2215 2010             (           ed.asm):00392                 BRA     UCR                               ;HANDLE CARRIAGE RETURN
                      (           ed.asm):00393         ;* TAB, FILL WITH SPACES
2217                  (           ed.asm):00394         UTAB
2217 8620             (           ed.asm):00395                 LDA     #' '                              ;GET SPACE
2219 A73F             (           ed.asm):00396                 STA     -1,Y                              ;REPLACE TAB WITH SPACE
221B                  (           ed.asm):00397         UFILL
221B D607             (           ed.asm):00398                 LDB     TEMP                              ;GET HORZ POSITION
221D C407             (           ed.asm):00399                 ANDB    #7                                ;TEST FOR TAB STOP
221F 27E4             (           ed.asm):00400                 BEQ     UMOVL                             ;WE ARE AT A TAB STOP
2221 A7A0             (           ed.asm):00401                 STA     ,Y+                               ;ADD ONE SPACE TO THE LINE
2223 0C07             (           ed.asm):00402                 INC     TEMP                              ;INDICATE WE ARE AT THE END
2225 20F4             (           ed.asm):00403                 BRA     UFILL                             ;KEEP GOING
                      (           ed.asm):00404         ;* CARRIAGE RETURN, END OF LINE
2227                  (           ed.asm):00405         UCR
2227 1F10             (           ed.asm):00406                 TFR     X,D                               ;GET POINTER
2229 9302             (           ed.asm):00407                 SUBD    TXTPOS                            ;CONVERT TO SIMPLE OFFSET
222B DD07             (           ed.asm):00408                 STD     TEMP                              ;SAVE FOR LATER
222D 9E02             (           ed.asm):00409                 LDX     TXTPOS                            ;GET OUR POSITION
222F 1F20             (           ed.asm):00410                 TFR     Y,D                               ;GET POSITION IN LINE
2231 832900           (           ed.asm):00411                 SUBD    #SNARF                            ;CONVERT TO SIMPLE OFFSET
2234 9307             (           ed.asm):00412                 SUBD    TEMP                              ;FIND OUT HOW MANY BYTES MORE
2236 2703             (           ed.asm):00413                 BEQ     UNOINS                            ;DON'T INSERT IF NO EXTRA
2238 170258           (           ed.asm):00414                 LBSR    INSMUL                            ;INSERT EXTRA SPACE
223B                  (           ed.asm):00415         UNOINS
223B 108E2900         (           ed.asm):00416                 LDY     #SNARF                            ;POINT TO SNARF BUFFER
223F                  (           ed.asm):00417         UMOV
223F A6A0             (           ed.asm):00418                 LDA     ,Y+                               ;GET CHARACTER FROM LINE
2241 A780             (           ed.asm):00419                 STA     ,X+                               ;SAVE IN DESTINATION LINE
2243 810D             (           ed.asm):00420                 CMPA    #$0D                              ;TEST FOR END OF LINE
2245 26F8             (           ed.asm):00421                 BNE     UMOV                              ;KEEP GOING
2247 20B4             (           ed.asm):00422                 BRA     UGOLIN                            ;KEEP LOOKING
                      (           ed.asm):00423         ;* END OF FILE, RESET PARAMETERS
2249                  (           ed.asm):00424         UEOF
2249 86FF             (           ed.asm):00425                 LDA     #$FF                              ;GET MARKER
224B B72900           (           ed.asm):00426                 STA     SNARF                             ;INDICATE NO SNARF BUFFER
224E 1600EE           (           ed.asm):00427                 LBRA    TOPF                              ;GO TO TOP OF FILE
                      (           ed.asm):00428         ;*
                      (           ed.asm):00429         ;* TEMPORARY DOS ENTRY
                      (           ed.asm):00430         ;*
2251                  (           ed.asm):00431         DOS
2251 5A               (           ed.asm):00432                 DECB                                      ;     TEST FOR 'DOS'
2252 2617             (           ed.asm):00433                 BNE     INVCMD                            ;NO, COMMAND WAS INVALID
2254 170434           (           ed.asm):00434                 LBSR    CLS                               ;CLEAR SCREEN
2257 3408             (           ed.asm):00435                 PSHS    DP                                ;SAVE DIRECT PAGE REGISTER
2259 3F               (           ed.asm):00436                 SWI
225A 04               (           ed.asm):00437                 FCB     4                                 ;TEST FOR OPERAND
225B 2607             (           ed.asm):00438                 BNE     DOCMD                             ;DO DOS COMMAND
225D 3F               (           ed.asm):00439                 SWI
225E 65               (           ed.asm):00440                 FCB     101                               ;ENTER DOS
225F 3508             (           ed.asm):00441                 PULS    DP                                ;RESTORE DIRECT PAGE
2261 16FF2E           (           ed.asm):00442                 LBRA    REFR1                             ;REFRESH AND CONTINUE
                      (           ed.asm):00443         ;* COMMAND WAS SUPPLIED
2264                  (           ed.asm):00444         DOCMD
2264 3F               (           ed.asm):00445                 SWI
2265 64               (           ed.asm):00446                 FCB     100                               ;EXECUTE COMMAND
2266 3508             (           ed.asm):00447                 PULS    DP                                ;RESTORE DP
2268 16FF1F           (           ed.asm):00448                 LBRA    WAIKEY                            ;WAIT FOR KEY BEFORE RESUMEING
                      (           ed.asm):00449         ;* COMMAND WAS UNRECOGNISED
226B                  (           ed.asm):00450         INVCMD
226B 8E27A8           (           ed.asm):00451                 LDX     #ICMMSG                           ;INDICATE INVALID COMMAND
                      (           ed.asm):00452         ;*
                      (           ed.asm):00453         ;* ISSUES ERROR MESSAGE ON LINE 23, IN INVERSE VIDEO
                      (           ed.asm):00454         ;*
226E                  (           ed.asm):00455         ERRMSG
226E 3410             (           ed.asm):00456                 PSHS    X                                 ;SAVE POINTER TO MESSAGE
2270 1703EC           (           ed.asm):00457                 LBSR    CLRCMD                            ;COMMAND LINE & CLEAR
2273 7F27E6           (           ed.asm):00458                 CLR     >INVCHR                           ;INSURE WE STOP AT END
2276 8E27E2           (           ed.asm):00459                 LDX     #INVON                            ;SET INVERSE VIDEO
2279 3F               (           ed.asm):00460                 SWI
227A 17               (           ed.asm):00461                 FCB     23                                ;DISPLAY
227B 3510             (           ed.asm):00462                 PULS    X                                 ;GET MSG POINTER BACK
227D 3F               (           ed.asm):00463                 SWI
227E 17               (           ed.asm):00464                 FCB     23                                ;DISPLAY
227F 8E27E7           (           ed.asm):00465                 LDX     #INVOFF                           ;SET NORMAL VIDEO
2282 3F               (           ed.asm):00466                 SWI
2283 17               (           ed.asm):00467                 FCB     23                                ;DISPLAY
2284 39               (           ed.asm):00468                 RTS
                      (           ed.asm):00469         ;*
                      (           ed.asm):00470         ;* PAGE FORWARD C0MMAND
                      (           ed.asm):00471         ;*
2285                  (           ed.asm):00472         CMD5
2285 4A               (           ed.asm):00473                 DECA                                      ;     TEST FOR PAGE FORWARD COMMAND
2286 2627             (           ed.asm):00474                 BNE     CMD6                              ;NO, TRY PAGE BACKWARD
2288 9E02             (           ed.asm):00475                 LDX     TXTPOS                            ;GET TEXT POSITION
228A C616             (           ed.asm):00476                 LDB     #NLINES-1       # LINES TO MOVE
228C                  (           ed.asm):00477         PAGE
228C A680             (           ed.asm):00478                 LDA     ,X+                               ;GET POSITION
228E 102B02EB         (           ed.asm):00479                 LBMI    ADVEOF                            ;GONE BEYOND END OF SCREEN
2292 810D             (           ed.asm):00480                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
2294 26F6             (           ed.asm):00481                 BNE     PAGE                              ;KEEP LOOKING
2296 5A               (           ed.asm):00482                 DECB                                      ;     REDUCE COUNT
2297 26F3             (           ed.asm):00483                 BNE     PAGE                              ;KEEP LOOKING
2299 9F02             (           ed.asm):00484                 STX     TXTPOS                            ;RESAVE TEXT POSITION
229B                  (           ed.asm):00485         PAGCR
229B A680             (           ed.asm):00486                 LDA     ,X+                               ;GET BYTE FROM TEXT
229D 2B09             (           ed.asm):00487                 BMI     PAGEOF                            ;END OF FILE IS ON SCREEN
229F 810D             (           ed.asm):00488                 CMPA    #$0D                              ;TEST FOR NEW LINE
22A1 26F8             (           ed.asm):00489                 BNE     PAGCR                             ;KEEP LOOKING
22A3 5C               (           ed.asm):00490                 INCB                                      ;     INDICATE ANOTHER LINE
22A4 C116             (           ed.asm):00491                 CMPB    #NLINES-1       TEST FOR BEYOND END
22A6 2DF3             (           ed.asm):00492                 BLT     PAGCR                             ;KEEP LOOKING
22A8                  (           ed.asm):00493         PAGEOF
22A8 D701             (           ed.asm):00494                 STB     YPOS                              ;POINT AT EOF LINE
22AA 0F00             (           ed.asm):00495                 CLR     XPOS                              ;ZERO 'X' POSITION
22AC 16033D           (           ed.asm):00496                 LBRA    REFSCR                            ;REFERESH SCREEN
                      (           ed.asm):00497         ;*
                      (           ed.asm):00498         ;* BACK PAGE COMMAND
                      (           ed.asm):00499         ;*
22AF                  (           ed.asm):00500         CMD6
22AF 4A               (           ed.asm):00501                 DECA                                      ;     TEST FOR BACKUP COMMAND
22B0 262A             (           ed.asm):00502                 BNE     CMD7                              ;NO, TRY NEXT
22B2                  (           ed.asm):00503         PGGO
22B2 0F01             (           ed.asm):00504                 CLR     YPOS                              ;POSITION TO TOP OF SCREEN
22B4 0F00             (           ed.asm):00505                 CLR     XPOS                              ;CLEAR 'X' POSITION
22B6 C617             (           ed.asm):00506                 LDB     #NLINES                           ;NUMBER OF LINES TO MOVE
22B8                  (           ed.asm):00507         PGBAK
22B8 86FF             (           ed.asm):00508                 LDA     #-1                               ;START WITH -1
22BA 9707             (           ed.asm):00509                 STA     TEMP                              ;ZERO NUMBER OF LINES MOVED
22BC 9E02             (           ed.asm):00510                 LDX     TXTPOS                            ;GET TOP OF SCREEN POSITION
22BE 8C3F00           (           ed.asm):00511                 CMPX    #TEXT                             ;ARE WE AT TOP?
22C1 102702B8         (           ed.asm):00512                 LBEQ    ADVEOF                            ;IF SO, STOP HERE
22C5                  (           ed.asm):00513         PGB1
22C5 0C07             (           ed.asm):00514                 INC     TEMP                              ;ADVANCE COUNT
22C7                  (           ed.asm):00515         PGB2
22C7 8C3F00           (           ed.asm):00516                 CMPX    #TEXT                             ;AT TOP?
22CA 270B             (           ed.asm):00517                 BEQ     TOPSCR                            ;YES, STOP
22CC A682             (           ed.asm):00518                 LDA     ,-X                               ;BACKUP ONE CHARACTER
22CE 810D             (           ed.asm):00519                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
22D0 26F5             (           ed.asm):00520                 BNE     PGB2                              ;IF NOT, KEEP LOOKING
22D2 5A               (           ed.asm):00521                 DECB                                      ;     REDUCE COUNT
22D3 26F0             (           ed.asm):00522                 BNE     PGB1                              ;KEEP GOING TILL WE FIND
22D5 3001             (           ed.asm):00523                 LEAX    1,X                               ;ADVANCE TO START OF LINE
22D7                  (           ed.asm):00524         TOPSCR
22D7 9F02             (           ed.asm):00525                 STX     TXTPOS                            ;RESAVE POSITION
22D9 160310           (           ed.asm):00526                 LBRA    REFSCR                            ;REFRESH SCREEN
                      (           ed.asm):00527         ;*
                      (           ed.asm):00528         ;* DELETE TO END OF LINE
                      (           ed.asm):00529         ;*
22DC                  (           ed.asm):00530         CMD7
22DC 4A               (           ed.asm):00531                 DECA                                      ;     TEST FOR DELETE END OF LINE
22DD 2625             (           ed.asm):00532                 BNE     CMD8                              ;NO, TRY NEXT COMMAND
22DF                  (           ed.asm):00533         DELSN
22DF 1702F2           (           ed.asm):00534                 LBSR    LOCADR                            ;LOCATE ADDRESS
22E2 102B0297         (           ed.asm):00535                 LBMI    ADVEOF                            ;IF SO, ABORT WITH ERROR
22E6 3410             (           ed.asm):00536                 PSHS    X                                 ;SAVE ADDRESS
22E8 1F12             (           ed.asm):00537                 TFR     X,Y                               ;COPY FOR ADVANCE
22EA 3410             (           ed.asm):00538                 PSHS    X                                 ;SAVE X REG
22EC 8E2864           (           ed.asm):00539                 LDX     #DLBUF                            ;DELETE LINE BUFFER
22EF                  (           ed.asm):00540         FINCR
22EF A6A0             (           ed.asm):00541                 LDA     ,Y+                               ;GET CHARACTER
22F1 A780             (           ed.asm):00542                 STA     ,X+                               ;SAVE IN BUFFER
22F3 810D             (           ed.asm):00543                 CMPA    #$0D                              ;TEST FOR END OF LINE
22F5 26F8             (           ed.asm):00544                 BNE     FINCR                             ;KEEP LOOKING
22F7 3510             (           ed.asm):00545                 PULS    X                                 ;RESTORE X
22F9                  (           ed.asm):00546         MOVBAC
22F9 A6A0             (           ed.asm):00547                 LDA     ,Y+                               ;GET CHARACTER
22FB A780             (           ed.asm):00548                 STA     ,X+                               ;COPY BACK TO LINE
22FD 2AFA             (           ed.asm):00549                 BPL     MOVBAC                            ;KEEP GOING TILL WE FIND
22FF 3510             (           ed.asm):00550                 PULS    X                                 ;GET X VALUE BACK
2301 16FE04           (           ed.asm):00551                 LBRA    DELCR                             ;REFRESH AND FIX IF END OF FILE
                      (           ed.asm):00552         ;*
                      (           ed.asm):00553         ;* HELP COMMAND, DISPLAY THE FILE [SYSTEM]ED.HLP
                      (           ed.asm):00554         ;*
2304                  (           ed.asm):00555         CMD8
2304 4A               (           ed.asm):00556                 DECA                                      ;     TEST FOR HELP
2305 2635             (           ed.asm):00557                 BNE     CMD9                              ;NO, TRY NEXT COMMAND
2307 DC00             (           ed.asm):00558                 LDD     XPOS                              ;GET CURSOR POSITIONS
2309 3406             (           ed.asm):00559                 PSHS    A,B                               ;SAVE CURSOR ADDRESS
230B 108E27CD         (           ed.asm):00560                 LDY     #HLPFIL                           ;HELP FILENAME
230F 3F               (           ed.asm):00561                 SWI
2310 0A               (           ed.asm):00562                 FCB     10                                ;GET FILENAME
2311 170377           (           ed.asm):00563                 LBSR    CLS                               ;CLEAR SCREEN
2314 CE2900           (           ed.asm):00564                 LDU     #SNARF
2317 3F               (           ed.asm):00565                 SWI
2318 37               (           ed.asm):00566                 FCB     55                                ;OPEN FILE
2319 260E             (           ed.asm):00567                 BNE     WAIHLP                            ;IF ERROR, GO BACK
231B                  (           ed.asm):00568         DISHLP
231B 3F               (           ed.asm):00569                 SWI
231C 3B               (           ed.asm):00570                 FCB     59                                ;GET A CHARACTER
231D 260A             (           ed.asm):00571                 BNE     WAIHLP                            ;END OF HELP DISPLAY
231F                  (           ed.asm):00572         HDISP
231F 3F               (           ed.asm):00573                 SWI
2320 21               (           ed.asm):00574                 FCB     33                                ;DISPLAY
2321 810D             (           ed.asm):00575                 CMPA    #$0D                              ;TEST FOR NEW LINE
2323 26F6             (           ed.asm):00576                 BNE     DISHLP                            ;DISPLAY NEXT CHARACTER
2325 860A             (           ed.asm):00577                 LDA     #$0A                              ;GET LINEFEED
2327 20F6             (           ed.asm):00578                 BRA     HDISP                             ;DISPLAY WITH NEXT
                      (           ed.asm):00579         ;* WAIT FOR A CHARACTER BEFORE PROCEDING
2329                  (           ed.asm):00580         WAIHLP
2329 8E2770           (           ed.asm):00581                 LDX     #WAIMSG                           ;MESSAGE
232C 17FF3F           (           ed.asm):00582                 LBSR    ERRMSG                            ;DISPLAY MESSAGE
232F 17038C           (           ed.asm):00583                 LBSR    GETKEY                            ;GET A CHARACTER
2332 170356           (           ed.asm):00584                 LBSR    CLS                               ;NEW SCREEN
2335 3506             (           ed.asm):00585                 PULS    A,B                               ;GET CURSOR POSITION BACK
2337 DD00             (           ed.asm):00586                 STD     XPOS                              ;RESAVE POSITION
2339 1602B0           (           ed.asm):00587                 LBRA    REFSCR                            ;REFRESH SCREEN
                      (           ed.asm):00588         ;*
                      (           ed.asm):00589         ;* TOP OF FILE COMMAND
                      (           ed.asm):00590         ;*
233C                  (           ed.asm):00591         CMD9
233C 4A               (           ed.asm):00592                 DECA                                      ;     TEST FOR TOF COMMAND
233D 2609             (           ed.asm):00593                 BNE     CMD10                             ;IF NOT, TRY NEXT
233F                  (           ed.asm):00594         TOPF
233F 8E3F00           (           ed.asm):00595                 LDX     #TEXT                             ;POINT TO TEXT
2342 0F01             (           ed.asm):00596                 CLR     YPOS                              ;MOVE TO TOP OF SCREEN
2344 0F00             (           ed.asm):00597                 CLR     XPOS                              ;ZERO 'X' POSITION
2346 208F             (           ed.asm):00598                 BRA     TOPSCR                            ;AND SAVE TOP ADDRESS
                      (           ed.asm):00599         ;*
                      (           ed.asm):00600         ;* BOTTOM OF FILE COMMAND
                      (           ed.asm):00601         ;*
2348                  (           ed.asm):00602         CMD10
2348 4A               (           ed.asm):00603                 DECA                                      ;     TEST FOR BOT OF FILE KEY
2349 2613             (           ed.asm):00604                 BNE     CMD11                             ;NO, TRY NEXT COMMAND
234B 8D0A             (           ed.asm):00605                 BSR     FNDEOF                            ;FINE END OF FILE
234D 9F02             (           ed.asm):00606                 STX     TXTPOS                            ;SET SCREEN POSITION
234F 17FF60           (           ed.asm):00607                 LBSR    PGGO                              ;SKIP BACK UP SCREEN
2352 9607             (           ed.asm):00608                 LDA     TEMP                              ;GET # LINES
2354 9701             (           ed.asm):00609                 STA     YPOS                              ;SET 'Y' POSITION
2356 39               (           ed.asm):00610                 RTS
                      (           ed.asm):00611         ;* LOCATES END OF FILE. (IN X)
2357                  (           ed.asm):00612         FNDEOF
2357 9E02             (           ed.asm):00613                 LDX     TXTPOS                            ;START AT TOP
2359                  (           ed.asm):00614         FNDBOT
2359 A680             (           ed.asm):00615                 LDA     ,X+                               ;GET POSITION
235B 2AFC             (           ed.asm):00616                 BPL     FNDBOT                            ;KEEP LOOKING
235D 39               (           ed.asm):00617                 RTS
                      (           ed.asm):00618         ;*
                      (           ed.asm):00619         ;* UNDELETE LINE
                      (           ed.asm):00620         ;*
235E                  (           ed.asm):00621         CMD11
235E 4A               (           ed.asm):00622                 DECA                                      ;     TEST FOR UNDELETE
235F 2626             (           ed.asm):00623                 BNE     CMD12                             ;NO, TRY NEXT
2361 170270           (           ed.asm):00624                 LBSR    LOCADR                            ;FIND OUR ADDRESS
2364 108E2864         (           ed.asm):00625                 LDY     #DLBUF                            ;GET ADDRESS OF BUFFER
2368 5F               (           ed.asm):00626                 CLRB                                      ;     START WITH ZERO CHARACTER
2369                  (           ed.asm):00627         INS1
2369 5C               (           ed.asm):00628                 INCB                                      ;     +1 TO GO
236A A6A0             (           ed.asm):00629                 LDA     ,Y+                               ;GET CHARACTER
236C 810D             (           ed.asm):00630                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
236E 26F9             (           ed.asm):00631                 BNE     INS1                              ;IF NOT, KEEP LOOKING
2370 4F               (           ed.asm):00632                 CLRA                                      ;     SET ZERO HIGH BYTE
2371 17011F           (           ed.asm):00633                 LBSR    INSMUL                            ;GET MULTIPLE SPACES
2374 3410             (           ed.asm):00634                 PSHS    X                                 ;SAVE OUR POSITION
2376 108E2864         (           ed.asm):00635                 LDY     #DLBUF                            ;GET LINE BUFFER AGAIN
237A                  (           ed.asm):00636         INS2
237A A6A0             (           ed.asm):00637                 LDA     ,Y+                               ;GET CHARACTER
237C A780             (           ed.asm):00638                 STA     ,X+                               ;SAVE IN MEMORY
237E 810D             (           ed.asm):00639                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
2380 26F8             (           ed.asm):00640                 BNE     INS2                              ;IF NOT, KEEP LOOKING
2382 3510             (           ed.asm):00641                 PULS    X                                 ;RESTORE OUR POSITION
2384 160132           (           ed.asm):00642                 LBRA    REFBOT                            ;NEW SCREEN
                      (           ed.asm):00643         ;*
                      (           ed.asm):00644         ;* DELETE TO BUFFER COMMAND
                      (           ed.asm):00645         ;*
2387                  (           ed.asm):00646         CMD12
2387 4A               (           ed.asm):00647                 DECA                                      ;     TEST FOR SNARF
2388 2618             (           ed.asm):00648                 BNE     CMD13                             ;NO, TRY NEXT
238A 17FF52           (           ed.asm):00649                 LBSR    DELSN                             ;DELETE LINE
238D 108E2864         (           ed.asm):00650                 LDY     #DLBUF                            ;GET DELETE BUFFER
2391 9E09             (           ed.asm):00651                 LDX     SNRPOS                            ;GET POSITION
2393                  (           ed.asm):00652         SAVL
2393 A6A0             (           ed.asm):00653                 LDA     ,Y+                               ;GET CHARACTER FROM DELETE BUFFER
2395 A780             (           ed.asm):00654                 STA     ,X+                               ;SAVE IN POSITION
2397 810D             (           ed.asm):00655                 CMPA    #$0D                              ;TEST FOR END
2399 26F8             (           ed.asm):00656                 BNE     SAVL                              ;SAVE WHOLE LINE
239B 86FF             (           ed.asm):00657                 LDA     #$FF                              ;GET END OF FILE
239D A784             (           ed.asm):00658                 STA     ,X                                ;SAVE IN BUFFER
239F 9F09             (           ed.asm):00659                 STX     SNRPOS                            ;RESAVE SNARF POSITION
23A1 39               (           ed.asm):00660                 RTS
                      (           ed.asm):00661         ;*
                      (           ed.asm):00662         ;* INSERT BUFFER COMMAND
                      (           ed.asm):00663         ;*
23A2                  (           ed.asm):00664         CMD13
23A2 4A               (           ed.asm):00665                 DECA                                      ;     TEST FOR UNSNARF
23A3 262F             (           ed.asm):00666                 BNE     CMD14                             ;NO, TRY ANOTHER
23A5 17022C           (           ed.asm):00667                 LBSR    LOCADR                            ;FIND OUR ADDRESS
23A8 108E2900         (           ed.asm):00668                 LDY     #SNARF                            ;GET ADDRESS OF BUFFER
23AC 3410             (           ed.asm):00669                 PSHS    X                                 ;SAVE OUR POSITION
23AE 8EFFFF           (           ed.asm):00670                 LDX     #$FFFF                            ;START WITH -1 CHARACTERS
23B1                  (           ed.asm):00671         SINS1
23B1 3001             (           ed.asm):00672                 LEAX    1,X                               ;+1 TO GO
23B3 A6A0             (           ed.asm):00673                 LDA     ,Y+                               ;GET CHARACTER
23B5 2AFA             (           ed.asm):00674                 BPL     SINS1                             ;IF NOT, KEEP LOOKING
23B7 1F10             (           ed.asm):00675                 TFR     X,D                               ;SWAP TO D
23B9 AEE4             (           ed.asm):00676                 LDX     ,S                                ;GET X  VALUE BACK
23BB 1700D5           (           ed.asm):00677                 LBSR    INSMUL                            ;GET MULTIPLE SPACES
23BE 108E2900         (           ed.asm):00678                 LDY     #SNARF                            ;GET LINE BUFFER AGAIN
23C2                  (           ed.asm):00679         SINS2
23C2 A6A0             (           ed.asm):00680                 LDA     ,Y+                               ;GET CHARACTER
23C4 2B04             (           ed.asm):00681                 BMI     ENDSN                             ;END OF SNARF
23C6 A780             (           ed.asm):00682                 STA     ,X+                               ;SAVE IN MEMORY
23C8 20F8             (           ed.asm):00683                 BRA     SINS2                             ;IF NOT, KEEP LOOKING
23CA                  (           ed.asm):00684         ENDSN
23CA CC2900           (           ed.asm):00685                 LDD     #SNARF                            ;SNARF BUFFER ADDRESS
23CD DD09             (           ed.asm):00686                 STD     SNRPOS                            ;RESET POINTER
23CF 3510             (           ed.asm):00687                 PULS    X                                 ;RESTORE OUR POSITION
23D1 1600E5           (           ed.asm):00688                 LBRA    REFBOT                            ;NEW SCREEN
                      (           ed.asm):00689         ;*
                      (           ed.asm):00690         ;* RESET BUFFER COMMAND
                      (           ed.asm):00691         ;*
23D4                  (           ed.asm):00692         CMD14
23D4 4A               (           ed.asm):00693                 DECA                                      ;     TEST FOR RESET
23D5 260B             (           ed.asm):00694                 BNE     CMD15                             ;NO, TRY NEXT
23D7 CC2900           (           ed.asm):00695                 LDD     #SNARF                            ;SNARF NUFFER ADDRESS
23DA DD09             (           ed.asm):00696                 STD     SNRPOS                            ;SAVE POSITION
23DC 8E279B           (           ed.asm):00697                 LDX     #RESMSG                           ;BUFFER RESET MESSAGE
23DF 16FE8C           (           ed.asm):00698                 LBRA    ERRMSG                            ;DISPLAY MESSAGE
                      (           ed.asm):00699         ;*
                      (           ed.asm):00700         ;* ADVANCE TO END OF LINE
                      (           ed.asm):00701         ;*
23E2                  (           ed.asm):00702         CMD15
23E2 4A               (           ed.asm):00703                 DECA                                      ;     TEST FOR 'DOS'
23E3 261A             (           ed.asm):00704                 BNE     CMD16                             ;NO, TRY NEXT
23E5 1701EC           (           ed.asm):00705                 LBSR    LOCADR                            ;GET OUR ADDRESS
23E8 810D             (           ed.asm):00706                 CMPA    #$0D                              ;ARE ALREADY AT END?
23EA 2606             (           ed.asm):00707                 BNE     FEOL                              ;NO, SKIP IT
23EC 17FCE5           (           ed.asm):00708                 LBSR    ALINE                             ;ADVANCE A LINE
23EF 1701E2           (           ed.asm):00709                 LBSR    LOCADR                            ;FIND OUR ADDRESS
23F2                  (           ed.asm):00710         FEOL
23F2 A680             (           ed.asm):00711                 LDA     ,X+                               ;GET ADDRESS
23F4 2B08             (           ed.asm):00712                 BMI     EOLFND                            ;IF EOF, STOP
23F6 810D             (           ed.asm):00713                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
23F8 2704             (           ed.asm):00714                 BEQ     EOLFND                            ;IF SO, GO BACK
23FA 0C00             (           ed.asm):00715                 INC     XPOS                              ;ADVANCE ONE POSITION
23FC 20F4             (           ed.asm):00716                 BRA     FEOL                              ;KEEP LOOKING
23FE                  (           ed.asm):00717         EOLFND
23FE 39               (           ed.asm):00718                 RTS
                      (           ed.asm):00719         ;*
                      (           ed.asm):00720         ;* FIND COMMAND
                      (           ed.asm):00721         ;*
23FF                  (           ed.asm):00722         CMD16
23FF 4A               (           ed.asm):00723                 DECA                                      ;     TEST FOR FIND
2400 265A             (           ed.asm):00724                 BNE     CMD17                             ;NO, TRY NEXT COMMAND
2402 17025A           (           ed.asm):00725                 LBSR    CLRCMD                            ;BOTTOM LINE, CLEARED
2405 3F               (           ed.asm):00726                 SWI
2406 18               (           ed.asm):00727                 FCB     24                                ;ISSUE MESSAGE
2407 5365617263682066 (           ed.asm):00728                 FCN     'Search for: '
     6F723A2000
2414 170226           (           ed.asm):00729                 LBSR    GETCMD                            ;GET INPUT LINE
2417                  (           ed.asm):00730         GOLOOK
2417 1701BA           (           ed.asm):00731                 LBSR    LOCADR                            ;FIND OUT WHERE WE ARE
241A                  (           ed.asm):00732         LOOK
241A 108E2824         (           ed.asm):00733                 LDY     #INPBUF                           ;POINT TO SEARCH BUFFER
241E A680             (           ed.asm):00734                 LDA     ,X+                               ;GET CHARACTER AND ADVANCE
2420 2B34             (           ed.asm):00735                 BMI     NOFIND                            ;DIDN'T FIND IT
2422 3410             (           ed.asm):00736                 PSHS    X                                 ;SAVE OUR POSITION
2424                  (           ed.asm):00737         TST2
2424 A6A0             (           ed.asm):00738                 LDA     ,Y+                               ;GET CHARACTER FROM BUFFER
2426 2B08             (           ed.asm):00739                 BMI     FOUND                             ;IF SO, WE FOUND
2428 A180             (           ed.asm):00740                 CMPA    ,X+                               ;TEST AGAINST SOURCE
242A 27F8             (           ed.asm):00741                 BEQ     TST2                              ;LOOKS LIKE THIS IS IT
242C 3510             (           ed.asm):00742                 PULS    X                                 ;RESTORE POINTER
242E 20EA             (           ed.asm):00743                 BRA     LOOK                              ;TRY THIS LOCATION
2430                  (           ed.asm):00744         FOUND
2430 3510             (           ed.asm):00745                 PULS    X                                 ;RESTORE POSITION
2432 0F00             (           ed.asm):00746                 CLR     XPOS                              ;CLEAR CURSOR POSITION
2434 0F01             (           ed.asm):00747                 CLR     YPOS                              ;TO TOP OF SCREEN
2436                  (           ed.asm):00748         BAKL
2436 1F10             (           ed.asm):00749                 TFR     X,D                               ;SWAP TO US
2438 10833F00         (           ed.asm):00750                 CMPD    #TEXT                             ;ARE WE THERE
243C 270C             (           ed.asm):00751                 BEQ     OKGO                              ;OK
243E 0C00             (           ed.asm):00752                 INC     XPOS                              ;MOVE OVER ONE
2440 A682             (           ed.asm):00753                 LDA     ,-X                               ;GET CHARACTER
2442 810D             (           ed.asm):00754                 CMPA    #$0D                              ;TEST FOR AT START
2444 26F0             (           ed.asm):00755                 BNE     BAKL                              ;NO, SAY SO
2446 3001             (           ed.asm):00756                 LEAX    1,X                               ;ADVANCE AGAIN
2448 0A00             (           ed.asm):00757                 DEC     XPOS                              ;FIX BECAUSE WE WERE OVER
244A                  (           ed.asm):00758         OKGO
244A 1F10             (           ed.asm):00759                 TFR     X,D                               ;COPY TO D
244C 109302           (           ed.asm):00760                 CMPD    TXTPOS                            ;ARE WE ALREADY THERE?
244F 2730             (           ed.asm):00761                 BEQ     UNCMD                             ;NO NEED TO UPDATE SCREEN
2451 9F02             (           ed.asm):00762                 STX     TXTPOS                            ;SAVE TEXT POSITION
2453 160196           (           ed.asm):00763                 LBRA    REFSCR                            ;REFRESH SCREEN
2456                  (           ed.asm):00764         NOFIND
2456 8E278A           (           ed.asm):00765                 LDX     #SNFMSG                           ;STRING NOT FOUND MESSAGE
2459 16FE12           (           ed.asm):00766                 LBRA    ERRMSG                            ;DISPLAT MESSAGE
                      (           ed.asm):00767         ;*
                      (           ed.asm):00768         ;* FIND NEXT COMMAND
                      (           ed.asm):00769         ;*
245C                  (           ed.asm):00770         CMD17
245C 4A               (           ed.asm):00771                 DECA                                      ;     IS IT FINDNEXT?
245D 27B8             (           ed.asm):00772                 BEQ     GOLOOK                            ;IF SO, DO IT
                      (           ed.asm):00773         ;*
                      (           ed.asm):00774         ;* INSERT TAB AS SPACES
                      (           ed.asm):00775         ;*
245F                  (           ed.asm):00776         CMD18
245F 4A               (           ed.asm):00777                 DECA                                      ;     IS IT TAB?
2460 261F             (           ed.asm):00778                 BNE     UNCMD                             ;NO, SKIP IT
2462 17016F           (           ed.asm):00779                 LBSR    LOCADR                            ;FIND CURRENT ADDRESS
2465 5F               (           ed.asm):00780                 CLRB                                      ;     START WITH ZERO SPACES
2466                  (           ed.asm):00781         FNTAB
2466 0C00             (           ed.asm):00782                 INC     XPOS                              ;ADVANCE TO NEXT POSITION
2468 5C               (           ed.asm):00783                 INCB                                      ;     INDICATE ONE SPACE
2469 9600             (           ed.asm):00784                 LDA     XPOS                              ;GET X POSITION
246B 8407             (           ed.asm):00785                 ANDA    #7                                ;TEST FOR AT A TAB STOP
246D 26F7             (           ed.asm):00786                 BNE     FNTAB                             ;IF NOT, KEEP GOING
246F 3404             (           ed.asm):00787                 PSHS    B                                 ;SAVE COUNT ON STACK
2471 8D20             (           ed.asm):00788                 BSR     INSMUL                            ;INSERT CHARACTERS
2473 3504             (           ed.asm):00789                 PULS    B                                 ;RESTORE COUNT
2475 8620             (           ed.asm):00790                 LDA     #' '                              ;GET SPACE
2477                  (           ed.asm):00791         INSP
2477 A780             (           ed.asm):00792                 STA     ,X+                               ;SAVE IN MEMORY
2479 3F               (           ed.asm):00793                 SWI
247A 21               (           ed.asm):00794                 FCB     33                                ;DISPLAY SPACE
247B 5A               (           ed.asm):00795                 DECB                                      ;     REDUCE COUNT
247C 26F9             (           ed.asm):00796                 BNE     INSP                              ;KEEP INSERTING
247E 16004A           (           ed.asm):00797                 LBRA    REFLIN                            ;REFRESH LINE
                      (           ed.asm):00798         ;* COMMAND WAS NOT RECOGNISED
2481                  (           ed.asm):00799         UNCMD
2481 39               (           ed.asm):00800                 RTS
                      (           ed.asm):00801         ;*
                      (           ed.asm):00802         ;* INSERTS ONE CHARACTER SPACE INTO THE TEXT POINTED TO BY X
                      (           ed.asm):00803         ;*
2482                  (           ed.asm):00804         INSCHR
2482 3101             (           ed.asm):00805                 LEAY    1,X                               ;+1 FOR SECOND INSERT POINTER
2484 E684             (           ed.asm):00806                 LDB     ,X                                ;GET CHARACTER
2486 2B08             (           ed.asm):00807                 BMI     INSEOF                            ;END OF FILE INSERT
2488                  (           ed.asm):00808         INSLP
2488 A6A4             (           ed.asm):00809                 LDA     ,Y                                ;GET CHARACTER FROM BEFORE
248A E7A0             (           ed.asm):00810                 STB     ,Y+                               ;SAVE AGAIN
248C 1F89             (           ed.asm):00811                 TFR     A,B                               ;COPY TO B FOR LATER
248E 2AF8             (           ed.asm):00812                 BPL     INSLP                             ;IF NOT, KEEP GOING
2490                  (           ed.asm):00813         INSEOF
2490 E7A4             (           ed.asm):00814                 STB     ,Y                                ;SET EOF IN TEXT
2492 39               (           ed.asm):00815                 RTS
                      (           ed.asm):00816         ;*
                      (           ed.asm):00817         ;* INSERTS NUMBERS OF CHARACTER IN B IN LINE POINTED TO BY X
                      (           ed.asm):00818         ;*
2493                  (           ed.asm):00819         INSMUL
2493 3450             (           ed.asm):00820                 PSHS    X,U                               ;SAVE X REGISTER
2495                  (           ed.asm):00821         FINEF
2495 6D80             (           ed.asm):00822                 TST     ,X+                               ;GET CHARACTER
2497 2AFC             (           ed.asm):00823                 BPL     FINEF                             ;KEEP LOOKING
2499 338B             (           ed.asm):00824                 LEAU    D,X                               ;POINT TO END PLUS NUMBER OF CHARS NEEDED
249B 1F10             (           ed.asm):00825                 TFR     X,D                               ;COPY TO ACC
249D A3E4             (           ed.asm):00826                 SUBD    ,S                                ;CONVERT TO SIMPLE NUMBER
249F 1F02             (           ed.asm):00827                 TFR     D,Y                               ;SAVE IN Y FOR COUNT
24A1                  (           ed.asm):00828         MOVL
24A1 A682             (           ed.asm):00829                 LDA     ,-X                               ;GET CHARACTER
24A3 A7C2             (           ed.asm):00830                 STA     ,-U                               ;SAVE FARTHER IN LINE
24A5 313F             (           ed.asm):00831                 LEAY    -1,Y                              ;BACKUP COUNT
24A7 26F8             (           ed.asm):00832                 BNE     MOVL                              ;AND KEEP GOING
24A9 35D0             (           ed.asm):00833                 PULS    X,U,PC                            ;RESTORE ADDRESS AND RETURN
                      (           ed.asm):00834         ;*
                      (           ed.asm):00835         ;* DELETES ONE CHARACTER FROM TEXT POINTED TO BY X
                      (           ed.asm):00836         ;*
24AB                  (           ed.asm):00837         DELCHR
24AB A684             (           ed.asm):00838                 LDA     ,X                                ;GET CHARACTER WE ARE DELETING
24AD 2B1B             (           ed.asm):00839                 BMI     DELEOF                            ;SPECIAL CASE
24AF 3412             (           ed.asm):00840                 PSHS    A,X                               ;SAVE FOR LATER REFERENCE
24B1                  (           ed.asm):00841         DELLP
24B1 A601             (           ed.asm):00842                 LDA     1,X                               ;GET CHARACTER FROM SOURCE
24B3 A780             (           ed.asm):00843                 STA     ,X+                               ;SAVE IN TEXT
24B5 2AFA             (           ed.asm):00844                 BPL     DELLP                             ;IF NOT, CONTINUE DELETING
24B7 3592             (           ed.asm):00845                 PULS    A,X,PC                            ;RESTORE REGISTERS
                      (           ed.asm):00846         ;*
                      (           ed.asm):00847         ;* REFRESH BOTTOM OF SCREEN FROM CURRENT LOCATION
                      (           ed.asm):00848         ;*
24B9                  (           ed.asm):00849         REFBOT
24B9 DC00             (           ed.asm):00850                 LDD     XPOS                              ;GET POSITION
24BB 3406             (           ed.asm):00851                 PSHS    A,B                               ;SAVE FOR LATER REFERENCE
24BD 1F12             (           ed.asm):00852                 TFR     X,Y                               ;COPY OUR POSITION
24BF C617             (           ed.asm):00853                 LDB     #NLINES                           ;LINES/SCREEN
24C1 D001             (           ed.asm):00854                 SUBB    YPOS                              ;FIGURE OUT HOW MANY WE HAVE LEFT
24C3 170131           (           ed.asm):00855                 LBSR    DISTXT                            ;REFRESH BOTTOM OF SCREEN
24C6 3506             (           ed.asm):00856                 PULS    A,B                               ;RESTORE REGISTERS
24C8 DD00             (           ed.asm):00857                 STD     XPOS                              ;RESTORE CURSOR POSITION
24CA                  (           ed.asm):00858         DELEOF
24CA 39               (           ed.asm):00859                 RTS
                      (           ed.asm):00860         ;*
                      (           ed.asm):00861         ;* REFRESH CURRENT LINE
                      (           ed.asm):00862         ;*
24CB                  (           ed.asm):00863         REFLIN
24CB A680             (           ed.asm):00864                 LDA     ,X+                               ;GET CHARACTER FROM SOURCE
24CD 2B09             (           ed.asm):00865                 BMI     REFL1                             ;DISPLAY END OF FILE
24CF 810D             (           ed.asm):00866                 CMPA    #$0D                              ;TEST FOR END OF LINE
24D1 2716             (           ed.asm):00867                 BEQ     REFL2                             ;OF SO, THATS IT
24D3 170147           (           ed.asm):00868                 LBSR    OUTPRT                            ;OUTPUT IF DISPLAYABLE
24D6 20F3             (           ed.asm):00869                 BRA     REFLIN                            ;KEEP GOING TILL END OF LINE
24D8                  (           ed.asm):00870         REFL1
24D8 860D             (           ed.asm):00871                 LDA     #$0D                              ;GET CR
24DA A71F             (           ed.asm):00872                 STA     -1,X                              ;INSERT CR
24DC 86FF             (           ed.asm):00873                 LDA     #$FF                              ;GET EOF MARKER
24DE A784             (           ed.asm):00874                 STA     ,X                                ;WRITE IN TEXT
24E0 8D07             (           ed.asm):00875                 BSR     REFL2                             ;CLEAR END OF LINE
24E2 3F               (           ed.asm):00876                 SWI
24E3 16               (           ed.asm):00877                 FCB     22                                ;NEWLINE
24E4 8E27DC           (           ed.asm):00878                 LDX     #EOFMSG                           ;GET MESSAGE
24E7 3F               (           ed.asm):00879                 SWI
24E8 17               (           ed.asm):00880                 FCB     23                                ;DISPLAY
24E9                  (           ed.asm):00881         REFL2
24E9 16017D           (           ed.asm):00882                 LBRA    CLEOL                             ;CLEAR REMAINDER
                      (           ed.asm):00883         ;*
                      (           ed.asm):00884         ;* ADVANCES ONE CHARACTER
                      (           ed.asm):00885         ;*
24EC                  (           ed.asm):00886         ADVCHR
24EC 1700E5           (           ed.asm):00887                 LBSR    LOCADR                            ;FIND OUT POSITION
24EF 810D             (           ed.asm):00888                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
24F1 2706             (           ed.asm):00889                 BEQ     SKPLIN                            ;SKIP TO NEXT LINE
24F3 4D               (           ed.asm):00890                 TSTA                                      ;     TEST FOR END OF FILE
24F4 2B23             (           ed.asm):00891                 BMI     AEOFG                             ;INDICATE ERROR
24F6 0C00             (           ed.asm):00892                 INC     XPOS                              ;ADVANCE ONE POSITION
24F8 39               (           ed.asm):00893                 RTS
24F9                  (           ed.asm):00894         SKPLIN
24F9 0F00             (           ed.asm):00895                 CLR     XPOS                              ;INDICATE WE ARE AT BEGINNING OF LINE
                      (           ed.asm):00896         ;*
                      (           ed.asm):00897         ;* ROLLS SCREEN FORWARD ONE LINE
                      (           ed.asm):00898         ;*
24FB                  (           ed.asm):00899         ADVLIN
24FB 1700DE           (           ed.asm):00900                 LBSR    LOCLIN                            ;FINDOUR LINE
24FE A684             (           ed.asm):00901                 LDA     ,X                                ;GET CHARACTER
2500 2B17             (           ed.asm):00902                 BMI     AEOFG                             ;IF SO, DISPLAY MESSAGE
2502 9601             (           ed.asm):00903                 LDA     YPOS                              ;GET Y POSITION
2504 8116             (           ed.asm):00904                 CMPA    #NLINES-1       TEST FOR AT END
2506 2C0C             (           ed.asm):00905                 BGE     SROLLD                            ;IF SO, ROLL SCREEN
2508                  (           ed.asm):00906         NXTL
2508 A680             (           ed.asm):00907                 LDA     ,X+                               ;GET CHARACTER
250A 2B71             (           ed.asm):00908                 BMI     ADVEOF                            ;IF SO, GET UPSET
250C 810D             (           ed.asm):00909                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
250E 26F8             (           ed.asm):00910                 BNE     NXTL                              ;IF NOT, THATS ALL
2510 0C01             (           ed.asm):00911                 INC     YPOS                              ;SKIP TO NEXT LINE
2512 204A             (           ed.asm):00912                 BRA     POSLIN                            ;SKIP TO CHARACTER ON LINE
2514                  (           ed.asm):00913         SROLLD
2514 109E02           (           ed.asm):00914                 LDY     TXTPOS                            ;GET POSITION
2517                  (           ed.asm):00915         LOKLIN
2517 A6A0             (           ed.asm):00916                 LDA     ,Y+                               ;GET CHARACTER FROM LINE
2519                  (           ed.asm):00917         AEOFG
2519 2B62             (           ed.asm):00918                 BMI     ADVEOF                            ;ADVANCE BEYOND END OF FILE
251B 810D             (           ed.asm):00919                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
251D 26F8             (           ed.asm):00920                 BNE     LOKLIN                            ;KEEP LOOKING
251F 109F02           (           ed.asm):00921                 STY     TXTPOS                            ;RESAVE TEXT POSITION
2522 3F               (           ed.asm):00922                 SWI
2523 18               (           ed.asm):00923                 FCB     24                                ;ISSUE MESSAGE
2524 1B5B32343B3048   (           ed.asm):00924                 FCB     $1B,'[','2','4',';','0','H'
252B 1B5B4A           (           ed.asm):00925                 FCB     $1B,'[','J'
252E 0A               (           ed.asm):00926                 FCB     $0A
252F 1B5B32333B304800 (           ed.asm):00927                 FCB     $1B,'[','2','3',';','0','H',0
2537 C616             (           ed.asm):00928                 LDB     #NLINES-1       # LINES TO MOVE
2539                  (           ed.asm):00929         ADLN
2539 A6A0             (           ed.asm):00930                 LDA     ,Y+                               ;GET LINE
253B 2B21             (           ed.asm):00931                 BMI     POSLIN                            ;NO END MESSAGE
253D 810D             (           ed.asm):00932                 CMPA    #$0D                              ;TEST FOR NEW LINE
253F 26F8             (           ed.asm):00933                 BNE     ADLN                              ;KEEP LOOKING
2541 5A               (           ed.asm):00934                 DECB                                      ;     REDUCE COUNT
2542 26F5             (           ed.asm):00935                 BNE     ADLN                              ;KEEP LOOKING
2544 1F21             (           ed.asm):00936                 TFR     Y,X                               ;POINT AT LINE TO DISPLAY
2546 A684             (           ed.asm):00937                 LDA     ,X                                ;GET CHARACTER
2548 2A0B             (           ed.asm):00938                 BPL     NOAEOF                            ;END OF FILE WHILE ADVANCEING
254A                  (           ed.asm):00939         EOFERR
254A 860D             (           ed.asm):00940                 LDA     #$0D                              ;BACK TO START OF LINE
254C 3F               (           ed.asm):00941                 SWI
254D 21               (           ed.asm):00942                 FCB     33                                ;DISPLAY
254E 8E27DC           (           ed.asm):00943                 LDX     #EOFMSG                           ;POINT TO END OF FILE MESSAGE
2551 3F               (           ed.asm):00944                 SWI
2552 17               (           ed.asm):00945                 FCB     23                                ;DISPLAY
2553 2009             (           ed.asm):00946                 BRA     POSLIN                            ;KEEP DISPLAYING
2555                  (           ed.asm):00947         NOAEOF
2555 A680             (           ed.asm):00948                 LDA     ,X+                               ;GET CHARACTER FROM TEXT
2557 1700C3           (           ed.asm):00949                 LBSR    OUTPRT                            ;DISPLAY IF OK
255A 810D             (           ed.asm):00950                 CMPA    #$0D                              ;TEST FOR <CR>
255C 26F7             (           ed.asm):00951                 BNE     NOAEOF                            ;IF NOT, KEEP GOING
                      (           ed.asm):00952         ;* POSITION CURSOR ON LINE FOLLOWING
255E                  (           ed.asm):00953         POSLIN
255E 8D7C             (           ed.asm):00954                 BSR     LOCLIN                            ;FIND OUR LINE
2560 0D05             (           ed.asm):00955                 TST     CURFLG                            ;TEST FOR SPECIAL CURSOR POSITION
2562 2704             (           ed.asm):00956                 BEQ     NORPOS                            ;NORMAL MODE
2564 D604             (           ed.asm):00957                 LDB     OLDPOS                            ;GET OLD POSITION
2566 2002             (           ed.asm):00958                 BRA     SPCPOS                            ;SPECIAL POSITION
2568                  (           ed.asm):00959         NORPOS
2568 D600             (           ed.asm):00960                 LDB     XPOS                              ;GET X POSITION
256A                  (           ed.asm):00961         SPCPOS
256A 2710             (           ed.asm):00962                 BEQ     THER1                             ;ALREADY THERE
256C 0F00             (           ed.asm):00963                 CLR     XPOS                              ;SET TO ZERO
256E                  (           ed.asm):00964         OKMV
256E A680             (           ed.asm):00965                 LDA     ,X+                               ;GET CHARACTER
2570 810D             (           ed.asm):00966                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
2572 2708             (           ed.asm):00967                 BEQ     THER1                             ;ALREADY THERE
2574 4D               (           ed.asm):00968                 TSTA                                      ;     TEST FOR $FF (EOF)
2575 2B05             (           ed.asm):00969                 BMI     THER1                             ;THATS ALL FOLKS
2577 0C00             (           ed.asm):00970                 INC     XPOS                              ;ADVANCE ONE LOCATION
2579 5A               (           ed.asm):00971                 DECB                                      ;     REDUCE OUR COUNT
257A 26F2             (           ed.asm):00972                 BNE     OKMV                              ;KEEP LOOKING
257C                  (           ed.asm):00973         THER1
257C 39               (           ed.asm):00974                 RTS
257D                  (           ed.asm):00975         ADVEOF
257D 8E275C           (           ed.asm):00976                 LDX     #OUTERR                           ;ERROR MESSAGE
2580 16FCEB           (           ed.asm):00977                 LBRA    ERRMSG                            ;DISPLAY
                      (           ed.asm):00978         ;*
                      (           ed.asm):00979         ;* BACKS UP ONE CHARACTER
                      (           ed.asm):00980         ;*
2583                  (           ed.asm):00981         BAKCHR
2583 170056           (           ed.asm):00982                 LBSR    LOCLIN                            ;LOCATE OUR POSITION
2586 D600             (           ed.asm):00983                 LDB     XPOS                              ;GET X POSITION
2588 3A               (           ed.asm):00984                 ABX                                       ;     OFFSET INTO LINE
2589 8C3F00           (           ed.asm):00985                 CMPX    #TEXT                             ;TEST FOR TEXT SPACE
258C 23EF             (           ed.asm):00986                 BLS     ADVEOF                            ;ERROR
258E A682             (           ed.asm):00987                 LDA     ,-X                               ;GET CHARACTER FROM BEHIND
2590 810D             (           ed.asm):00988                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
2592 2703             (           ed.asm):00989                 BEQ     BKUPL                             ;BACKUP A LINE
2594 0A00             (           ed.asm):00990                 DEC     XPOS                              ;BACKUP IN SOURCE
2596 39               (           ed.asm):00991                 RTS
2597                  (           ed.asm):00992         BKUPL
2597 867F             (           ed.asm):00993                 LDA     #127                              ;X POSITION IS VERY HIGH
2599 9700             (           ed.asm):00994                 STA     XPOS                              ;SET POSITION
                      (           ed.asm):00995         ;*
                      (           ed.asm):00996         ;* ROLLS SCREEN BACKWARD ONE LINE
                      (           ed.asm):00997         ;*
259B                  (           ed.asm):00998         BAKLIN
259B 9601             (           ed.asm):00999                 LDA     YPOS                              ;TEST Y POSITION
259D 2704             (           ed.asm):01000                 BEQ     SROLLU                            ;ROLL SCREEN UP
259F 0A01             (           ed.asm):01001                 DEC     YPOS                              ;BACKUP IN SCREEN
25A1 20BB             (           ed.asm):01002                 BRA     POSLIN                            ;POSITION IN LINE
                      (           ed.asm):01003         ;* SCROLL SCREEN UPWARD
                      (           ed.asm):01004         ;* USE THIS VERSION FOR TTYS WHICH SUPPORT BACKWARD SCROLLING
25A3                  (           ed.asm):01005         SROLLU
25A3 109E02           (           ed.asm):01006                 LDY     TXTPOS                            ;GET OUR POSITION
25A6 313F             (           ed.asm):01007                 LEAY    -1,Y                              ;BACKUP PAST END OF LAST LINE
25A8                  (           ed.asm):01008         SROLU1
25A8 A6A2             (           ed.asm):01009                 LDA     ,-Y                               ;GET CHARACTER FROM LINE
25AA 810D             (           ed.asm):01010                 CMPA    #$0D                              ;TEST FOR PREVIOUS LINE
25AC 270C             (           ed.asm):01011                 BEQ     SROLU2                            ;IF SO, WE HAVE IT
25AE 1F20             (           ed.asm):01012                 TFR     Y,D                               ;COPY TO D
25B0 10833EFF         (           ed.asm):01013                 CMPD    #TEXT-1                           ;TEST FOR AT LOCATION 1
25B4 2704             (           ed.asm):01014                 BEQ     SROLU2                            ;AT TOP LINE
25B6 25C5             (           ed.asm):01015                 BLO     ADVEOF                            ;INDICATE ERROR
25B8 20EE             (           ed.asm):01016                 BRA     SROLU1                            ;KEEP LOOKING
25BA                  (           ed.asm):01017         SROLU2
25BA 3121             (           ed.asm):01018                 LEAY    1,Y                               ;ADVANCE TO PROPER PLACE
25BC 109F02           (           ed.asm):01019                 STY     TXTPOS                            ;SAVE TEXT POSITION
25BF 3F               (           ed.asm):01020                 SWI
25C0 18               (           ed.asm):01021                 FCB     24                                ;SCROLL BACKWARDS
25C1 1B5B481B4D00     (           ed.asm):01022                 FCB     $1B,'[','H',$1B,'M',0
25C7 170095           (           ed.asm):01023                 LBSR    CLRCMD                            ;CLEAR COMMAND FIELD
25CA 3F               (           ed.asm):01024                 SWI
25CB 18               (           ed.asm):01025                 FCB     24                                ;HOME CURSOR
25CC 1B5B4800         (           ed.asm):01026                 FCB     $1B,'[','H',0
25D0 1F21             (           ed.asm):01027                 TFR     Y,X                               ;POINT AT LINE TO DISPLAY
25D2 2081             (           ed.asm):01028                 BRA     NOAEOF                            ;DISPLAY LINE AND POSITION CURSOR
                      (           ed.asm):01029         ;* USE THIS VERSION FOR TTYS NOT SUPPORTING BACKWARD SCROLL
                      (           ed.asm):01030         ;*SROLLU        LDB     #NLINES/2       GET # LINES
                      (           ed.asm):01031         ;*      LBSR    PGBAK  ;PERFORM BACK PAGE
                      (           ed.asm):01032         ;*      LDA     TEMP  ;GET # LINES MOVED
                      (           ed.asm):01033         ;*      DECA  ; GOTO ONE HIGHER LINE
                      (           ed.asm):01034         ;*      BMI     POSLIN  ;NO LINES MOVED
                      (           ed.asm):01035         ;*      STA     YPOS  ;SET POSITION
                      (           ed.asm):01036         ;*      BRA     POSLIN  ;POSITION CURSOR
                      (           ed.asm):01037         ;*
                      (           ed.asm):01038         ;* LOCATES CURRENT ADDRESS
                      (           ed.asm):01039         ;*
25D4                  (           ed.asm):01040         LOCADR
25D4 8D06             (           ed.asm):01041                 BSR     LOCLIN                            ;GET LINE ADDRESS
25D6 D600             (           ed.asm):01042                 LDB     XPOS                              ;GET HORIZ
25D8 3A               (           ed.asm):01043                 ABX                                       ;     ADD TO ADDRES
25D9 A684             (           ed.asm):01044                 LDA     ,X                                ;GET CHARACTER FROM LINE
25DB 39               (           ed.asm):01045                 RTS
                      (           ed.asm):01046         ;*
                      (           ed.asm):01047         ;* LOCATES START OF LINE CURSOR IS ONE
                      (           ed.asm):01048         ;*
25DC                  (           ed.asm):01049         LOCLIN
25DC 9E02             (           ed.asm):01050                 LDX     TXTPOS                            ;START AT TOP OF SCREEN
25DE D601             (           ed.asm):01051                 LDB     YPOS                              ;Y POSITION
25E0 2709             (           ed.asm):01052                 BEQ     THERE                             ;ALREADY THERE
25E2                  (           ed.asm):01053         LOCA1
25E2 A680             (           ed.asm):01054                 LDA     ,X+                               ;GET CHARACTER
25E4 810D             (           ed.asm):01055                 CMPA    #$0D                              ;TEST FOR NEXT
25E6 26FA             (           ed.asm):01056                 BNE     LOCA1                             ;KEEP LOOKING
25E8 5A               (           ed.asm):01057                 DECB                                      ;     REDUCE LINE
25E9 26F7             (           ed.asm):01058                 BNE     LOCA1                             ;KEEP LOOKING TILL WE GET THERE
25EB                  (           ed.asm):01059         THERE
25EB 39               (           ed.asm):01060                 RTS
                      (           ed.asm):01061         ;*
                      (           ed.asm):01062         ;* REFERESHES THE TERMINAL SCREEN
                      (           ed.asm):01063         ;*
25EC                  (           ed.asm):01064         REFSCR
25EC 109E02           (           ed.asm):01065                 LDY     TXTPOS                            ;GET OUR POSITION
25EF 3F               (           ed.asm):01066                 SWI
25F0 18               (           ed.asm):01067                 FCB     24                                ;HOME CURSOR
25F1 1B5B4800         (           ed.asm):01068                 FCB     $1B,'[','H',0
25F5 C617             (           ed.asm):01069                 LDB     #NLINES                           ;# LINES TO DISPLAY
25F7                  (           ed.asm):01070         DISTXT
25F7 A6A0             (           ed.asm):01071                 LDA     ,Y+                               ;GET CHARACTER FROM TEXT
25F9 2B13             (           ed.asm):01072                 BMI     DISEOF                            ;IF SO, INDICATE END OF FILE
25FB 810D             (           ed.asm):01073                 CMPA    #$0D                              ;TEST FOR CARRIAGE RETURN
25FD 2705             (           ed.asm):01074                 BEQ     DISCR                             ;DISPLAY CARRIAGE RETURN
25FF 17001B           (           ed.asm):01075                 LBSR    OUTPRT                            ;OUTPUT AS DISPLAYABLE CHARACTER
2602 20F3             (           ed.asm):01076                 BRA     DISTXT                            ;KEEP DISPLAYING
2604                  (           ed.asm):01077         DISCR
2604 170062           (           ed.asm):01078                 LBSR    CLEOL                             ;CLEAR END OF LINE
2607 3F               (           ed.asm):01079                 SWI
2608 16               (           ed.asm):01080                 FCB     22                                ;NEW LINE
2609 5A               (           ed.asm):01081                 DECB                                      ;     REDUCE COUNT
260A 26EB             (           ed.asm):01082                 BNE     DISTXT                            ;KEEP DISPLAYING
260C 2005             (           ed.asm):01083                 BRA     CURHOM                            ;HOME CURSOR AND RETURN
260E                  (           ed.asm):01084         DISEOF
260E 8E27DC           (           ed.asm):01085                 LDX     #EOFMSG                           ;END OF FILE MESSAGE
2611 3F               (           ed.asm):01086                 SWI
2612 17               (           ed.asm):01087                 FCB     23                                ;DISPLAY
2613                  (           ed.asm):01088         CURHOM
2613 3F               (           ed.asm):01089                 SWI
2614 18               (           ed.asm):01090                 FCB     24                                ;CLEAR TO END OF SCREEN
2615 1B5B4A00         (           ed.asm):01091                 FCB     $1B,'[','J',0
2619 39               (           ed.asm):01092                 RTS
261A                  (           ed.asm):01093         OUT4
261A 3F               (           ed.asm):01094                 SWI
261B 21               (           ed.asm):01095                 FCB     33                                ;DISPLAY MESSAGE
261C 39               (           ed.asm):01096                 RTS
                      (           ed.asm):01097         ;*
                      (           ed.asm):01098         ;* DISPLAYS CHARACTER ON SCREEN IF IT IS PRINTABLE
                      (           ed.asm):01099         ;*
261D                  (           ed.asm):01100         OUTPRT
261D 810D             (           ed.asm):01101                 CMPA    #$0D                              ;TEST FOR <CR>
261F 27F9             (           ed.asm):01102                 BEQ     OUT4                              ;IF SO, ALLOW IT TO PRINT
2621                  (           ed.asm):01103         OUTDIF
2621 3412             (           ed.asm):01104                 PSHS    A,X                               ;SAVE REGS
2623 817F             (           ed.asm):01105                 CMPA    #$7F                              ;TEST FOR DELETE
2625 2708             (           ed.asm):01106                 BEQ     OUT2                              ;SPECIAL DELETE NOTATION
2627 8120             (           ed.asm):01107                 CMPA    #' '                              ;TEST FOR NON-PRINT
2629 2D06             (           ed.asm):01108                 BLT     OUT3                              ;OK TO DISPLAY
262B                  (           ed.asm):01109         OUT1
262B 3F               (           ed.asm):01110                 SWI
262C 21               (           ed.asm):01111                 FCB     33                                ;DISPLAY CHAR
262D 3592             (           ed.asm):01112                 PULS    A,X,PC
262F                  (           ed.asm):01113         OUT2
262F 86ED             (           ed.asm):01114                 LDA     #'-'-'@'        GET '-' FOR INVERSE
2631                  (           ed.asm):01115         OUT3
2631 8B40             (           ed.asm):01116                 ADDA    #'@'                              ;CHANGE TO INDICATOR
2633 B727E6           (           ed.asm):01117                 STA     >INVCHR                           ;DISPLAY
2636 8E27E2           (           ed.asm):01118                 LDX     #INVON                            ;OUTPUT MESSAGE
2639 3F               (           ed.asm):01119                 SWI
263A 17               (           ed.asm):01120                 FCB     23                                ;DISPLAY
263B 3592             (           ed.asm):01121                 PULS    A,X,PC                            ;GET CHARACTER BACK
                      (           ed.asm):01122         ;*
                      (           ed.asm):01123         ;* GETS AN INPUT LINE FROM THE TERMINAL
                      (           ed.asm):01124         ;*
263D                  (           ed.asm):01125         GETCMD
263D 108E2824         (           ed.asm):01126                 LDY     #INPBUF                           ;POINT TO SEARCH BUFFER
2641 5F               (           ed.asm):01127                 CLRB                                      ;     CHARACTER COUNT
2642                  (           ed.asm):01128         GETC1
2642 170079           (           ed.asm):01129                 LBSR    GETKEY                            ;GET A KEY
2645 A7A0             (           ed.asm):01130                 STA     ,Y+                               ;SAVE IN BUFFER
2647 2B05             (           ed.asm):01131                 BMI     GETC2                             ;END OF LINE
2649 8DD6             (           ed.asm):01132                 BSR     OUTDIF                            ;OUTPUT CHARACTER
264B 5C               (           ed.asm):01133                 INCB                                      ;     KEEP TRACK OF HOW MANY CHARACTERS WE HAVE
264C 20F4             (           ed.asm):01134                 BRA     GETC1                             ;KEEP READING
264E                  (           ed.asm):01135         GETC2
264E 8188             (           ed.asm):01136                 CMPA    #$88                              ;TEST FOR DELETE
2650 260D             (           ed.asm):01137                 BNE     CLRCMD                            ;END OF INPUT
2652 5A               (           ed.asm):01138                 DECB                                      ;     REDUCE COUNT
2653 2BE8             (           ed.asm):01139                 BMI     GETCMD                            ;IF SO, START AGAIN
2655 313E             (           ed.asm):01140                 LEAY    -2,Y                              ;BACKUP ONE CHARACTER
2657 3F               (           ed.asm):01141                 SWI
2658 18               (           ed.asm):01142                 FCB     24                                ;DISPLAY MESSAGE
2659 08200800         (           ed.asm):01143                 FCB     8,' ',8,0       DELETE CHARACTER BY WRITING OVER IT
265D 20E3             (           ed.asm):01144                 BRA     GETC1                             ;KEEP GETTING CHARACTERS
265F                  (           ed.asm):01145         CLRCMD
265F 3F               (           ed.asm):01146                 SWI
2660 18               (           ed.asm):01147                 FCB     24                                ;MOVE TO COMMAND LINE
2661 1B5B32343B304800 (           ed.asm):01148                 FCB     $1B,'[','2','4',';','0','H',0
2669                  (           ed.asm):01149         CLEOL
2669 3F               (           ed.asm):01150                 SWI
266A 18               (           ed.asm):01151                 FCB     24                                ;CLEAR TO END OF LINE
266B 1B5B4B00         (           ed.asm):01152                 FCB     $1B,'[','K',0
266F 39               (           ed.asm):01153                 RTS
                      (           ed.asm):01154         ;*
                      (           ed.asm):01155         ;* CONVERT BUFFER CONTENTS TO UPPERCASE, TERMINATED WITH CR
                      (           ed.asm):01156         ;*
2670                  (           ed.asm):01157         CNVBUF
2670 108E2824         (           ed.asm):01158                 LDY     #INPBUF                           ;POINT AT BUFFER
2674                  (           ed.asm):01159         CNVBF1
2674 A6A4             (           ed.asm):01160                 LDA     ,Y                                ;GET CHARACTER FROM BUFFER
2676 2B0A             (           ed.asm):01161                 BMI     LSTBUF                            ;LAST CHARACTER IN BUFFER
2678 8161             (           ed.asm):01162                 CMPA    #$61                              ;TEST FOR LOWER CASE
267A 2D02             (           ed.asm):01163                 BLT     NOCHG                             ;IF NOT, IT'S OK
267C 84DF             (           ed.asm):01164                 ANDA    #$DF                              ;CONVERT TO UPPER
267E                  (           ed.asm):01165         NOCHG
267E A7A0             (           ed.asm):01166                 STA     ,Y+                               ;SAVE AND INC
2680 20F2             (           ed.asm):01167                 BRA     CNVBF1                            ;KEEP CONVERTING
2682                  (           ed.asm):01168         LSTBUF
2682 860D             (           ed.asm):01169                 LDA     #$0D                              ;GET CARRIAGE RETURN
2684 A7A4             (           ed.asm):01170                 STA     ,Y                                ;SAVE IN MEMORY
2686 108E2824         (           ed.asm):01171                 LDY     #INPBUF                           ;POINT AT BUFFER
268A 39               (           ed.asm):01172                 RTS
                      (           ed.asm):01173         ;*
                      (           ed.asm):01174         ;* CLEARS VT100 SCREEN
                      (           ed.asm):01175         ;*
268B                  (           ed.asm):01176         CLS
268B 3402             (           ed.asm):01177                 PSHS    A                                 ;SAVE REGISTERS
268D 3F               (           ed.asm):01178                 SWI
268E 18               (           ed.asm):01179                 FCB     24                                ;OUTPUT MESSAGE
268F 1B5B481B5B4A     (           ed.asm):01180                 FCB     $1B,'[','H',$1B,'[','J'
2695 1B3D00           (           ed.asm):01181                 FCB     $1B,'=',0
2698 0F00             (           ed.asm):01182                 CLR     XPOS                              ;ZERO X POSITION
269A 0F01             (           ed.asm):01183                 CLR     YPOS                              ;ZERO Y POSITION
269C 3502             (           ed.asm):01184                 PULS    A                                 ;RESTORE A
                      (           ed.asm):01185         ;*
                      (           ed.asm):01186         ;* POSITIONS CURSOR ON VT100
                      (           ed.asm):01187         ;*
269E                  (           ed.asm):01188         CURPOS
269E 3406             (           ed.asm):01189                 PSHS    A,B                               ;SAVE REGISTERS
26A0 861B             (           ed.asm):01190                 LDA     #$1B                              ;GET ESCAPE CHARACTER
26A2 3F               (           ed.asm):01191                 SWI
26A3 21               (           ed.asm):01192                 FCB     33                                ;OUTPUT
26A4 865B             (           ed.asm):01193                 LDA     #'['                              ;GET BRACE
26A6 3F               (           ed.asm):01194                 SWI
26A7 21               (           ed.asm):01195                 FCB     33                                ;OUTPUT
26A8 D601             (           ed.asm):01196                 LDB     YPOS                              ;GET 'Y' POSITION
26AA 4F               (           ed.asm):01197                 CLRA                                      ;     ZERO HIGH
26AB 5C               (           ed.asm):01198                 INCB                                      ;     ADVANCE
26AC 3F               (           ed.asm):01199                 SWI
26AD 1A               (           ed.asm):01200                 FCB     26
26AE 863B             (           ed.asm):01201                 LDA     #';'                              ;SEPERATOR
26B0 3F               (           ed.asm):01202                 SWI
26B1 21               (           ed.asm):01203                 FCB     33
26B2 D600             (           ed.asm):01204                 LDB     XPOS                              ;HORZ. POSITION
26B4 4F               (           ed.asm):01205                 CLRA                                      ;     ZERO HIGH
26B5 5C               (           ed.asm):01206                 INCB                                      ;     ADVANCE
26B6 3F               (           ed.asm):01207                 SWI
26B7 1A               (           ed.asm):01208                 FCB     26                                ;DISPLAY
26B8 8648             (           ed.asm):01209                 LDA     #'H'                              ;CM COMMAND
26BA 3F               (           ed.asm):01210                 SWI
26BB 21               (           ed.asm):01211                 FCB     33
26BC 3586             (           ed.asm):01212                 PULS    A,B,PC                            ;RESTORE REGISTERS AND RETURN
                      (           ed.asm):01213         ;*
                      (           ed.asm):01214         ;* KEYBOARD INPUT ROUTINE, EVALUATES INPUT CHARACTERS, LOOKING FOR VT100 ESCAPE
                      (           ed.asm):01215         ;* S=ENCES, AND RETURNS A RESULT AS FOLLOWES:
                      (           ed.asm):01216         ;*
                      (           ed.asm):01217         ;*   $80 - CURSOR UP COMMAND.  ;$81 - CURSOR DOWN COMMAND
                      (           ed.asm):01218         ;*   $82 - CURSOR FORWARD COMMAND.      $83 - CURSOR BACKWARD COMMAND
                      (           ed.asm):01219         ;*   $84 - ADVANCE LINE COMMAND.  ;$85 - BACKUP LINE COMMAND
                      (           ed.asm):01220         ;*   $86 - TOGGLE INSERT MODE.  ;$87 - DELETE CHARACTER COMMAND
                      (           ed.asm):01221         ;*   $88 - DELETE CHARACTER BEFORE CURSOR
                      (           ed.asm):01222         ;*   $89 - EXIT EDITOR.  ;      $8A - PAGE FORWARD
                      (           ed.asm):01223         ;*   $8B - PAGE BACKWARD.  ;$8C - DELETE TO END OF LINE
                      (           ed.asm):01224         ;*   $8D - KEYPAD HELP.  ;      $8E - GO TO TOP OF FILE
                      (           ed.asm):01225         ;*   $8F - GO TO BOTTOM OF FILE.  ;$90 - UNDELETE LINE
                      (           ed.asm):01226         ;*   $91 - DELETE LINE TO BUFFER.       $92 - UNDELETE BUFFER
                      (           ed.asm):01227         ;*   $93 - RESET BUFFER POINTER.  ;$94 - ADVANCE TO END OF LINE
                      (           ed.asm):01228         ;*   $95 - FIND KEY.  ; $96 - FINDNEXT KEY
                      (           ed.asm):01229         ;*   $97 - INSERT SPACES TO NEXT TAB STOP
                      (           ed.asm):01230         ;*
                      (           ed.asm):01231         ;* CONTROL CODES OTHER THAN CARRIAGE-RETURN OR TAB ARE NOT PASSED BACK TO
                      (           ed.asm):01232         ;* THE CALLING ROUTINE UNLESS THEY ARE PRECEDED BY A <ESCAPE>
                      (           ed.asm):01233         ;*
26BE                  (           ed.asm):01234         GETKEY
26BE 3414             (           ed.asm):01235                 PSHS    B,X                               ;SAVE REGISTERS
26C0                  (           ed.asm):01236         KEYIN
26C0 3F               (           ed.asm):01237                 SWI
26C1 22               (           ed.asm):01238                 FCB     34                                ;GET KEYBOARD INPUT CHARACTER
26C2 817F             (           ed.asm):01239                 CMPA    #$7F                              ;TEST FOR DELETE KEY
26C4 2712             (           ed.asm):01240                 BEQ     DELKEY                            ;NOT DELETE
26C6 811B             (           ed.asm):01241                 CMPA    #$1B                              ;TEST FOR ESCAPE (BEGIN OF S=ENCE)
26C8 2716             (           ed.asm):01242                 BEQ     ESCAPE                            ;NORMAL CHARACTER
26CA 810D             (           ed.asm):01243                 CMPA    #$0D                              ;TEST FOR CR
26CC 2743             (           ed.asm):01244                 BEQ     NORCHR                            ;OK TO RETURN
26CE 8109             (           ed.asm):01245                 CMPA    #$09                              ;TEST FOR TAB
26D0 270A             (           ed.asm):01246                 BEQ     TABKEY                            ;OK TO SEND BACK
26D2 8120             (           ed.asm):01247                 CMPA    #' '                              ;TEST FOR OTHER CHARACTERS
26D4 25EA             (           ed.asm):01248                 BLO     KEYIN                             ;IF SO, FORGET ANY CONTROL CODES
26D6 2039             (           ed.asm):01249                 BRA     NORCHR                            ;RETURN WITH CHARACTER
26D8                  (           ed.asm):01250         DELKEY
26D8 8688             (           ed.asm):01251                 LDA     #$88                              ;INDICATE DELETE KEY
26DA 2035             (           ed.asm):01252                 BRA     NORCHR                            ;NORMAL CHARACTER
26DC                  (           ed.asm):01253         TABKEY
26DC 8697             (           ed.asm):01254                 LDA     #$97                              ;INDICATE TAB KEY
26DE 2031             (           ed.asm):01255                 BRA     NORCHR                            ;INDICATE NORMAL
26E0                  (           ed.asm):01256         ESCAPE
26E0 3F               (           ed.asm):01257                 SWI
26E1 22               (           ed.asm):01258                 FCB     34                                ;GET SECOND CHARACTER OF S=ENCE
26E2 815B             (           ed.asm):01259                 CMPA    #'['                              ;CURSOR KEYS
26E4 260C             (           ed.asm):01260                 BNE     NOCUR                             ;NOT A CURSOR KEY
26E6 3F               (           ed.asm):01261                 SWI
26E7 22               (           ed.asm):01262                 FCB     34                                ;GET THIRD CHARACTER
26E8 8041             (           ed.asm):01263                 SUBA    #'A'                              ;CONVERT TO BINARY
26EA 25D4             (           ed.asm):01264                 BCS     KEYIN                             ;INVALID, WAIT FOR NEXT KEY
26EC 8103             (           ed.asm):01265                 CMPA    #3                                ;TEST FOR OUT OF RANGE
26EE 2ED0             (           ed.asm):01266                 BGT     KEYIN                             ;INVALID, GET NEXT KEY
26F0 201A             (           ed.asm):01267                 BRA     XLATE                             ;TRANSLATE CHARACTER
26F2                  (           ed.asm):01268         NOCUR
26F2 814F             (           ed.asm):01269                 CMPA    #'O'                              ;TEST FOR KEYPAD CHARACTER
26F4 261B             (           ed.asm):01270                 BNE     NORCHR                            ;NORMAL CHARACTER
26F6 3F               (           ed.asm):01271                 SWI
26F7 22               (           ed.asm):01272                 FCB     34                                ;GET THIRD CHARACTER OF S=ENCE
26F8 8049             (           ed.asm):01273                 SUBA    #$49                              ;CONVERT TO BINARY
26FA 8104             (           ed.asm):01274                 CMPA    #4                                ;TEST FOR OUT OR RANGE
26FC 2DC2             (           ed.asm):01275                 BLT     KEYIN                             ;IF SO, IGNORE
26FE 810A             (           ed.asm):01276                 CMPA    #$0A                              ;TEST FOR OUT OF RANGE
2700 2F0A             (           ed.asm):01277                 BLE     XLATE                             ;PERFORM TRANSLATION
2702 8018             (           ed.asm):01278                 SUBA    #$18                              ;CONVERT TO BINARY
2704 810B             (           ed.asm):01279                 CMPA    #$B                               ;TEST FOR IN RANGE
2706 2DB8             (           ed.asm):01280                 BLT     KEYIN                             ;READ NEXT KEY
2708 8118             (           ed.asm):01281                 CMPA    #$18                              ;TEST FOR IN RANGE
270A 2EB4             (           ed.asm):01282                 BGT     KEYIN                             ;NO, IGNORE
270C                  (           ed.asm):01283         XLATE
270C 8E2713           (           ed.asm):01284                 LDX     #CNVTAB                           ;CONVERSION TABLE
270F A686             (           ed.asm):01285                 LDA     A,X                               ;GET CHARACTER
2711                  (           ed.asm):01286         NORCHR
2711 3594             (           ed.asm):01287                 PULS    B,X,PC                            ;RESTORE REGISTERS
                      (           ed.asm):01288         ;*
                      (           ed.asm):01289         ;* KEYCODE CONVERSION TABLE
                      (           ed.asm):01290         ;*
                      (           ed.asm):01291         ;* CURSOR MOVEMENT KEYS
                      (           ed.asm):01292         ;*
2713                  (           ed.asm):01293         CNVTAB
2713 80               (           ed.asm):01294                 FCB     $80                               ;CURSOR UP KEY
2714 81               (           ed.asm):01295                 FCB     $81                               ;CURSOR DOWN
2715 82               (           ed.asm):01296                 FCB     $82                               ;CURSOR RIGHT
2716 83               (           ed.asm):01297                 FCB     $83                               ;CURSOR LEFT
                      (           ed.asm):01298         ;* KEYPAD PF KEYS
2717 86               (           ed.asm):01299                 FCB     $86                               ;ENTER KEY
2718 FF               (           ed.asm):01300                 FCB     $FF                               ;N/A
2719 FF               (           ed.asm):01301                 FCB     $FF                               ;N/A
271A 89               (           ed.asm):01302                 FCB     $89                               ;PFKEY1
271B 8D               (           ed.asm):01303                 FCB     $8D                               ;PFKEY2
271C 95               (           ed.asm):01304                 FCB     $95                               ;PFKEY3
271D 8C               (           ed.asm):01305                 FCB     $8C                               ;PFKEY4
                      (           ed.asm):01306         ;* KEYPAD APPLICATION KEYS
271E 87               (           ed.asm):01307                 FCB     $87                               ;COMMA KEY
271F 90               (           ed.asm):01308                 FCB     $90                               ;DASH KEY
2720 93               (           ed.asm):01309                 FCB     $93                               ;DOT KEY
2721 FF               (           ed.asm):01310                 FCB     $FF                               ;N/A
2722 84               (           ed.asm):01311                 FCB     $84                               ;ZERO KEY
2723 85               (           ed.asm):01312                 FCB     $85                               ;ONE KEY
2724 94               (           ed.asm):01313                 FCB     $94                               ;TWO KEY
2725 91               (           ed.asm):01314                 FCB     $91                               ;THREE KEY
2726 8E               (           ed.asm):01315                 FCB     $8E                               ;FOUR KEY
2727 8F               (           ed.asm):01316                 FCB     $8F                               ;FIVE KEY
2728 92               (           ed.asm):01317                 FCB     $92                               ;SIX KEY
2729 8B               (           ed.asm):01318                 FCB     $8B                               ;SEVEN KEY
272A 8A               (           ed.asm):01319                 FCB     $8A                               ;EIGHT KEY
272B 96               (           ed.asm):01320                 FCB     $96                               ;NINE KEY
                      (           ed.asm):01321         ;*
                      (           ed.asm):01322         ;* COMMAND TABLE
                      (           ed.asm):01323         ;*
272C                  (           ed.asm):01324         CMDTAB
272C 84               (           ed.asm):01325                 FCB     $84                               ;R=IRE AT LEAST 'QUIT'
272D 51554954         (           ed.asm):01326                 FCC     'QUIT'
2731 82               (           ed.asm):01327                 FCB     $82                               ;R=IRE AT LEAST 'EX'
2732 45584954         (           ed.asm):01328                 FCC     'EXIT'
2736 82               (           ed.asm):01329                 FCB     $82                               ;R=IRE AT LEAST 'AP'
2737 415050454E44     (           ed.asm):01330                 FCC     'APPEND'
273D 82               (           ed.asm):01331                 FCB     $82                               ;R=IRE AT LEAST 'SA'
273E 53415645         (           ed.asm):01332                 FCC     'SAVE'
2742 83               (           ed.asm):01333                 FCB     $83                               ;REUQIRE AT LEAST 'TAB'
2743 54414253         (           ed.asm):01334                 FCC     'TABS'
2747 83               (           ed.asm):01335                 FCB     $83                               ;R=IRE AT LEAST 'SPA'
2748 535041434553     (           ed.asm):01336                 FCC     'SPACES'
274E 82               (           ed.asm):01337                 FCB     $82                               ;R=IRE AT LEAST 'DO'
274F 444F53           (           ed.asm):01338                 FCC     'DOS'
2752 80               (           ed.asm):01339                 FCB     $80                               ;INDICATE END OF TABLE
                      (           ed.asm):01340         ;*
                      (           ed.asm):01341         ;* MESSAGES
                      (           ed.asm):01342         ;*
2753                  (           ed.asm):01343         NEWMSG
2753 4E65772066696C65 (           ed.asm):01344                 FCN     'New file'
     00
275C                  (           ed.asm):01345         OUTERR
275C 46696C65206C696D (           ed.asm):01346                 FCN     'File limit reached.'
     6974207265616368
     65642E00
2770                  (           ed.asm):01347         WAIMSG
2770 507265737320616E (           ed.asm):01348                 FCN     'Press any Key to Continue'
     79204B657920746F
     20436F6E74696E75
     6500
278A                  (           ed.asm):01349         SNFMSG
278A 537472696E67206E (           ed.asm):01350                 FCN     'String not found'
     6F7420666F756E64
     00
279B                  (           ed.asm):01351         RESMSG
279B 4275666665722072 (           ed.asm):01352                 FCN     'Buffer reset'
     6573657400
27A8                  (           ed.asm):01353         ICMMSG
27A8 556E6B6E6F776E20 (           ed.asm):01354                 FCN     'Unknown Command'
     436F6D6D616E6400
27B8                  (           ed.asm):01355         INSON
27B8 496E73657274206F (           ed.asm):01356                 FCN     'Insert on'
     6E00
27C2                  (           ed.asm):01357         INSOFF
27C2 496E73657274206F (           ed.asm):01358                 FCN     'Insert off'
     666600
27CD                  (           ed.asm):01359         HLPFIL
27CD 5B53595354454D5D (           ed.asm):01360                 FCN     '[SYSTEM]ED.HLP'        HELP FILE
     45442E484C5000
27DC                  (           ed.asm):01361         EOFMSG
27DC 5B454F465D00     (           ed.asm):01362                 FCN     '[EOF]'                           ;     END OF FILE MESSAGE
27E2                  (           ed.asm):01363         INVON
27E2 1B5B376D         (           ed.asm):01364                 FCB     $1B,'[','7','m'                   ;TURN ON INVERSE VIDEO
27E6                  (           ed.asm):01365         INVCHR
27E6 00               (           ed.asm):01366                 FCB     0                                 ;     CHARACTER TO INVERSE
27E7                  (           ed.asm):01367         INVOFF
27E7 1B5B306D00       (           ed.asm):01368                 FCB     $1B,'[','0','m',0       TURN OFF INVERSE VIDEO

Symbol Table:
[ G] ABORT                            2165
[ G] ADLN                             2539
[ G] ADVCHR                           24EC
[ G] ADVEOF                           257D
[ G] ADVLIN                           24FB
[ G] AEOFG                            2519
[ G] ALINE                            20D4
[ G] APPEND                           217A
[ G] BAKCHR                           2583
[ G] BAKL                             2436
[ G] BAKLIN                           259B
[ G] BKUPL                            2597
[ G] CLEOL                            2669
[ G] CLRCMD                           265F
[ G] CLS                              268B
[ G] CMD0                             20D9
[ G] CMD1                             20E5
[ G] CMD10                            2348
[ G] CMD11                            235E
[ G] CMD12                            2387
[ G] CMD13                            23A2
[ G] CMD14                            23D4
[ G] CMD15                            23E2
[ G] CMD16                            23FF
[ G] CMD17                            245C
[ G] CMD18                            245F
[ G] CMD2                             20F5
[ G] CMD3                             2122
[ G] CMD4                             212D
[ G] CMD5                             2285
[ G] CMD6                             22AF
[ G] CMD7                             22DC
[ G] CMD8                             2304
[ G] CMD9                             233C
[ G] CMDTAB                           272C
[ G] CNVBF1                           2674
[ G] CNVBUF                           2670
[ G] CNVTAB                           2713
[ G] CRSPEC                           20A8
[ G] CURFLG                           2805
[ G] CURHOM                           2613
[ G] CURPOS                           269E
[ G] CURUP                            20B8
[ G] DELCHR                           24AB
[ G] DELCR                            2108
[ G] DELEOF                           24CA
[ G] DELGO                            20F8
[ G] DELKEY                           26D8
[ G] DELLP                            24B1
[ G] DELRTS                           2121
[ G] DELSN                            22DF
[ G] DISCR                            2604
[ G] DISEOF                           260E
[ G] DISHLP                           231B
[ G] DISTXT                           25F7
[ G] DLBUF                            2864
[ G] DOCMD                            2264
[ G] DOS                              2251
[ G] EDIT                             2000
[ G] EDIT1                            201B
[ G] EDTCMD                           2071
[ G] ENDSN                            23CA
[ G] ENPAK                            21F5
[ G] EOFERR                           254A
[ G] EOFMSG                           27DC
[ G] EOLFND                           23FE
[ G] ERRMSG                           226E
[ G] ESCAPE                           26E0
[ G] EXECMD                           2085
[ G] FEOL                             23F2
[ G] FINCR                            22EF
[ G] FINEF                            2495
[ G] FNDBOT                           2359
[ G] FNDEOF                           2357
[ G] FNTAB                            2466
[ G] FOUND                            2430
[ G] GETC1                            2642
[ G] GETC2                            264E
[ G] GETCMD                           263D
[ G] GETKEY                           26BE
[ G] GINSCH                           209B
[ G] GOLIN                            21BB
[ G] GOLOOK                           2417
[ G] HDISP                            231F
[ G] HLPFIL                           27CD
[ G] ICMMSG                           27A8
[ G] INMSG                            20F2
[ G] INPBUF                           2824
[ G] INS1                             2369
[ G] INS2                             237A
[ G] INSCHR                           2482
[ G] INSEOF                           2490
[ G] INSFLG                           2806
[ G] INSLP                            2488
[ G] INSMUL                           2493
[ G] INSOFF                           27C2
[ G] INSON                            27B8
[ G] INSP                             2477
[ G] INVCHR                           27E6
[ G] INVCMD                           226B
[ G] INVOFF                           27E7
[ G] INVON                            27E2
[ G] KEYIN                            26C0
[ G] LOCA1                            25E2
[ G] LOCADR                           25D4
[ G] LOCLIN                           25DC
[ G] LOKLIN                           2517
[ G] LOOK                             241A
[ G] LSTBUF                           2682
[ G] MOVBAC                           22F9
[ G] MOVL                             24A1
[ G] NAMBUF                           280B
[ G] NEWFIL                           204E
[ G] NEWMSG                           2753
[ G] NEWNAM                           21A3
[ G] NLINES                           0017
[ G] NOAEOF                           2555
[ G] NOCHG                            267E
[ G] NOCOM                            21BD
[ G] NOCUR                            26F2
[ G] NODEOF                           211E
[ G] NOFIND                           2456
[ G] NOINST                           209E
[ G] NORCHR                           2711
[ G] NORES                            2079
[ G] NORPOS                           2568
[ G] NOTNEW                           205F
[ G] NXTL                             2508
[ G] OKGO                             244A
[ G] OKMV                             256E
[ G] OLDPOS                           2804
[ G] OSEND                            DBFF
[ G] OSRAM                            2000
[ G] OSUTIL                           D000
[ G] OUT1                             262B
[ G] OUT2                             262F
[ G] OUT3                             2631
[ G] OUT4                             261A
[ G] OUTDIF                           2621
[ G] OUTERR                           275C
[ G] OUTPRT                           261D
[ G] PACK                             21B1
[ G] PAGCR                            229B
[ G] PAGE                             228C
[ G] PAGEOF                           22A8
[ G] PGB1                             22C5
[ G] PGB2                             22C7
[ G] PGBAK                            22B8
[ G] PGGO                             22B2
[ G] POSLIN                           255E
[ G] QUIT                             2161
[ G] REFBOT                           24B9
[ G] REFL1                            24D8
[ G] REFL2                            24E9
[ G] REFLIN                           24CB
[ G] REFR1                            2192
[ G] REFSCR                           25EC
[ G] RESMSG                           279B
[ G] SAVE                             2198
[ G] SAVFIL                           2155
[ G] SAVL                             2393
[ G] SAVNAM                           2022
[ G] SAVOUT                           2167
[ G] SAVSPC                           21DF
[ G] SINS1                            23B1
[ G] SINS2                            23C2
[ G] SKPLIN                           24F9
[ G] SKPSPC                           21CF
[ G] SNARF                            2900
[ G] SNFMSG                           278A
[ G] SNRPOS                           2809
[ G] SPCPOS                           256A
[ G] SROLLD                           2514
[ G] SROLLU                           25A3
[ G] SROLU1                           25A8
[ G] SROLU2                           25BA
[ G] STACK                            3EFF
[ G] TABKEY                           26DC
[ G] TABOK                            21ED
[ G] TEMP                             2807
[ G] TEXT                             3F00
[ G] THER1                            257C
[ G] THERE                            25EB
[ G] TOPF                             233F
[ G] TOPSCR                           22D7
[ G] TST2                             2424
[ G] TXTPOS                           2802
[ G] UCR                              2227
[ G] UEOF                             2249
[ G] UFILL                            221B
[ G] UGOLIN                           21FD
[ G] UMOV                             223F
[ G] UMOVL                            2205
[ G] UNCMD                            2481
[ G] UNOINS                           223B
[ G] UNPACK                           21F7
[ G] UTAB                             2217
[ G] WAIHLP                           2329
[ G] WAIKEY                           218A
[ G] WAIMSG                           2770
[ G] XLATE                            270C
[ G] XPOS                             2800
[ G] XPOSHB                           0028
[ G] YPOS                             2801
